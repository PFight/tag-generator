!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function r(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function i(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function l(t,e){return t(e={exports:{}},e.exports),e.exports}var f=function(t){return t&&t.Math==Math&&t},h=f("object"==typeof globalThis&&globalThis)||f("object"==typeof window&&window)||f("object"==typeof self&&self)||f("object"==typeof u&&u)||function(){return this}()||Function("return this")(),d=function(t){try{return!!t()}catch(t){return!0}},p=!d((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),y={}.propertyIsEnumerable,v=Object.getOwnPropertyDescriptor,g={f:v&&!y.call({1:2},1)?function(t){var e=v(this,t);return!!e&&e.enumerable}:y},m=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},b={}.toString,w=function(t){return b.call(t).slice(8,-1)},_="".split,E=d((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==w(t)?_.call(t,""):Object(t)}:Object,S=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},I=function(t){return E(S(t))},T=function(t){return"object"==typeof t?null!==t:"function"==typeof t},O=function(t,e){if(!T(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!T(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!T(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!T(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},C=function(t){return Object(S(t))},A={}.hasOwnProperty,k=Object.hasOwn||function(t,e){return A.call(C(t),e)},x=h.document,N=T(x)&&T(x.createElement),R=function(t){return N?x.createElement(t):{}},D=!p&&!d((function(){return 7!=Object.defineProperty(R("div"),"a",{get:function(){return 7}}).a})),P=Object.getOwnPropertyDescriptor,L={f:p?P:function(t,e){if(t=I(t),e=O(e,!0),D)try{return P(t,e)}catch(t){}if(k(t,e))return m(!g.f.call(t,e),t[e])}},F=function(t){if(!T(t))throw TypeError(String(t)+" is not an object");return t},j=Object.defineProperty,M={f:p?j:function(t,e,n){if(F(t),e=O(e,!0),F(n),D)try{return j(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},V=p?function(t,e,n){return M.f(t,e,m(1,n))}:function(t,e,n){return t[e]=n,t},U=function(t,e){try{V(h,t,e)}catch(n){h[t]=e}return e},B=h["__core-js_shared__"]||U("__core-js_shared__",{}),K=Function.toString;"function"!=typeof B.inspectSource&&(B.inspectSource=function(t){return K.call(t)});var q,G,W,z=B.inspectSource,X=h.WeakMap,H="function"==typeof X&&/native code/.test(z(X)),Z=l((function(t){(t.exports=function(t,e){return B[t]||(B[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.2",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),Y=0,J=Math.random(),Q=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Y+J).toString(36)},$=Z("keys"),tt=function(t){return $[t]||($[t]=Q(t))},et={},nt=h.WeakMap;if(H||B.state){var rt=B.state||(B.state=new nt),it=rt.get,ot=rt.has,at=rt.set;q=function(t,e){if(ot.call(rt,t))throw new TypeError("Object already initialized");return e.facade=t,at.call(rt,t,e),e},G=function(t){return it.call(rt,t)||{}},W=function(t){return ot.call(rt,t)}}else{var st=tt("state");et[st]=!0,q=function(t,e){if(k(t,st))throw new TypeError("Object already initialized");return e.facade=t,V(t,st,e),e},G=function(t){return k(t,st)?t[st]:{}},W=function(t){return k(t,st)}}var ut,ct,lt={set:q,get:G,has:W,enforce:function(t){return W(t)?G(t):q(t,{})},getterFor:function(t){return function(e){var n;if(!T(e)||(n=G(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},ft=l((function(t){var e=lt.get,n=lt.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a,s=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||k(i,"name")||V(i,"name",e),(a=n(i)).source||(a.source=r.join("string"==typeof e?e:""))),t!==h?(s?!c&&t[e]&&(u=!0):delete t[e],u?t[e]=i:V(t,e,i)):u?t[e]=i:U(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||z(this)}))})),ht=h,dt=function(t){return"function"==typeof t?t:void 0},pt=function(t,e){return arguments.length<2?dt(ht[t])||dt(h[t]):ht[t]&&ht[t][e]||h[t]&&h[t][e]},yt=Math.ceil,vt=Math.floor,gt=function(t){return isNaN(t=+t)?0:(t>0?vt:yt)(t)},mt=Math.min,bt=function(t){return t>0?mt(gt(t),9007199254740991):0},wt=Math.max,_t=Math.min,Et=function(t){return function(e,n,r){var i,o=I(e),a=bt(o.length),s=function(t,e){var n=gt(t);return n<0?wt(n+e,0):_t(n,e)}(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},St={includes:Et(!0),indexOf:Et(!1)},It=St.indexOf,Tt=function(t,e){var n,r=I(t),i=0,o=[];for(n in r)!k(et,n)&&k(r,n)&&o.push(n);for(;e.length>i;)k(r,n=e[i++])&&(~It(o,n)||o.push(n));return o},Ot=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ct=Ot.concat("length","prototype"),At={f:Object.getOwnPropertyNames||function(t){return Tt(t,Ct)}},kt={f:Object.getOwnPropertySymbols},xt=pt("Reflect","ownKeys")||function(t){var e=At.f(F(t)),n=kt.f;return n?e.concat(n(t)):e},Nt=function(t,e){for(var n=xt(e),r=M.f,i=L.f,o=0;o<n.length;o++){var a=n[o];k(t,a)||r(t,a,i(e,a))}},Rt=/#|\.prototype\./,Dt=function(t,e){var n=Lt[Pt(t)];return n==jt||n!=Ft&&("function"==typeof e?d(e):!!e)},Pt=Dt.normalize=function(t){return String(t).replace(Rt,".").toLowerCase()},Lt=Dt.data={},Ft=Dt.NATIVE="N",jt=Dt.POLYFILL="P",Mt=Dt,Vt=L.f,Ut=function(t,e){var n,r,i,o,a,s=t.target,u=t.global,c=t.stat;if(n=u?h:c?h[s]||U(s,{}):(h[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=Vt(n,r))&&a.value:n[r],!Mt(u?r:s+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Nt(o,i)}(t.sham||i&&i.sham)&&V(o,"sham",!0),ft(n,r,o,t)}},Bt=pt("navigator","userAgent")||"",Kt=h.process,qt=Kt&&Kt.versions,Gt=qt&&qt.v8;Gt?ct=(ut=Gt.split("."))[0]<4?1:ut[0]+ut[1]:Bt&&(!(ut=Bt.match(/Edge\/(\d+)/))||ut[1]>=74)&&(ut=Bt.match(/Chrome\/(\d+)/))&&(ct=ut[1]);var Wt,zt=ct&&+ct,Xt=!!Object.getOwnPropertySymbols&&!d((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&zt&&zt<41})),Ht=Xt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Zt=Z("wks"),Yt=h.Symbol,Jt=Ht?Yt:Yt&&Yt.withoutSetter||Q,Qt=function(t){return k(Zt,t)&&(Xt||"string"==typeof Zt[t])||(Xt&&k(Yt,t)?Zt[t]=Yt[t]:Zt[t]=Jt("Symbol."+t)),Zt[t]},$t=Qt("match"),te=function(t){if(function(t){var e;return T(t)&&(void 0!==(e=t[$t])?!!e:"RegExp"==w(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},ee=Qt("match"),ne=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[ee]=!1,"/./"[t](e)}catch(t){}}return!1},re=L.f,ie="".startsWith,oe=Math.min,ae=ne("startsWith"),se=!(ae||(Wt=re(String.prototype,"startsWith"),!Wt||Wt.writable));Ut({target:"String",proto:!0,forced:!se&&!ae},{startsWith:function(t){var e=String(S(this));te(t);var n=bt(oe(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return ie?ie.call(e,r,n):e.slice(n,n+r.length)===r}});var ue=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},ce=function(t,e,n){if(ue(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},le=Function.call,fe=function(t,e,n){return ce(le,h[t].prototype[e],n)};fe("String","startsWith");var he=Array.isArray||function(t){return"Array"==w(t)},de=function(t,e,n){var r=O(e);r in t?M.f(t,r,m(0,n)):t[r]=n},pe=Qt("species"),ye=function(t,e){var n;return he(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!he(n.prototype)?T(n)&&null===(n=n[pe])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},ve=Qt("species"),ge=Qt("isConcatSpreadable"),me=zt>=51||!d((function(){var t=[];return t[ge]=!1,t.concat()[0]!==t})),be=zt>=51||!d((function(){var t=[];return(t.constructor={})[ve]=function(){return{foo:1}},1!==t.concat(Boolean).foo})),we=function(t){if(!T(t))return!1;var e=t[ge];return void 0!==e?!!e:he(t)};Ut({target:"Array",proto:!0,forced:!me||!be},{concat:function(t){var e,n,r,i,o,a=C(this),s=ye(a,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(we(o=-1===e?a:arguments[e])){if(u+(i=bt(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,u++)n in o&&de(s,u,o[n])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");de(s,u++,o)}return s.length=u,s}});var _e={};_e[Qt("toStringTag")]="z";var Ee="[object z]"===String(_e),Se=Qt("toStringTag"),Ie="Arguments"==w(function(){return arguments}()),Te=Ee?w:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Se))?n:Ie?w(e):"Object"==(r=w(e))&&"function"==typeof e.callee?"Arguments":r},Oe=Ee?{}.toString:function(){return"[object "+Te(this)+"]"};Ee||ft(Object.prototype,"toString",Oe,{unsafe:!0});var Ce,Ae=Object.keys||function(t){return Tt(t,Ot)},ke=p?Object.defineProperties:function(t,e){F(t);for(var n,r=Ae(e),i=r.length,o=0;i>o;)M.f(t,n=r[o++],e[n]);return t},xe=pt("document","documentElement"),Ne=tt("IE_PROTO"),Re=function(){},De=function(t){return"<script>"+t+"<\/script>"},Pe=function(){try{Ce=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Pe=Ce?function(t){t.write(De("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Ce):((e=R("iframe")).style.display="none",xe.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(De("document.F=Object")),t.close(),t.F);for(var n=Ot.length;n--;)delete Pe.prototype[Ot[n]];return Pe()};et[Ne]=!0;var Le=Object.create||function(t,e){var n;return null!==t?(Re.prototype=F(t),n=new Re,Re.prototype=null,n[Ne]=t):n=Pe(),void 0===e?n:ke(n,e)},Fe=At.f,je={}.toString,Me="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ve={f:function(t){return Me&&"[object Window]"==je.call(t)?function(t){try{return Fe(t)}catch(t){return Me.slice()}}(t):Fe(I(t))}},Ue={f:Qt},Be=M.f,Ke=function(t){var e=ht.Symbol||(ht.Symbol={});k(e,t)||Be(e,t,{value:Ue.f(t)})},qe=M.f,Ge=Qt("toStringTag"),We=function(t,e,n){t&&!k(t=n?t:t.prototype,Ge)&&qe(t,Ge,{configurable:!0,value:e})},ze=[].push,Xe=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(u,c,l,f){for(var h,d,p=C(u),y=E(p),v=ce(c,l,3),g=bt(y.length),m=0,b=f||ye,w=e?b(u,g):n||a?b(u,0):void 0;g>m;m++)if((s||m in y)&&(d=v(h=y[m],m,p),t))if(e)w[m]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:ze.call(w,h)}else switch(t){case 4:return!1;case 7:ze.call(w,h)}return o?-1:r||i?i:w}},He=[Xe(0),Xe(1),Xe(2),Xe(3),Xe(4),Xe(5),Xe(6),Xe(7)][0],Ze=tt("hidden"),Ye=Qt("toPrimitive"),Je=lt.set,Qe=lt.getterFor("Symbol"),$e=Object.prototype,tn=h.Symbol,en=pt("JSON","stringify"),nn=L.f,rn=M.f,on=Ve.f,an=g.f,sn=Z("symbols"),un=Z("op-symbols"),cn=Z("string-to-symbol-registry"),ln=Z("symbol-to-string-registry"),fn=Z("wks"),hn=h.QObject,dn=!hn||!hn.prototype||!hn.prototype.findChild,pn=p&&d((function(){return 7!=Le(rn({},"a",{get:function(){return rn(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=nn($e,e);r&&delete $e[e],rn(t,e,n),r&&t!==$e&&rn($e,e,r)}:rn,yn=function(t,e){var n=sn[t]=Le(tn.prototype);return Je(n,{type:"Symbol",tag:t,description:e}),p||(n.description=e),n},vn=Ht?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof tn},gn=function(t,e,n){t===$e&&gn(un,e,n),F(t);var r=O(e,!0);return F(n),k(sn,r)?(n.enumerable?(k(t,Ze)&&t[Ze][r]&&(t[Ze][r]=!1),n=Le(n,{enumerable:m(0,!1)})):(k(t,Ze)||rn(t,Ze,m(1,{})),t[Ze][r]=!0),pn(t,r,n)):rn(t,r,n)},mn=function(t,e){F(t);var n=I(e),r=Ae(n).concat(En(n));return He(r,(function(e){p&&!bn.call(n,e)||gn(t,e,n[e])})),t},bn=function(t){var e=O(t,!0),n=an.call(this,e);return!(this===$e&&k(sn,e)&&!k(un,e))&&(!(n||!k(this,e)||!k(sn,e)||k(this,Ze)&&this[Ze][e])||n)},wn=function(t,e){var n=I(t),r=O(e,!0);if(n!==$e||!k(sn,r)||k(un,r)){var i=nn(n,r);return!i||!k(sn,r)||k(n,Ze)&&n[Ze][r]||(i.enumerable=!0),i}},_n=function(t){var e=on(I(t)),n=[];return He(e,(function(t){k(sn,t)||k(et,t)||n.push(t)})),n},En=function(t){var e=t===$e,n=on(e?un:I(t)),r=[];return He(n,(function(t){!k(sn,t)||e&&!k($e,t)||r.push(sn[t])})),r};if(Xt||(ft((tn=function(){if(this instanceof tn)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=Q(t),n=function(t){this===$e&&n.call(un,t),k(this,Ze)&&k(this[Ze],e)&&(this[Ze][e]=!1),pn(this,e,m(1,t))};return p&&dn&&pn($e,e,{configurable:!0,set:n}),yn(e,t)}).prototype,"toString",(function(){return Qe(this).tag})),ft(tn,"withoutSetter",(function(t){return yn(Q(t),t)})),g.f=bn,M.f=gn,L.f=wn,At.f=Ve.f=_n,kt.f=En,Ue.f=function(t){return yn(Qt(t),t)},p&&(rn(tn.prototype,"description",{configurable:!0,get:function(){return Qe(this).description}}),ft($e,"propertyIsEnumerable",bn,{unsafe:!0}))),Ut({global:!0,wrap:!0,forced:!Xt,sham:!Xt},{Symbol:tn}),He(Ae(fn),(function(t){Ke(t)})),Ut({target:"Symbol",stat:!0,forced:!Xt},{for:function(t){var e=String(t);if(k(cn,e))return cn[e];var n=tn(e);return cn[e]=n,ln[n]=e,n},keyFor:function(t){if(!vn(t))throw TypeError(t+" is not a symbol");if(k(ln,t))return ln[t]},useSetter:function(){dn=!0},useSimple:function(){dn=!1}}),Ut({target:"Object",stat:!0,forced:!Xt,sham:!p},{create:function(t,e){return void 0===e?Le(t):mn(Le(t),e)},defineProperty:gn,defineProperties:mn,getOwnPropertyDescriptor:wn}),Ut({target:"Object",stat:!0,forced:!Xt},{getOwnPropertyNames:_n,getOwnPropertySymbols:En}),Ut({target:"Object",stat:!0,forced:d((function(){kt.f(1)}))},{getOwnPropertySymbols:function(t){return kt.f(C(t))}}),en){var Sn=!Xt||d((function(){var t=tn();return"[null]"!=en([t])||"{}"!=en({a:t})||"{}"!=en(Object(t))}));Ut({target:"JSON",stat:!0,forced:Sn},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(T(e)||void 0!==t)&&!vn(t))return he(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!vn(e))return e}),i[1]=e,en.apply(null,i)}})}tn.prototype[Ye]||V(tn.prototype,Ye,tn.prototype.valueOf),We(tn,"Symbol"),et[Ze]=!0,Ke("asyncIterator");var In=M.f,Tn=h.Symbol;if(p&&"function"==typeof Tn&&(!("description"in Tn.prototype)||void 0!==Tn().description)){var On={},Cn=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Cn?new Tn(t):void 0===t?Tn():Tn(t);return""===t&&(On[e]=!0),e};Nt(Cn,Tn);var An=Cn.prototype=Tn.prototype;An.constructor=Cn;var kn=An.toString,xn="Symbol(test)"==String(Tn("test")),Nn=/^Symbol\((.*)\)[^)]+$/;In(An,"description",{configurable:!0,get:function(){var t=T(this)?this.valueOf():this,e=kn.call(t);if(k(On,t))return"";var n=xn?e.slice(7,-1):e.replace(Nn,"$1");return""===n?void 0:n}}),Ut({global:!0,forced:!0},{Symbol:Cn})}Ke("hasInstance"),Ke("isConcatSpreadable"),Ke("iterator"),Ke("match"),Ke("matchAll"),Ke("replace"),Ke("search"),Ke("species"),Ke("split"),Ke("toPrimitive"),Ke("toStringTag"),Ke("unscopables"),We(h.JSON,"JSON",!0),We(Math,"Math",!0),Ut({global:!0},{Reflect:{}}),We(h.Reflect,"Reflect",!0),ht.Symbol;var Rn,Dn,Pn,Ln=function(t){return function(e,n){var r,i,o=String(S(e)),a=gt(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},Fn={codeAt:Ln(!1),charAt:Ln(!0)},jn=!d((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Mn=tt("IE_PROTO"),Vn=Object.prototype,Un=jn?Object.getPrototypeOf:function(t){return t=C(t),k(t,Mn)?t[Mn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Vn:null},Bn=Qt("iterator"),Kn=!1;[].keys&&("next"in(Pn=[].keys())?(Dn=Un(Un(Pn)))!==Object.prototype&&(Rn=Dn):Kn=!0),(null==Rn||d((function(){var t={};return Rn[Bn].call(t)!==t})))&&(Rn={}),k(Rn,Bn)||V(Rn,Bn,(function(){return this}));var qn={IteratorPrototype:Rn,BUGGY_SAFARI_ITERATORS:Kn},Gn={},Wn=qn.IteratorPrototype,zn=function(){return this},Xn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return F(n),function(t){if(!T(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Hn=qn.IteratorPrototype,Zn=qn.BUGGY_SAFARI_ITERATORS,Yn=Qt("iterator"),Jn=function(){return this},Qn=function(t,e,n,r,i,o,a){!function(t,e,n){var r=e+" Iterator";t.prototype=Le(Wn,{next:m(1,n)}),We(t,r,!1),Gn[r]=zn}(n,e,r);var s,u,c,l=function(t){if(t===i&&y)return y;if(!Zn&&t in d)return d[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",h=!1,d=t.prototype,p=d[Yn]||d["@@iterator"]||i&&d[i],y=!Zn&&p||l(i),v="Array"==e&&d.entries||p;if(v&&(s=Un(v.call(new t)),Hn!==Object.prototype&&s.next&&(Un(s)!==Hn&&(Xn?Xn(s,Hn):"function"!=typeof s[Yn]&&V(s,Yn,Jn)),We(s,f,!0))),"values"==i&&p&&"values"!==p.name&&(h=!0,y=function(){return p.call(this)}),d[Yn]!==y&&V(d,Yn,y),Gn[e]=y,i)if(u={values:l("values"),keys:o?y:l("keys"),entries:l("entries")},a)for(c in u)(Zn||h||!(c in d))&&ft(d,c,u[c]);else Ut({target:e,proto:!0,forced:Zn||h},u);return u},$n=Fn.charAt,tr=lt.set,er=lt.getterFor("String Iterator");Qn(String,"String",(function(t){tr(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=er(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=$n(n,r),e.index+=t.length,{value:t,done:!1})}));var nr=function(t){var e=t.return;if(void 0!==e)return F(e.call(t)).value},rr=function(t,e,n,r){try{return r?e(F(n)[0],n[1]):e(n)}catch(e){throw nr(t),e}},ir=Qt("iterator"),or=Array.prototype,ar=function(t){return void 0!==t&&(Gn.Array===t||or[ir]===t)},sr=Qt("iterator"),ur=function(t){if(null!=t)return t[sr]||t["@@iterator"]||Gn[Te(t)]},cr=Qt("iterator"),lr=!1;try{var fr=0,hr={next:function(){return{done:!!fr++}},return:function(){lr=!0}};hr[cr]=function(){return this},Array.from(hr,(function(){throw 2}))}catch(t){}var dr=function(t,e){if(!e&&!lr)return!1;var n=!1;try{var r={};r[cr]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},pr=!dr((function(t){Array.from(t)}));Ut({target:"Array",stat:!0,forced:pr},{from:function(t){var e,n,r,i,o,a,s=C(t),u="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,f=void 0!==l,h=ur(s),d=0;if(f&&(l=ce(l,c>2?arguments[2]:void 0,2)),null==h||u==Array&&ar(h))for(n=new u(e=bt(s.length));e>d;d++)a=f?l(s[d],d):s[d],de(n,d,a);else for(o=(i=h.call(s)).next,n=new u;!(r=o.call(i)).done;d++)a=f?rr(i,l,[r.value,d],!0):r.value,de(n,d,a);return n.length=d,n}}),ht.Array.from;var yr,vr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,gr=M.f,mr=h.Int8Array,br=mr&&mr.prototype,wr=h.Uint8ClampedArray,_r=wr&&wr.prototype,Er=mr&&Un(mr),Sr=br&&Un(br),Ir=Object.prototype,Tr=Ir.isPrototypeOf,Or=Qt("toStringTag"),Cr=Q("TYPED_ARRAY_TAG"),Ar=vr&&!!Xn&&"Opera"!==Te(h.opera),kr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},xr={BigInt64Array:8,BigUint64Array:8};for(yr in kr)h[yr]||(Ar=!1);if((!Ar||"function"!=typeof Er||Er===Function.prototype)&&(Er=function(){throw TypeError("Incorrect invocation")},Ar))for(yr in kr)h[yr]&&Xn(h[yr],Er);if((!Ar||!Sr||Sr===Ir)&&(Sr=Er.prototype,Ar))for(yr in kr)h[yr]&&Xn(h[yr].prototype,Sr);if(Ar&&Un(_r)!==Sr&&Xn(_r,Sr),p&&!k(Sr,Or))for(yr in gr(Sr,Or,{get:function(){return T(this)?this[Cr]:void 0}}),kr)h[yr]&&V(h[yr],Cr,yr);var Nr=Qt("species"),Rr=function(t){if(function(t){if(!T(t))return!1;var e=Te(t);return k(kr,e)||k(xr,e)}(t))return t;throw TypeError("Target is not a typed array")},Dr=function(t){if(Xn){if(Tr.call(Er,t))return t}else for(var e in kr)if(k(kr,yr)){var n=h[e];if(n&&(t===n||Tr.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},Pr=[].slice;!function(t,e,n){if(p){if(n)for(var r in kr){var i=h[r];if(i&&k(i.prototype,t))try{delete i.prototype[t]}catch(t){}}Sr[t]&&!n||ft(Sr,t,n?e:Ar&&br[t]||e)}}("slice",(function(t,e){for(var n=Pr.call(Rr(this),t,e),r=function(t,e){var n,r=F(t).constructor;return void 0===r||null==(n=F(r)[Nr])?e:ue(n)}(this,this.constructor),i=0,o=n.length,a=new(Dr(r))(o);o>i;)a[i]=n[i++];return a}),d((function(){new Int8Array(1).slice()})));var Lr=Qt("unscopables"),Fr=Array.prototype;null==Fr[Lr]&&M.f(Fr,Lr,{configurable:!0,value:Le(null)});var jr=function(t){Fr[Lr][t]=!0},Mr=St.includes;Ut({target:"Array",proto:!0},{includes:function(t){return Mr(this,t,arguments.length>1?arguments[1]:void 0)}}),jr("includes"),fe("Array","includes"),Ut({target:"String",proto:!0,forced:!ne("includes")},{includes:function(t){return!!~String(S(this)).indexOf(te(t),arguments.length>1?arguments[1]:void 0)}}),fe("String","includes");var Vr=!d((function(){return Object.isExtensible(Object.preventExtensions({}))})),Ur=l((function(t){var e=M.f,n=Q("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+r++,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!T(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!k(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!k(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return Vr&&a.REQUIRED&&i(t)&&!k(t,n)&&o(t),t}};et[n]=!0}));Ur.REQUIRED,Ur.fastKey,Ur.getWeakData,Ur.onFreeze;var Br=function(t,e){this.stopped=t,this.result=e},Kr=function(t,e,n){var r,i,o,a,s,u,c,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),p=ce(e,l,1+f+d),y=function(t){return r&&nr(r),new Br(!0,t)},v=function(t){return f?(F(t),d?p(t[0],t[1],y):p(t[0],t[1])):d?p(t,y):p(t)};if(h)r=t;else{if("function"!=typeof(i=ur(t)))throw TypeError("Target is not iterable");if(ar(i)){for(o=0,a=bt(t.length);a>o;o++)if((s=v(t[o]))&&s instanceof Br)return s;return new Br(!1)}r=i.call(t)}for(u=r.next;!(c=u.call(r)).done;){try{s=v(c.value)}catch(t){throw nr(r),t}if("object"==typeof s&&s&&s instanceof Br)return s}return new Br(!1)},qr=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},Gr=function(t,e,n){for(var r in e)ft(t,r,e[r],n);return t},Wr=Qt("species"),zr=M.f,Xr=Ur.fastKey,Hr=lt.set,Zr=lt.getterFor;!function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",a=h[t],s=a&&a.prototype,u=a,c={},l=function(t){var e=s[t];ft(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!T(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return i&&!T(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!T(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Mt(t,"function"!=typeof a||!(i||s.forEach&&!d((function(){(new a).entries().next()})))))u=n.getConstructor(e,t,r,o),Ur.REQUIRED=!0;else if(Mt(t,!0)){var f=new u,p=f[o](i?{}:-0,1)!=f,y=d((function(){f.has(1)})),v=dr((function(t){new a(t)})),g=!i&&d((function(){for(var t=new a,e=5;e--;)t[o](e,e);return!t.has(-0)}));v||((u=e((function(e,n){qr(e,u,t);var i=function(t,e,n){var r,i;return Xn&&"function"==typeof(r=e.constructor)&&r!==n&&T(i=r.prototype)&&i!==n.prototype&&Xn(t,i),t}(new a,e,u);return null!=n&&Kr(n,i[o],{that:i,AS_ENTRIES:r}),i}))).prototype=s,s.constructor=u),(y||g)&&(l("delete"),l("has"),r&&l("get")),(g||p)&&l(o),i&&s.clear&&delete s.clear}c[t]=u,Ut({global:!0,forced:u!=a},c),We(u,t),i||n.setStrong(u,t,r)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,r){var i=t((function(t,o){qr(t,i,e),Hr(t,{type:e,index:Le(null),first:void 0,last:void 0,size:0}),p||(t.size=0),null!=o&&Kr(o,t[r],{that:t,AS_ENTRIES:n})})),o=Zr(e),a=function(t,e,n){var r,i,a=o(t),u=s(t,e);return u?u.value=n:(a.last=u={index:i=Xr(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=u),r&&(r.next=u),p?a.size++:t.size++,"F"!==i&&(a.index[i]=u)),t},s=function(t,e){var n,r=o(t),i=Xr(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Gr(i.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,p?t.size=0:this.size=0},delete:function(t){var e=this,n=o(e),r=s(e,t);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),p?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=o(this),r=ce(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),Gr(i.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),p&&zr(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=Zr(e),o=Zr(r);Qn(t,e,(function(t,e){Hr(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),function(t){var e=pt(t),n=M.f;p&&e&&!e[Wr]&&n(e,Wr,{configurable:!0,get:function(){return this}})}(e)}});var Yr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Jr=lt.set,Qr=lt.getterFor("Array Iterator"),$r=Qn(Array,"Array",(function(t,e){Jr(this,{type:"Array Iterator",target:I(t),index:0,kind:e})}),(function(){var t=Qr(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Gn.Arguments=Gn.Array,jr("keys"),jr("values"),jr("entries");var ti=Qt("iterator"),ei=Qt("toStringTag"),ni=$r.values;for(var ri in Yr){var ii=h[ri],oi=ii&&ii.prototype;if(oi){if(oi[ti]!==ni)try{V(oi,ti,ni)}catch(t){oi[ti]=ni}if(oi[ei]||V(oi,ei,ri),Yr[ri])for(var ai in $r)if(oi[ai]!==$r[ai])try{V(oi,ai,$r[ai])}catch(t){oi[ai]=$r[ai]}}}function si(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))}function ui(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,(function(e){o(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0==--i&&e(r)}))}r[t]={status:"fulfilled",value:n},0==--i&&e(r)}for(var a=0;a<r.length;a++)o(a,r[a])}))}ht.Set;var ci=setTimeout;function li(t){return Boolean(t&&void 0!==t.length)}function fi(){}function hi(t){if(!(this instanceof hi))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],mi(t,this)}function di(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,hi._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void yi(e.promise,t)}pi(e.promise,r)}else(1===t._state?pi:yi)(e.promise,t._value)}))):t._deferreds.push(e)}function pi(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof hi)return t._state=3,t._value=e,void vi(t);if("function"==typeof n)return void mi((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,vi(t)}catch(e){yi(t,e)}var r,i}function yi(t,e){t._state=2,t._value=e,vi(t)}function vi(t){2===t._state&&0===t._deferreds.length&&hi._immediateFn((function(){t._handled||hi._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)di(t,t._deferreds[e]);t._deferreds=null}function gi(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function mi(t,e){var n=!1;try{t((function(t){n||(n=!0,pi(e,t))}),(function(t){n||(n=!0,yi(e,t))}))}catch(t){if(n)return;n=!0,yi(e,t)}}hi.prototype.catch=function(t){return this.then(null,t)},hi.prototype.then=function(t,e){var n=new this.constructor(fi);return di(this,new gi(t,e,n)),n},hi.prototype.finally=si,hi.all=function(t){return new hi((function(e,n){if(!li(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(e){o(t,e)}),n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},hi.allSettled=ui,hi.resolve=function(t){return t&&"object"==typeof t&&t.constructor===hi?t:new hi((function(e){e(t)}))},hi.reject=function(t){return new hi((function(e,n){n(t)}))},hi.race=function(t){return new hi((function(e,n){if(!li(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)hi.resolve(t[r]).then(e,n)}))},hi._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){ci(t,0)},hi._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var bi=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"function"!=typeof bi.Promise?bi.Promise=hi:bi.Promise.prototype.finally?bi.Promise.allSettled||(bi.Promise.allSettled=ui):bi.Promise.prototype.finally=si,function(t){function e(){}function n(t,e){if(t=void 0===t?"utf-8":t,e=void 0===e?{fatal:!1}:e,-1===i.indexOf(t.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+t+"') is invalid.");if(e.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function r(t){for(var e=0,n=Math.min(65536,t.length+1),r=new Uint16Array(n),i=[],o=0;;){var a=e<t.length;if(!a||o>=n-1){if(i.push(String.fromCharCode.apply(null,r.subarray(0,o))),!a)return i.join("");t=t.subarray(e),o=e=0}if(0==(128&(a=t[e++])))r[o++]=a;else if(192==(224&a)){var s=63&t[e++];r[o++]=(31&a)<<6|s}else if(224==(240&a)){s=63&t[e++];var u=63&t[e++];r[o++]=(31&a)<<12|s<<6|u}else 240==(248&a)&&(65535<(a=(7&a)<<18|(s=63&t[e++])<<12|(u=63&t[e++])<<6|63&t[e++])&&(a-=65536,r[o++]=a>>>10&1023|55296,a=56320|1023&a),r[o++]=a)}}if(t.TextEncoder&&t.TextDecoder)return!1;var i=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t,e){if((e=void 0===e?{stream:!1}:e).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");e=0;for(var n=t.length,r=0,i=Math.max(32,n+(n>>>1)+7),o=new Uint8Array(i>>>3<<3);e<n;){var a=t.charCodeAt(e++);if(55296<=a&&56319>=a){if(e<n){var s=t.charCodeAt(e);56320==(64512&s)&&(++e,a=((1023&a)<<10)+(1023&s)+65536)}if(55296<=a&&56319>=a)continue}if(r+4>o.length&&(i+=8,i=(i*=1+e/t.length*2)>>>3<<3,(s=new Uint8Array(i)).set(o),o=s),0==(4294967168&a))o[r++]=a;else{if(0==(4294965248&a))o[r++]=a>>>6&31|192;else if(0==(4294901760&a))o[r++]=a>>>12&15|224,o[r++]=a>>>6&63|128;else{if(0!=(4292870144&a))continue;o[r++]=a>>>18&7|240,o[r++]=a>>>12&63|128,o[r++]=a>>>6&63|128}o[r++]=63&a|128}}return o.slice?o.slice(0,r):o.subarray(0,r)},Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1});var o=r;"function"==typeof Buffer&&Buffer.from?o=function(t){return Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(o=function(t){var e=URL.createObjectURL(new Blob([t],{type:"text/plain;charset=UTF-8"}));try{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(),n.responseText}catch(e){return r(t)}finally{URL.revokeObjectURL(e)}}),n.prototype.decode=function(t,e){if((e=void 0===e?{stream:!1}:e).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return t=t instanceof Uint8Array?t:t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer):new Uint8Array(t),o(t)},t.TextEncoder=e,t.TextDecoder=n}("undefined"!=typeof window?window:u),function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?a(t):e}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=i(t);if(e){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=l(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var h=function(){function e(){t(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(e,[{key:"addEventListener",value:function(t,e,n){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push({callback:e,options:n})}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],r=0,i=n.length;r<i;r++)if(n[r].callback===e)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(t){if(t.type in this.listeners){for(var e=this.listeners[t.type].slice(),n=0,r=e.length;n<r;n++){var i=e[n];try{i.callback.call(this,t)}catch(t){Promise.resolve().then((function(){throw t}))}i.options&&i.options.once&&this.removeEventListener(t.type,i.callback)}return!t.defaultPrevented}}}]),e}(),d=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),(e=o.call(this)).listeners||h.call(a(e)),Object.defineProperty(a(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(a(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return n(s,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),f(i(s.prototype),"dispatchEvent",this).call(this,t)}}]),s}(h),p=function(){function e(){t(this,e),Object.defineProperty(this,"signal",{value:new d,writable:!0,configurable:!0})}return n(e,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(p.prototype[Symbol.toStringTag]="AbortController",d.prototype[Symbol.toStringTag]="AbortSignal"),function(t){(function(t){return t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof t.Request&&!t.Request.prototype.hasOwnProperty("signal")||!t.AbortController})(t)&&(t.AbortController=p,t.AbortSignal=d)}("undefined"!=typeof self?self:u)}();var wi=l((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){var t=this;this.locked=new Map,this.addToLocked=function(e,n){var r=t.locked.get(e);void 0===r?void 0===n?t.locked.set(e,[]):t.locked.set(e,[n]):void 0!==n&&(r.unshift(n),t.locked.set(e,r))},this.isLocked=function(e){return t.locked.has(e)},this.lock=function(e){return new Promise((function(n,r){t.isLocked(e)?t.addToLocked(e,n):(t.addToLocked(e),n())}))},this.unlock=function(e){var n=t.locked.get(e);if(void 0!==n&&0!==n.length){var r=n.pop();t.locked.set(e,n),void 0!==r&&setTimeout(r,0)}else t.locked.delete(e)}}return t.getInstance=function(){return void 0===t.instance&&(t.instance=new t),t.instance},t}();e.default=function(){return n.getInstance()}}));c(wi);var _i=c(l((function(t,e){var n=u&&u.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))},r=u&&u.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var i="browser-tabs-lock-key";function o(t){return new Promise((function(e){return setTimeout(e,t)}))}function a(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="",r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}var s=function(){function t(){this.acquiredIatSet=new Set,this.id=Date.now().toString()+a(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),void 0===t.waiters&&(t.waiters=[])}return t.prototype.acquireLock=function(e,s){return void 0===s&&(s=5e3),n(this,void 0,void 0,(function(){var n,u,c,l,f,h;return r(this,(function(r){switch(r.label){case 0:n=Date.now()+a(4),u=Date.now()+s,c=i+"-"+e,l=window.localStorage,r.label=1;case 1:return Date.now()<u?[4,o(30)]:[3,8];case 2:return r.sent(),null!==l.getItem(c)?[3,5]:(f=this.id+"-"+e+"-"+n,[4,o(Math.floor(25*Math.random()))]);case 3:return r.sent(),l.setItem(c,JSON.stringify({id:this.id,iat:n,timeoutKey:f,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,o(30)];case 4:return r.sent(),null!==(h=l.getItem(c))&&(h=JSON.parse(h)).id===this.id&&h.iat===n?(this.acquiredIatSet.add(n),this.refreshLockWhileAcquired(c,n),[2,!0]):[3,7];case 5:return t.lockCorrector(),[4,this.waitForSomethingToChange(u)];case 6:r.sent(),r.label=7;case 7:return n=Date.now()+a(4),[3,1];case 8:return[2,!1]}}))}))},t.prototype.refreshLockWhileAcquired=function(t,e){return n(this,void 0,void 0,(function(){var i=this;return r(this,(function(o){return setTimeout((function(){return n(i,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return[4,wi.default().lock(e)];case 1:return r.sent(),this.acquiredIatSet.has(e)?(n=window.localStorage,null===(i=n.getItem(t))?(wi.default().unlock(e),[2]):((i=JSON.parse(i)).timeRefreshed=Date.now(),n.setItem(t,JSON.stringify(i)),wi.default().unlock(e),this.refreshLockWhileAcquired(t,e),[2])):(wi.default().unlock(e),[2])}}))}))}),1e3),[2]}))}))},t.prototype.waitForSomethingToChange=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){var r=!1,i=Date.now(),o=!1;function a(){if(o||(window.removeEventListener("storage",a),t.removeFromWaiting(a),clearTimeout(s),o=!0),!r){r=!0;var e=50-(Date.now()-i);e>0?setTimeout(n,e):n()}}window.addEventListener("storage",a),t.addToWaiting(a);var s=setTimeout(a,Math.max(0,e-Date.now()))}))];case 1:return n.sent(),[2]}}))}))},t.addToWaiting=function(e){this.removeFromWaiting(e),void 0!==t.waiters&&t.waiters.push(e)},t.removeFromWaiting=function(e){void 0!==t.waiters&&(t.waiters=t.waiters.filter((function(t){return t!==e})))},t.notifyWaiters=function(){void 0!==t.waiters&&t.waiters.slice().forEach((function(t){return t()}))},t.prototype.releaseLock=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.releaseLock__private__(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.releaseLock__private__=function(e){return n(this,void 0,void 0,(function(){var n,o,a;return r(this,(function(r){switch(r.label){case 0:return n=window.localStorage,o=i+"-"+e,null===(a=n.getItem(o))?[2]:(a=JSON.parse(a)).id!==this.id?[3,2]:[4,wi.default().lock(a.iat)];case 1:r.sent(),this.acquiredIatSet.delete(a.iat),n.removeItem(o),wi.default().unlock(a.iat),t.notifyWaiters(),r.label=2;case 2:return[2]}}))}))},t.lockCorrector=function(){for(var e=Date.now()-5e3,n=window.localStorage,r=Object.keys(n),o=!1,a=0;a<r.length;a++){var s=r[a];if(s.includes(i)){var u=n.getItem(s);null!==u&&(void 0===(u=JSON.parse(u)).timeRefreshed&&u.timeAcquired<e||void 0!==u.timeRefreshed&&u.timeRefreshed<e)&&(n.removeItem(s),o=!0)}}o&&t.notifyWaiters()},t.waiters=void 0,t}();e.default=s}))),Ei={timeoutInSeconds:60},Si=["login_required","consent_required","interaction_required","account_selection_required","access_denied"],Ii={name:"auth0-spa-js",version:"1.17.0"},Ti=function(t){function n(e,r){var i=t.call(this,r)||this;return i.error=e,i.error_description=r,Object.setPrototypeOf(i,n.prototype),i}return e(n,t),n.fromPayload=function(t){return new n(t.error,t.error_description)},n}(Error),Oi=function(t){function n(e,r,i,o){void 0===o&&(o=null);var a=t.call(this,e,r)||this;return a.state=i,a.appState=o,Object.setPrototypeOf(a,n.prototype),a}return e(n,t),n}(Ti),Ci=function(t){function n(){var e=t.call(this,"timeout","Timeout")||this;return Object.setPrototypeOf(e,n.prototype),e}return e(n,t),n}(Ti),Ai=function(t){function n(e){var r=t.call(this)||this;return r.popup=e,Object.setPrototypeOf(r,n.prototype),r}return e(n,t),n}(Ci),ki=function(t){function n(e){var r=t.call(this,"cancelled","Popup closed")||this;return r.popup=e,Object.setPrototypeOf(r,n.prototype),r}return e(n,t),n}(Ti),xi=function(t){return new Promise((function(e,n){var r,i=setInterval((function(){t.popup&&t.popup.closed&&(clearInterval(i),clearTimeout(o),window.removeEventListener("message",r,!1),n(new ki(t.popup)))}),1e3),o=setTimeout((function(){clearInterval(i),n(new Ai(t.popup)),window.removeEventListener("message",r,!1)}),1e3*(t.timeoutInSeconds||60));r=function(a){if(a.data&&"authorization_response"===a.data.type){if(clearTimeout(o),clearInterval(i),window.removeEventListener("message",r,!1),t.popup.close(),a.data.response.error)return n(Ti.fromPayload(a.data.response));e(a.data.response)}},window.addEventListener("message",r)}))},Ni=function(){return window.crypto||window.msCrypto},Ri=function(){var t=Ni();return t.subtle||t.webkitSubtle},Di=function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",e="";return Array.from(Ni().getRandomValues(new Uint8Array(43))).forEach((function(n){return e+=t[n%t.length]})),e},Pi=function(t){return btoa(t)},Li=function(t){return Object.keys(t).filter((function(e){return void 0!==t[e]})).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},Fi=function(t){return i(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=Ri().digest({name:"SHA-256"},(new TextEncoder).encode(t)),window.msCrypto?[2,new Promise((function(t,n){e.oncomplete=function(e){t(e.target.result)},e.onerror=function(t){n(t.error)},e.onabort=function(){n("The digest operation was aborted")}}))]:[4,e];case 1:return[2,n.sent()]}}))}))},ji=function(t){return function(t){return decodeURIComponent(atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(t.replace(/_/g,"/").replace(/-/g,"+"))},Mi=function(t){var e=new Uint8Array(t);return function(t){var e={"+":"-","/":"_","=":""};return t.replace(/[+/=]/g,(function(t){return e[t]}))}(window.btoa(String.fromCharCode.apply(String,s([],a(Array.from(e))))))},Vi=function(t,e){return i(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return[4,(o=t,a=e,a=a||{},new Promise((function(t,e){var n=new XMLHttpRequest,r=[],i=[],s={},u=function(){return{ok:2==(n.status/100|0),statusText:n.statusText,status:n.status,url:n.responseURL,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(n.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([n.response]))},clone:u,headers:{keys:function(){return r},entries:function(){return i},get:function(t){return s[t.toLowerCase()]},has:function(t){return t.toLowerCase()in s}}}};for(var c in n.open(a.method||"get",o,!0),n.onload=function(){n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){r.push(e=e.toLowerCase()),i.push([e,n]),s[e]=s[e]?s[e]+","+n:n})),t(u())},n.onerror=e,n.withCredentials="include"==a.credentials,a.headers)n.setRequestHeader(c,a.headers[c]);n.send(a.body||null)})))];case 1:return n=i.sent(),r={ok:n.ok},[4,n.json()];case 2:return[2,(r.json=i.sent(),r)]}var o,a}))}))},Ui=function(t,e,n){return i(void 0,void 0,void 0,(function(){var r,i;return o(this,(function(o){return r=new AbortController,e.signal=r.signal,[2,Promise.race([Vi(t,e),new Promise((function(t,e){i=setTimeout((function(){r.abort(),e(new Error("Timeout when executing 'fetch'"))}),n)}))]).finally((function(){clearTimeout(i)}))]}))}))},Bi=function(t,e,n,r,a,s,u){return i(void 0,void 0,void 0,(function(){return o(this,(function(i){return[2,(o={auth:{audience:e,scope:n},timeout:a,fetchUrl:t,fetchOptions:r,useFormData:u},c=s,new Promise((function(t,e){var n=new MessageChannel;n.port1.onmessage=function(n){n.data.error?e(new Error(n.data.error)):t(n.data)},c.postMessage(o,[n.port2])})))];var o,c}))}))},Ki=function(t,e,n,r,a,s,u){return void 0===u&&(u=1e4),i(void 0,void 0,void 0,(function(){return o(this,(function(i){return a?[2,Bi(t,e,n,r,u,a,s)]:[2,Ui(t,r,u)]}))}))};function qi(t,e,n,a,s,u,c){return i(this,void 0,void 0,(function(){var i,l,f,h,d,p,y,v;return o(this,(function(o){switch(o.label){case 0:i=null,f=0,o.label=1;case 1:if(!(f<3))return[3,6];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,Ki(t,n,a,s,u,c,e)];case 3:return l=o.sent(),i=null,[3,6];case 4:return h=o.sent(),i=h,[3,5];case 5:return f++,[3,1];case 6:if(i)throw i.message=i.message||"Failed to fetch",i;if(d=l.json,p=d.error,y=d.error_description,v=r(d,["error","error_description"]),!l.ok)throw new Ti(p||"request_error",y||"HTTP error. Unable to fetch "+t);return[2,v]}}))}))}function Gi(t,e){var n=t.baseUrl,a=t.timeout,s=t.audience,u=t.scope,c=t.auth0Client,l=t.useFormData,f=r(t,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);return i(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=l?Li(f):JSON.stringify(f),[4,qi(n+"/oauth/token",a,s||"default",u,{method:"POST",body:t,headers:{"Content-Type":l?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(c||Ii))}},e,l)];case 1:return[2,r.sent()]}}))}))}var Wi=function(t){return Array.from(new Set(t))},zi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Wi(t.join(" ").trim().split(/\s+/)).join(" ")},Xi=function(){function t(t,e){void 0===e&&(e="@@auth0spajs@@"),this.prefix=e,this.client_id=t.client_id,this.scope=t.scope,this.audience=t.audience}return t.prototype.toKey=function(){return this.prefix+"::"+this.client_id+"::"+this.audience+"::"+this.scope},t.fromKey=function(e){var n=a(e.split("::"),4),r=n[0],i=n[1],o=n[2];return new t({client_id:i,scope:n[3],audience:o},r)},t.fromCacheEntry=function(e){return new t({scope:e.scope,audience:e.audience,client_id:e.client_id})},t}(),Hi=function(){function t(){}return t.prototype.set=function(t,e){localStorage.setItem(t,JSON.stringify(e))},t.prototype.get=function(t){var e=window.localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(t){return}},t.prototype.remove=function(t){localStorage.removeItem(t)},t.prototype.allKeys=function(){return Object.keys(window.localStorage).filter((function(t){return t.startsWith("@@auth0spajs@@")}))},t}(),Zi=function(){var t;this.enclosedCache=(t={},{set:function(e,n){t[e]=n},get:function(e){var n=t[e];if(n)return n},remove:function(e){delete t[e]},allKeys:function(){return Object.keys(t)}})},Yi=function(){function t(t,e){this.cache=t,this.clientId=e,this.manifestKey=this.createManifestKeyFrom(e)}return t.prototype.add=function(t){var e;return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return r=Set.bind,[4,this.cache.get(this.manifestKey)];case 1:return(n=new(r.apply(Set,[void 0,(null===(e=i.sent())||void 0===e?void 0:e.keys)||[]]))).add(t),[4,this.cache.set(this.manifestKey,{keys:s([],a(n))})];case 2:return i.sent(),[2]}}))}))},t.prototype.remove=function(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,this.cache.get(this.manifestKey)];case 1:return(e=r.sent())?((n=new Set(e.keys)).delete(t),n.size>0?[4,this.cache.set(this.manifestKey,{keys:s([],a(n))})]:[3,3]):[3,5];case 2:return[2,r.sent()];case 3:return[4,this.cache.remove(this.manifestKey)];case 4:return[2,r.sent()];case 5:return[2]}}))}))},t.prototype.get=function(){return this.cache.get(this.manifestKey)},t.prototype.clear=function(){return this.cache.remove(this.manifestKey)},t.prototype.createManifestKeyFrom=function(t){return"@@auth0spajs@@::"+t},t}(),Ji=function(){function t(t,e){this.cache=t,t.allKeys||(this.keyManifest=new Yi(this.cache,e))}return t.prototype.get=function(t,e){var n;return void 0===e&&(e=0),i(this,void 0,void 0,(function(){var r,i,a,s;return o(this,(function(o){switch(o.label){case 0:return[4,this.cache.get(t.toKey())];case 1:return(r=o.sent())?[3,4]:[4,this.getCacheKeys()];case 2:return(i=o.sent())?(a=this.matchExistingCacheKey(t,i),[4,this.cache.get(a)]):[2];case 3:r=o.sent(),o.label=4;case 4:return r?(s=Math.floor(Date.now()/1e3),r.expiresAt-e<s?r.body.refresh_token?(r.body={refresh_token:r.body.refresh_token},[4,this.cache.set(t.toKey(),r)]):[3,6]:[3,9]):[2];case 5:return o.sent(),[2,r.body];case 6:return[4,this.cache.remove(t.toKey())];case 7:return o.sent(),[4,null===(n=this.keyManifest)||void 0===n?void 0:n.remove(t.toKey())];case 8:return o.sent(),[2];case 9:return[2,r.body]}}))}))},t.prototype.set=function(t){var e;return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return n=new Xi({client_id:t.client_id,scope:t.scope,audience:t.audience}),r=this.wrapCacheEntry(t),[4,this.cache.set(n.toKey(),r)];case 1:return i.sent(),[4,null===(e=this.keyManifest)||void 0===e?void 0:e.add(n.toKey())];case 2:return i.sent(),[2]}}))}))},t.prototype.clear=function(){var t;return i(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){switch(r.label){case 0:return[4,this.getCacheKeys()];case 1:return(e=r.sent())?(e.forEach((function(t){return i(n,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.cache.remove(t)];case 1:return e.sent(),[2]}}))}))})),[4,null===(t=this.keyManifest)||void 0===t?void 0:t.clear()]):[2];case 2:return r.sent(),[2]}}))}))},t.prototype.clearSync=function(){var t=this,e=this.cache.allKeys();e&&e.forEach((function(e){t.cache.remove(e)}))},t.prototype.wrapCacheEntry=function(t){var e=Math.floor(Date.now()/1e3)+t.expires_in;return{body:t,expiresAt:Math.min(e,t.decodedToken.claims.exp)}},t.prototype.getCacheKeys=function(){var t;return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return this.keyManifest?[4,this.keyManifest.get()]:[3,2];case 1:return e=null===(t=n.sent())||void 0===t?void 0:t.keys,[3,4];case 2:return[4,this.cache.allKeys()];case 3:e=n.sent(),n.label=4;case 4:return[2,e]}}))}))},t.prototype.matchExistingCacheKey=function(t,e){return e.filter((function(e){var n=Xi.fromKey(e),r=new Set(n.scope&&n.scope.split(" ")),i=t.scope.split(" "),o=n.scope&&i.reduce((function(t,e){return t&&r.has(e)}),!0);return"@@auth0spajs@@"===n.prefix&&n.client_id===t.client_id&&n.audience===t.audience&&o}))[0]},t}(),Qi=function(){function t(t){this.storage=t,this.transaction=this.storage.get("a0.spajs.txs")}return t.prototype.create=function(t){this.transaction=t,this.storage.save("a0.spajs.txs",t,{daysUntilExpire:1})},t.prototype.get=function(){return this.transaction},t.prototype.remove=function(){delete this.transaction,this.storage.remove("a0.spajs.txs")},t}(),$i=function(t){return"number"==typeof t},to=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],eo=l((function(t,e){var n=u&&u.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function r(t,e){if(!e)return"";var n="; "+t;return!0===e?n:n+"="+e}function i(t,e,n){return encodeURIComponent(t).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(e).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(t){if("number"==typeof t.expires){var e=new Date;e.setMilliseconds(e.getMilliseconds()+864e5*t.expires),t.expires=e}return r("Expires",t.expires?t.expires.toUTCString():"")+r("Domain",t.domain)+r("Path",t.path)+r("Secure",t.secure)+r("SameSite",t.sameSite)}(n)}function o(t){for(var e={},n=t?t.split("; "):[],r=/(%[\dA-F]{2})+/gi,i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");'"'===a.charAt(0)&&(a=a.slice(1,-1));try{e[o[0].replace(r,decodeURIComponent)]=a.replace(r,decodeURIComponent)}catch(t){}}return e}function a(){return o(document.cookie)}function s(t,e,r){document.cookie=i(t,e,n({path:"/"},r))}e.__esModule=!0,e.encode=i,e.parse=o,e.getAll=a,e.get=function(t){return a()[t]},e.set=s,e.remove=function(t,e){s(t,"",n(n({},e),{expires:-1}))}}));c(eo),eo.encode,eo.parse,eo.getAll;var no=eo.get,ro=eo.set,io=eo.remove,oo={get:function(t){var e=no(t);if(void 0!==e)return JSON.parse(e)},save:function(t,e,n){var r={};"https:"===window.location.protocol&&(r={secure:!0,sameSite:"none"}),r.expires=n.daysUntilExpire,ro(t,JSON.stringify(e),r)},remove:function(t){io(t)}},ao={get:function(t){return oo.get(t)||oo.get("_legacy_"+t)},save:function(t,e,n){var r={};"https:"===window.location.protocol&&(r={secure:!0}),r.expires=n.daysUntilExpire,ro("_legacy_"+t,JSON.stringify(e),r),oo.save(t,e,n)},remove:function(t){oo.remove(t),oo.remove("_legacy_"+t)}},so={get:function(t){if("undefined"!=typeof sessionStorage){var e=sessionStorage.getItem(t);if(void 0!==e)return JSON.parse(e)}},save:function(t,e){sessionStorage.setItem(t,JSON.stringify(e))},remove:function(t){sessionStorage.removeItem(t)}};var uo,co=("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Ci8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uCgogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuCgogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgKICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULAogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NCiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUgogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovdmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHIsdD0xLG49YXJndW1lbnRzLmxlbmd0aDt0PG47dCsrKWZvcih2YXIgbyBpbiByPWFyZ3VtZW50c1t0XSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixvKSYmKGVbb109cltvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIHIoZSxyLHQsbil7cmV0dXJuIG5ldyh0fHwodD1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8sYSl7ZnVuY3Rpb24gcyhlKXt0cnl7dShuLm5leHQoZSkpfWNhdGNoKGUpe2EoZSl9fWZ1bmN0aW9uIGkoZSl7dHJ5e3Uobi50aHJvdyhlKSl9Y2F0Y2goZSl7YShlKX19ZnVuY3Rpb24gdShlKXt2YXIgcjtlLmRvbmU/byhlLnZhbHVlKToocj1lLnZhbHVlLHIgaW5zdGFuY2VvZiB0P3I6bmV3IHQoKGZ1bmN0aW9uKGUpe2Uocil9KSkpLnRoZW4ocyxpKX11KChuPW4uYXBwbHkoZSxyfHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gdChlLHIpe3ZhciB0LG4sbyxhLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmb1swXSl0aHJvdyBvWzFdO3JldHVybiBvWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIGE9e25leHQ6aSgwKSx0aHJvdzppKDEpLHJldHVybjppKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoYVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxhO2Z1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbihhKXtpZih0KXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO3M7KXRyeXtpZih0PTEsbiYmKG89MiZhWzBdP24ucmV0dXJuOmFbMF0/bi50aHJvd3x8KChvPW4ucmV0dXJuKSYmby5jYWxsKG4pLDApOm4ubmV4dCkmJiEobz1vLmNhbGwobixhWzFdKSkuZG9uZSlyZXR1cm4gbztzd2l0Y2gobj0wLG8mJihhPVsyJmFbMF0sby52YWx1ZV0pLGFbMF0pe2Nhc2UgMDpjYXNlIDE6bz1hO2JyZWFrO2Nhc2UgNDpyZXR1cm4gcy5sYWJlbCsrLHt2YWx1ZTphWzFdLGRvbmU6ITF9O2Nhc2UgNTpzLmxhYmVsKyssbj1hWzFdLGE9WzBdO2NvbnRpbnVlO2Nhc2UgNzphPXMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobz1zLnRyeXMsKG89by5sZW5ndGg+MCYmb1tvLmxlbmd0aC0xXSl8fDYhPT1hWzBdJiYyIT09YVswXSkpe3M9MDtjb250aW51ZX1pZigzPT09YVswXSYmKCFvfHxhWzFdPm9bMF0mJmFbMV08b1szXSkpe3MubGFiZWw9YVsxXTticmVha31pZig2PT09YVswXSYmcy5sYWJlbDxvWzFdKXtzLmxhYmVsPW9bMV0sbz1hO2JyZWFrfWlmKG8mJnMubGFiZWw8b1syXSl7cy5sYWJlbD1vWzJdLHMub3BzLnB1c2goYSk7YnJlYWt9b1syXSYmcy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlfWE9ci5jYWxsKGUscyl9Y2F0Y2goZSl7YT1bNixlXSxuPTB9ZmluYWxseXt0PW89MH1pZig1JmFbMF0pdGhyb3cgYVsxXTtyZXR1cm57dmFsdWU6YVswXT9hWzFdOnZvaWQgMCxkb25lOiEwfX0oW2EsaV0pfX19dmFyIG49e30sbz1mdW5jdGlvbihlLHIpe3JldHVybiBlKyJ8IityfTthZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24oYSl7dmFyIHM9YS5kYXRhLGk9cy50aW1lb3V0LHU9cy5hdXRoLGM9cy5mZXRjaFVybCxmPXMuZmV0Y2hPcHRpb25zLGw9cy51c2VGb3JtRGF0YSxoPWZ1bmN0aW9uKGUscil7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCF0KXJldHVybiBlO3ZhciBuLG8sYT10LmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09cnx8ci0tID4wKSYmIShuPWEubmV4dCgpKS5kb25lOylzLnB1c2gobi52YWx1ZSl9Y2F0Y2goZSl7bz17ZXJyb3I6ZX19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHQ9YS5yZXR1cm4pJiZ0LmNhbGwoYSl9ZmluYWxseXtpZihvKXRocm93IG8uZXJyb3J9fXJldHVybiBzfShhLnBvcnRzLDEpWzBdO3JldHVybiByKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLGEscyxwLHksYixkLHYsdyxnO3JldHVybiB0KHRoaXMsKGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cz0oYT11fHx7fSkuYXVkaWVuY2UscD1hLnNjb3BlLHQubGFiZWw9MTtjYXNlIDE6aWYodC50cnlzLnB1c2goWzEsNywsOF0pLCEoeT1sPyhrPWYuYm9keSxTPW5ldyBVUkxTZWFyY2hQYXJhbXMoayksXz17fSxTLmZvckVhY2goKGZ1bmN0aW9uKGUscil7X1tyXT1lfSkpLF8pOkpTT04ucGFyc2UoZi5ib2R5KSkucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09eS5ncmFudF90eXBlKXtpZighKGI9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gbltvKGUscildfShzLHApKSl0aHJvdyBuZXcgRXJyb3IoIlRoZSB3ZWIgd29ya2VyIGlzIG1pc3NpbmcgdGhlIHJlZnJlc2ggdG9rZW4iKTtmLmJvZHk9bD9uZXcgVVJMU2VhcmNoUGFyYW1zKGUoZSh7fSx5KSx7cmVmcmVzaF90b2tlbjpifSkpLnRvU3RyaW5nKCk6SlNPTi5zdHJpbmdpZnkoZShlKHt9LHkpLHtyZWZyZXNoX3Rva2VuOmJ9KSl9ZD12b2lkIDAsImZ1bmN0aW9uIj09dHlwZW9mIEFib3J0Q29udHJvbGxlciYmKGQ9bmV3IEFib3J0Q29udHJvbGxlcixmLnNpZ25hbD1kLnNpZ25hbCksdj12b2lkIDAsdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gdC50cnlzLnB1c2goWzIsNCwsNV0pLFs0LFByb21pc2UucmFjZShbKG09aSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHNldFRpbWVvdXQoZSxtKX0pKSksZmV0Y2goYyxlKHt9LGYpKV0pXTtjYXNlIDM6cmV0dXJuIHY9dC5zZW50KCksWzMsNV07Y2FzZSA0OnJldHVybiB3PXQuc2VudCgpLGgucG9zdE1lc3NhZ2Uoe2Vycm9yOncubWVzc2FnZX0pLFsyXTtjYXNlIDU6cmV0dXJuIHY/WzQsdi5qc29uKCldOihkJiZkLmFib3J0KCksaC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KSxbMl0pO2Nhc2UgNjpyZXR1cm4ocj10LnNlbnQoKSkucmVmcmVzaF90b2tlbj8oZnVuY3Rpb24oZSxyLHQpe25bbyhyLHQpXT1lfShyLnJlZnJlc2hfdG9rZW4scyxwKSxkZWxldGUgci5yZWZyZXNoX3Rva2VuKTpmdW5jdGlvbihlLHIpe2RlbGV0ZSBuW28oZSxyKV19KHMscCksaC5wb3N0TWVzc2FnZSh7b2s6di5vayxqc29uOnJ9KSxbMyw4XTtjYXNlIDc6cmV0dXJuIGc9dC5zZW50KCksaC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3JfZGVzY3JpcHRpb246Zy5tZXNzYWdlfX0pLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19dmFyIG0sayxTLF99KSl9KSl9KSl9KCk7Cgo=",null,!1,function(t){return uo=uo||function(t,e,n){var r=void 0===e?null:e,i=function(t,e){var n=atob(t);if(e){for(var r=new Uint8Array(n.length),i=0,o=n.length;i<o;++i)r[i]=n.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}(t,void 0!==n&&n),o=i.indexOf("\n",10)+1,a=i.substring(o)+(r?"//# sourceMappingURL="+r:""),s=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(s)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Ci8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uCgogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuCgogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgKICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULAogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NCiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUgogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovdmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHIsdD0xLG49YXJndW1lbnRzLmxlbmd0aDt0PG47dCsrKWZvcih2YXIgbyBpbiByPWFyZ3VtZW50c1t0XSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixvKSYmKGVbb109cltvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIHIoZSxyLHQsbil7cmV0dXJuIG5ldyh0fHwodD1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8sYSl7ZnVuY3Rpb24gcyhlKXt0cnl7dShuLm5leHQoZSkpfWNhdGNoKGUpe2EoZSl9fWZ1bmN0aW9uIGkoZSl7dHJ5e3Uobi50aHJvdyhlKSl9Y2F0Y2goZSl7YShlKX19ZnVuY3Rpb24gdShlKXt2YXIgcjtlLmRvbmU/byhlLnZhbHVlKToocj1lLnZhbHVlLHIgaW5zdGFuY2VvZiB0P3I6bmV3IHQoKGZ1bmN0aW9uKGUpe2Uocil9KSkpLnRoZW4ocyxpKX11KChuPW4uYXBwbHkoZSxyfHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gdChlLHIpe3ZhciB0LG4sbyxhLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmb1swXSl0aHJvdyBvWzFdO3JldHVybiBvWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIGE9e25leHQ6aSgwKSx0aHJvdzppKDEpLHJldHVybjppKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoYVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxhO2Z1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbihhKXtpZih0KXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO3M7KXRyeXtpZih0PTEsbiYmKG89MiZhWzBdP24ucmV0dXJuOmFbMF0/bi50aHJvd3x8KChvPW4ucmV0dXJuKSYmby5jYWxsKG4pLDApOm4ubmV4dCkmJiEobz1vLmNhbGwobixhWzFdKSkuZG9uZSlyZXR1cm4gbztzd2l0Y2gobj0wLG8mJihhPVsyJmFbMF0sby52YWx1ZV0pLGFbMF0pe2Nhc2UgMDpjYXNlIDE6bz1hO2JyZWFrO2Nhc2UgNDpyZXR1cm4gcy5sYWJlbCsrLHt2YWx1ZTphWzFdLGRvbmU6ITF9O2Nhc2UgNTpzLmxhYmVsKyssbj1hWzFdLGE9WzBdO2NvbnRpbnVlO2Nhc2UgNzphPXMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobz1zLnRyeXMsKG89by5sZW5ndGg+MCYmb1tvLmxlbmd0aC0xXSl8fDYhPT1hWzBdJiYyIT09YVswXSkpe3M9MDtjb250aW51ZX1pZigzPT09YVswXSYmKCFvfHxhWzFdPm9bMF0mJmFbMV08b1szXSkpe3MubGFiZWw9YVsxXTticmVha31pZig2PT09YVswXSYmcy5sYWJlbDxvWzFdKXtzLmxhYmVsPW9bMV0sbz1hO2JyZWFrfWlmKG8mJnMubGFiZWw8b1syXSl7cy5sYWJlbD1vWzJdLHMub3BzLnB1c2goYSk7YnJlYWt9b1syXSYmcy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlfWE9ci5jYWxsKGUscyl9Y2F0Y2goZSl7YT1bNixlXSxuPTB9ZmluYWxseXt0PW89MH1pZig1JmFbMF0pdGhyb3cgYVsxXTtyZXR1cm57dmFsdWU6YVswXT9hWzFdOnZvaWQgMCxkb25lOiEwfX0oW2EsaV0pfX19dmFyIG49e30sbz1mdW5jdGlvbihlLHIpe3JldHVybiBlKyJ8IityfTthZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24oYSl7dmFyIHM9YS5kYXRhLGk9cy50aW1lb3V0LHU9cy5hdXRoLGM9cy5mZXRjaFVybCxmPXMuZmV0Y2hPcHRpb25zLGw9cy51c2VGb3JtRGF0YSxoPWZ1bmN0aW9uKGUscil7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCF0KXJldHVybiBlO3ZhciBuLG8sYT10LmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09cnx8ci0tID4wKSYmIShuPWEubmV4dCgpKS5kb25lOylzLnB1c2gobi52YWx1ZSl9Y2F0Y2goZSl7bz17ZXJyb3I6ZX19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHQ9YS5yZXR1cm4pJiZ0LmNhbGwoYSl9ZmluYWxseXtpZihvKXRocm93IG8uZXJyb3J9fXJldHVybiBzfShhLnBvcnRzLDEpWzBdO3JldHVybiByKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLGEscyxwLHksYixkLHYsdyxnO3JldHVybiB0KHRoaXMsKGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cz0oYT11fHx7fSkuYXVkaWVuY2UscD1hLnNjb3BlLHQubGFiZWw9MTtjYXNlIDE6aWYodC50cnlzLnB1c2goWzEsNywsOF0pLCEoeT1sPyhrPWYuYm9keSxTPW5ldyBVUkxTZWFyY2hQYXJhbXMoayksXz17fSxTLmZvckVhY2goKGZ1bmN0aW9uKGUscil7X1tyXT1lfSkpLF8pOkpTT04ucGFyc2UoZi5ib2R5KSkucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09eS5ncmFudF90eXBlKXtpZighKGI9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gbltvKGUscildfShzLHApKSl0aHJvdyBuZXcgRXJyb3IoIlRoZSB3ZWIgd29ya2VyIGlzIG1pc3NpbmcgdGhlIHJlZnJlc2ggdG9rZW4iKTtmLmJvZHk9bD9uZXcgVVJMU2VhcmNoUGFyYW1zKGUoZSh7fSx5KSx7cmVmcmVzaF90b2tlbjpifSkpLnRvU3RyaW5nKCk6SlNPTi5zdHJpbmdpZnkoZShlKHt9LHkpLHtyZWZyZXNoX3Rva2VuOmJ9KSl9ZD12b2lkIDAsImZ1bmN0aW9uIj09dHlwZW9mIEFib3J0Q29udHJvbGxlciYmKGQ9bmV3IEFib3J0Q29udHJvbGxlcixmLnNpZ25hbD1kLnNpZ25hbCksdj12b2lkIDAsdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gdC50cnlzLnB1c2goWzIsNCwsNV0pLFs0LFByb21pc2UucmFjZShbKG09aSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHNldFRpbWVvdXQoZSxtKX0pKSksZmV0Y2goYyxlKHt9LGYpKV0pXTtjYXNlIDM6cmV0dXJuIHY9dC5zZW50KCksWzMsNV07Y2FzZSA0OnJldHVybiB3PXQuc2VudCgpLGgucG9zdE1lc3NhZ2Uoe2Vycm9yOncubWVzc2FnZX0pLFsyXTtjYXNlIDU6cmV0dXJuIHY/WzQsdi5qc29uKCldOihkJiZkLmFib3J0KCksaC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KSxbMl0pO2Nhc2UgNjpyZXR1cm4ocj10LnNlbnQoKSkucmVmcmVzaF90b2tlbj8oZnVuY3Rpb24oZSxyLHQpe25bbyhyLHQpXT1lfShyLnJlZnJlc2hfdG9rZW4scyxwKSxkZWxldGUgci5yZWZyZXNoX3Rva2VuKTpmdW5jdGlvbihlLHIpe2RlbGV0ZSBuW28oZSxyKV19KHMscCksaC5wb3N0TWVzc2FnZSh7b2s6di5vayxqc29uOnJ9KSxbMyw4XTtjYXNlIDc6cmV0dXJuIGc9dC5zZW50KCksaC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3JfZGVzY3JpcHRpb246Zy5tZXNzYWdlfX0pLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19dmFyIG0sayxTLF99KSl9KSl9KSl9KCk7Cgo=",null,false),new Worker(uo,t)}),lo={},fo=new _i,ho={memory:function(){return(new Zi).enclosedCache},localstorage:function(){return new Hi}},po=function(t){return ho[t]},yo=function(){function t(t){var e,n,i;if(this.options=t,"undefined"!=typeof window&&function(){if(!Ni())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(void 0===Ri())throw new Error("\n      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/master/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.\n    ")}(),t.cache&&t.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),t.cache)i=t.cache;else{if(this.cacheLocation=t.cacheLocation||"memory",!po(this.cacheLocation))throw new Error('Invalid cache location "'+this.cacheLocation+'"');i=po(this.cacheLocation)()}this.cookieStorage=!1===t.legacySameSiteCookie?oo:ao,this.sessionCheckExpiryDays=t.sessionCheckExpiryDays||1;var o,a=t.useCookiesForTransactions?this.cookieStorage:so;this.scope=this.options.scope,this.transactionManager=new Qi(a),this.cacheManager=new Ji(i,this.options.client_id),this.domainUrl=(o=this.options.domain,/^https?:\/\//.test(o)?o:"https://"+o),this.tokenIssuer=function(t,e){return t?t.startsWith("https://")?t:"https://"+t+"/":e+"/"}(this.options.issuer,this.domainUrl),this.defaultScope=zi("openid",void 0!==(null===(n=null===(e=this.options)||void 0===e?void 0:e.advancedOptions)||void 0===n?void 0:n.defaultScope)?this.options.advancedOptions.defaultScope:"openid profile email"),this.options.useRefreshTokens&&(this.scope=zi(this.scope,"offline_access")),"undefined"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&"memory"===this.cacheLocation&&!/Trident.*rv:11\.0/.test(navigator.userAgent)&&(this.worker=new co),this.customOptions=function(t){return t.advancedOptions,t.audience,t.auth0Client,t.authorizeTimeoutInSeconds,t.cacheLocation,t.client_id,t.domain,t.issuer,t.leeway,t.max_age,t.redirect_uri,t.scope,t.useRefreshTokens,t.useCookiesForTransactions,t.useFormData,r(t,["advancedOptions","audience","auth0Client","authorizeTimeoutInSeconds","cacheLocation","client_id","domain","issuer","leeway","max_age","redirect_uri","scope","useRefreshTokens","useCookiesForTransactions","useFormData"])}(t)}return t.prototype._url=function(t){var e=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||Ii)));return""+this.domainUrl+t+"&auth0Client="+e},t.prototype._getParams=function(t,e,i,o,a){var s=this.options;s.domain,s.leeway,s.useRefreshTokens,s.useCookiesForTransactions,s.useFormData,s.auth0Client,s.cacheLocation,s.advancedOptions;var u=r(s,["domain","leeway","useRefreshTokens","useCookiesForTransactions","useFormData","auth0Client","cacheLocation","advancedOptions"]);return n(n(n({},u),t),{scope:zi(this.defaultScope,this.scope,t.scope),response_type:"code",response_mode:"query",state:e,nonce:i,redirect_uri:a||this.options.redirect_uri,code_challenge:o,code_challenge_method:"S256"})},t.prototype._authorizeUrl=function(t){return this._url("/authorize?"+Li(t))},t.prototype._verifyIdToken=function(t,e,n){return function(t){if(!t.id_token)throw new Error("ID token is required but missing");var e=function(t){var e=t.split("."),n=a(e,3),r=n[0],i=n[1],o=n[2];if(3!==e.length||!r||!i||!o)throw new Error("ID token could not be decoded");var s=JSON.parse(ji(i)),u={__raw:t},c={};return Object.keys(s).forEach((function(t){u[t]=s[t],to.includes(t)||(c[t]=s[t])})),{encoded:{header:r,payload:i,signature:o},header:JSON.parse(ji(r)),claims:u,user:c}}(t.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==t.iss)throw new Error('Issuer (iss) claim mismatch in the ID token; expected "'+t.iss+'", found "'+e.claims.iss+'"');if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if("RS256"!==e.header.alg)throw new Error('Signature algorithm of "'+e.header.alg+'" is not supported. Expected the ID token to be signed with "RS256".');if(!e.claims.aud||"string"!=typeof e.claims.aud&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(t.aud))throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+t.aud+'" but was not one of "'+e.claims.aud.join(", ")+'"');if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==t.aud)throw new Error('Authorized Party (azp) claim mismatch in the ID token; expected "'+t.aud+'", found "'+e.claims.azp+'"')}}else if(e.claims.aud!==t.aud)throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+t.aud+'" but found "'+e.claims.aud+'"');if(t.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==t.nonce)throw new Error('Nonce (nonce) claim mismatch in the ID token; expected "'+t.nonce+'", found "'+e.claims.nonce+'"')}if(t.max_age&&!$i(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(!$i(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!$i(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");var n=t.leeway||60,r=new Date(Date.now()),i=new Date(0),o=new Date(0),s=new Date(0);if(s.setUTCSeconds(parseInt(e.claims.auth_time)+t.max_age+n),i.setUTCSeconds(e.claims.exp+n),o.setUTCSeconds(e.claims.nbf-n),r>i)throw new Error("Expiration Time (exp) claim error in the ID token; current time ("+r+") is after expiration time ("+i+")");if($i(e.claims.nbf)&&r<o)throw new Error("Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Currrent time ("+r+") is before "+o);if($i(e.claims.auth_time)&&r>s)throw new Error("Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Currrent time ("+r+") is after last auth at "+s);if(t.organizationId){if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(t.organizationId!==e.claims.org_id)throw new Error('Organization ID (org_id) claim mismatch in the ID token; expected "'+t.organizationId+'", found "'+e.claims.org_id+'"')}return e}({iss:this.tokenIssuer,aud:this.options.client_id,id_token:t,nonce:e,organizationId:n,leeway:this.options.leeway,max_age:this._parseNumber(this.options.max_age)})},t.prototype._parseNumber=function(t){return"string"!=typeof t?t:parseInt(t,10)||void 0},t.prototype.buildAuthorizeUrl=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,i,a,s,u,c,l,f,h,d,p,y;return o(this,(function(o){switch(o.label){case 0:return e=t.redirect_uri,i=t.appState,a=r(t,["redirect_uri","appState"]),s=Pi(Di()),u=Pi(Di()),c=Di(),[4,Fi(c)];case 1:return l=o.sent(),f=Mi(l),h=t.fragment?"#"+t.fragment:"",d=this._getParams(a,s,u,f,e),p=this._authorizeUrl(d),y=t.organization||this.options.organization,this.transactionManager.create(n({nonce:u,code_verifier:c,appState:i,scope:d.scope,audience:d.audience||"default",redirect_uri:d.redirect_uri},y&&{organizationId:y})),[2,p+h]}}))}))},t.prototype.loginWithPopup=function(t,e){return i(this,void 0,void 0,(function(){var i,a,s,u,c,l,f,h,d,p,y,v,g;return o(this,(function(o){switch(o.label){case 0:return t=t||{},(e=e||{}).popup||(e.popup=function(t){var e=window.screenX+(window.innerWidth-400)/2,n=window.screenY+(window.innerHeight-600)/2;return window.open("","auth0:authorize:popup","left="+e+",top="+n+",width=400,height=600,resizable,scrollbars=yes,status=1")}()),i=r(t,[]),a=Pi(Di()),s=Pi(Di()),u=Di(),[4,Fi(u)];case 1:return c=o.sent(),l=Mi(c),f=this._getParams(i,a,s,l,this.options.redirect_uri||window.location.origin),h=this._authorizeUrl(n(n({},f),{response_mode:"web_message"})),e.popup.location.href=h,[4,xi(n(n({},e),{timeoutInSeconds:e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}))];case 2:if(d=o.sent(),a!==d.state)throw new Error("Invalid state");return[4,Gi({audience:f.audience,scope:f.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:u,code:d.code,grant_type:"authorization_code",redirect_uri:f.redirect_uri,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData},this.worker)];case 3:return p=o.sent(),y=t.organization||this.options.organization,v=this._verifyIdToken(p.id_token,s,y),g=n(n({},p),{decodedToken:v,scope:f.scope,audience:f.audience||"default",client_id:this.options.client_id}),[4,this.cacheManager.set(g)];case 4:return o.sent(),this.cookieStorage.save("auth0.is.authenticated",!0,{daysUntilExpire:this.sessionCheckExpiryDays}),[2]}}))}))},t.prototype.getUser=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(i){switch(i.label){case 0:return e=t.audience||this.options.audience||"default",n=zi(this.defaultScope,this.scope,t.scope),[4,this.cacheManager.get(new Xi({client_id:this.options.client_id,audience:e,scope:n}))];case 1:return[2,(r=i.sent())&&r.decodedToken&&r.decodedToken.user]}}))}))},t.prototype.getIdTokenClaims=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(i){switch(i.label){case 0:return e=t.audience||this.options.audience||"default",n=zi(this.defaultScope,this.scope,t.scope),[4,this.cacheManager.get(new Xi({client_id:this.options.client_id,audience:e,scope:n}))];case 1:return[2,(r=i.sent())&&r.decodedToken&&r.decodedToken.claims]}}))}))},t.prototype.loginWithRedirect=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,n,i;return o(this,(function(o){switch(o.label){case 0:return e=t.redirectMethod,n=r(t,["redirectMethod"]),[4,this.buildAuthorizeUrl(n)];case 1:return i=o.sent(),window.location[e||"assign"](i),[2]}}))}))},t.prototype.handleRedirectCallback=function(t){return void 0===t&&(t=window.location.href),i(this,void 0,void 0,(function(){var e,r,i,s,u,c,l,f,h,d,p;return o(this,(function(o){switch(o.label){case 0:if(0===(e=t.split("?").slice(1)).length)throw new Error("There are no query params available for parsing.");if(r=function(t){t.indexOf("#")>-1&&(t=t.substr(0,t.indexOf("#")));var e=t.split("&"),n={};return e.forEach((function(t){var e=a(t.split("="),2),r=e[0],i=e[1];n[r]=decodeURIComponent(i)})),n.expires_in&&(n.expires_in=parseInt(n.expires_in)),n}(e.join("")),i=r.state,s=r.code,u=r.error,c=r.error_description,!(l=this.transactionManager.get())||!l.code_verifier)throw new Error("Invalid state");if(this.transactionManager.remove(),u)throw new Oi(u,c,i,l.appState);return f={audience:l.audience,scope:l.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:l.code_verifier,grant_type:"authorization_code",code:s,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData},void 0!==l.redirect_uri&&(f.redirect_uri=l.redirect_uri),[4,Gi(f,this.worker)];case 1:return h=o.sent(),d=this._verifyIdToken(h.id_token,l.nonce,l.organizationId),p=n(n({},h),{decodedToken:d,audience:l.audience,scope:l.scope,client_id:this.options.client_id}),[4,this.cacheManager.set(p)];case 2:return o.sent(),this.cookieStorage.save("auth0.is.authenticated",!0,{daysUntilExpire:this.sessionCheckExpiryDays}),[2,{appState:l.appState}]}}))}))},t.prototype.checkSession=function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:if(!this.cookieStorage.get("auth0.is.authenticated"))return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getTokenSilently(t)];case 2:return n.sent(),[3,4];case 3:if(e=n.sent(),!Si.includes(e.error))throw e;return[3,4];case 4:return[2]}}))}))},t.prototype.getTokenSilently=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,i,a,s=this;return o(this,(function(o){return e=n(n({audience:this.options.audience,ignoreCache:!1},t),{scope:zi(this.defaultScope,this.scope,t.scope)}),i=e.ignoreCache,a=r(e,["ignoreCache"]),[2,(u=function(){return s._getTokenSilently(n({ignoreCache:i},a))},c=this.options.client_id+"::"+a.audience+"::"+a.scope,l=lo[c],l||(l=u().finally((function(){delete lo[c],l=null})),lo[c]=l),l)];var u,c,l}))}))},t.prototype._getTokenSilently=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,a,s,u,c,l,f=this;return o(this,(function(h){switch(h.label){case 0:return e=t.ignoreCache,a=r(t,["ignoreCache"]),s=function(){return i(f,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return[4,this.cacheManager.get(new Xi({scope:a.scope,audience:a.audience||"default",client_id:this.options.client_id}),60)];case 1:return[2,(t=e.sent())&&t.access_token]}}))}))},e?[3,2]:[4,s()];case 1:if(u=h.sent())return[2,u];h.label=2;case 2:return[4,(d=function(){return fo.acquireLock("auth0.lock.getTokenSilently",5e3)},p=10,void 0===p&&(p=3),i(void 0,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<p?[4,d()]:[3,4];case 2:if(e.sent())return[2,!0];e.label=3;case 3:return t++,[3,1];case 4:return[2,!1]}}))})))];case 3:if(!h.sent())return[3,15];h.label=4;case 4:return h.trys.push([4,,12,14]),e?[3,6]:[4,s()];case 5:if(u=h.sent())return[2,u];h.label=6;case 6:return this.options.useRefreshTokens?[4,this._getTokenUsingRefreshToken(a)]:[3,8];case 7:return l=h.sent(),[3,10];case 8:return[4,this._getTokenFromIFrame(a)];case 9:l=h.sent(),h.label=10;case 10:return c=l,[4,this.cacheManager.set(n({client_id:this.options.client_id},c))];case 11:return h.sent(),this.cookieStorage.save("auth0.is.authenticated",!0,{daysUntilExpire:this.sessionCheckExpiryDays}),[2,c.access_token];case 12:return[4,fo.releaseLock("auth0.lock.getTokenSilently")];case 13:return h.sent(),[7];case 14:return[3,16];case 15:throw new Ci;case 16:return[2]}var d,p}))}))},t.prototype.getTokenWithPopup=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),i(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return t.audience=t.audience||this.options.audience,t.scope=zi(this.defaultScope,this.scope,t.scope),e=n(n({},Ei),e),[4,this.loginWithPopup(t,e)];case 1:return r.sent(),[4,this.cacheManager.get(new Xi({scope:t.scope,audience:t.audience||"default",client_id:this.options.client_id}))];case 2:return[2,r.sent().access_token]}}))}))},t.prototype.isAuthenticated=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.getUser()];case 1:return[2,!!t.sent()]}}))}))},t.prototype.buildLogoutUrl=function(t){void 0===t&&(t={}),null!==t.client_id?t.client_id=t.client_id||this.options.client_id:delete t.client_id;var e=t.federated,n=r(t,["federated"]),i=e?"&federated":"";return this._url("/v2/logout?"+Li(n))+i},t.prototype.logout=function(t){var e=this;void 0===t&&(t={});var n=t.localOnly,i=r(t,["localOnly"]);if(n&&i.federated)throw new Error("It is invalid to set both the `federated` and `localOnly` options to `true`");var o=function(){if(e.cookieStorage.remove("auth0.is.authenticated"),!n){var t=e.buildLogoutUrl(i);window.location.assign(t)}};if(this.options.cache)return this.cacheManager.clear().then((function(){return o()}));this.cacheManager.clearSync(),o()},t.prototype._getTokenFromIFrame=function(t){return i(this,void 0,void 0,(function(){var e,i,a,s,u,c,l,f,h,d,p,y,v,g,m;return o(this,(function(o){switch(o.label){case 0:return e=Pi(Di()),i=Pi(Di()),a=Di(),[4,Fi(a)];case 1:s=o.sent(),u=Mi(s),c=this._getParams(t,e,i,u,t.redirect_uri||this.options.redirect_uri||window.location.origin),l=this._authorizeUrl(n(n({},c),{prompt:"none",response_mode:"web_message"})),f=t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,o.label=2;case 2:return o.trys.push([2,5,,6]),[4,(b=l,w=this.domainUrl,_=f,void 0===_&&(_=60),new Promise((function(t,e){var n=window.document.createElement("iframe");n.setAttribute("width","0"),n.setAttribute("height","0"),n.style.display="none";var r,i=function(){window.document.body.contains(n)&&(window.document.body.removeChild(n),window.removeEventListener("message",r,!1))},o=setTimeout((function(){e(new Ci),i()}),1e3*_);r=function(n){if(n.origin==w&&n.data&&"authorization_response"===n.data.type){var a=n.source;a&&a.close(),n.data.response.error?e(Ti.fromPayload(n.data.response)):t(n.data.response),clearTimeout(o),window.removeEventListener("message",r,!1),setTimeout(i,2e3)}},window.addEventListener("message",r,!1),window.document.body.appendChild(n),n.setAttribute("src",b)})))];case 3:if(h=o.sent(),e!==h.state)throw new Error("Invalid state");return d=t.scope,p=t.audience,y=r(t,["scope","audience","redirect_uri","ignoreCache","timeoutInSeconds"]),[4,Gi(n(n(n({},this.customOptions),y),{scope:d,audience:p,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:a,code:h.code,grant_type:"authorization_code",redirect_uri:c.redirect_uri,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData}),this.worker)];case 4:return v=o.sent(),g=this._verifyIdToken(v.id_token,i),[2,n(n({},v),{decodedToken:g,scope:c.scope,audience:c.audience||"default"})];case 5:throw"login_required"===(m=o.sent()).error&&this.logout({localOnly:!0}),m;case 6:return[2]}var b,w,_}))}))},t.prototype._getTokenUsingRefreshToken=function(t){return i(this,void 0,void 0,(function(){var e,i,a,s,u,c,l,f,h;return o(this,(function(o){switch(o.label){case 0:return t.scope=zi(this.defaultScope,this.options.scope,t.scope),[4,this.cacheManager.get(new Xi({scope:t.scope,audience:t.audience||"default",client_id:this.options.client_id}))];case 1:return(e=o.sent())&&e.refresh_token||this.worker?[3,3]:[4,this._getTokenFromIFrame(t)];case 2:return[2,o.sent()];case 3:i=t.redirect_uri||this.options.redirect_uri||window.location.origin,s=t.scope,u=t.audience,c=r(t,["scope","audience","ignoreCache","timeoutInSeconds"]),l="number"==typeof t.timeoutInSeconds?1e3*t.timeoutInSeconds:null,o.label=4;case 4:return o.trys.push([4,6,,9]),[4,Gi(n(n(n(n(n({},this.customOptions),c),{audience:u,scope:s,baseUrl:this.domainUrl,client_id:this.options.client_id,grant_type:"refresh_token",refresh_token:e&&e.refresh_token,redirect_uri:i}),l&&{timeout:l}),{auth0Client:this.options.auth0Client,useFormData:this.options.useFormData}),this.worker)];case 5:return a=o.sent(),[3,9];case 6:return"The web worker is missing the refresh token"===(f=o.sent()).message||f.message&&f.message.indexOf("invalid refresh token")>-1?[4,this._getTokenFromIFrame(t)]:[3,8];case 7:return[2,o.sent()];case 8:throw f;case 9:return h=this._verifyIdToken(a.id_token),[2,n(n({},a),{decodedToken:h,scope:t.scope,audience:t.audience||"default"})]}}))}))},t}();let vo,go=window.location.origin+(window.location.href.includes("github.io")?"/tag-generator/":"");async function mo(){vo||await wo(),vo?.loginWithRedirect({redirect_uri:go})}async function bo(){vo||await wo(),vo?.logout({returnTo:go})}async function wo(){try{vo=await function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,(e=new yo(t)).checkSession()];case 1:return n.sent(),[2,e]}}))}))}({domain:"syncretic.eu.auth0.com",client_id:"T7k8XmfXePV5zkd8mPOmgB3nv5nyr66I",redirectUri:go});const t=window.location.search;t.includes("code=")&&t.includes("state=")&&(await vo.handleRedirectCallback(),window.history.replaceState({},document.title,window.location.pathname));let e=await vo.isAuthenticated(),n=await(vo?.getUser()),r=e&&n.given_name&&n.family_name?n.given_name+" "+n.family_name:null;return e?{name:r||n.name||n.nickname||n.given_name||n.user_id,id:n.user_id||n.sub}:null}catch(t){return console.error(t),null}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var _o=function(t,e){return(_o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Eo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}_o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var So=function(){return(So=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Io(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function To(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Oo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Co(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Ao(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ko=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},xo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,f=(3&o)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ko(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},No=function(t){return function(t){var e=ko(t);return xo.encodeByteArray(e,!0)}(t).replace(/\./g,"")};function Ro(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Ro(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Do=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Po(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Lo(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Fo=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,jo.prototype.create),o}return Eo(e,t),e}(Error),jo=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?Mo(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new Fo(i,s,r);return u},t}();function Mo(t,e){return t.replace(Vo,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Vo=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Uo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Bo(t,e){var n=new Ko(t,e);return n.subscribe.bind(n)}var Ko=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=qo),void 0===r.error&&(r.error=qo),void 0===r.complete&&(r.complete=qo);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function qo(){}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Go(t){return t&&t._delegate?t._delegate:t}var Wo=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),zo="[DEFAULT]",Xo=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Do;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService({instanceIdentifier:zo})}catch(t){}try{for(var r=Oo(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Co(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=zo),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Io(this,void 0,void 0,(function(){var t;return To(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Ao(Ao([],Co(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Co(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=zo),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=zo),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var s=Oo(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var c=Co(u.value,2),l=c[0],f=c[1];o===this.normalizeInstanceIdentifier(l)&&f.resolve(a)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=Oo(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===zo?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=zo),this.component?this.component.multipleInstances?t:zo:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ho,Zo=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Xo(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Yo(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Jo,Qo=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Jo||(Jo={}));var $o,ta={debug:Jo.DEBUG,verbose:Jo.VERBOSE,info:Jo.INFO,warn:Jo.WARN,error:Jo.ERROR,silent:Jo.SILENT},ea=Jo.INFO,na=((Ho={})[Jo.DEBUG]="log",Ho[Jo.VERBOSE]="log",Ho[Jo.INFO]="info",Ho[Jo.WARN]="warn",Ho[Jo.ERROR]="error",Ho),ra=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=na[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Yo(["["+i+"]  "+t.name+":"],n))}},ia=function(){function t(t){this.name=t,this._logLevel=ea,this._logHandler=ra,this._userLogHandler=null,Qo.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Jo))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ta[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Yo([this,Jo.DEBUG],t)),this._logHandler.apply(this,Yo([this,Jo.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Yo([this,Jo.VERBOSE],t)),this._logHandler.apply(this,Yo([this,Jo.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Yo([this,Jo.INFO],t)),this._logHandler.apply(this,Yo([this,Jo.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Yo([this,Jo.WARN],t)),this._logHandler.apply(this,Yo([this,Jo.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Yo([this,Jo.ERROR],t)),this._logHandler.apply(this,Yo([this,Jo.ERROR],t))},t}();function oa(t){Qo.forEach((function(e){e.setLogLevel(t)}))}var aa,sa=(($o={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",$o["bad-app-name"]="Illegal App name: '{$appName}",$o["duplicate-app"]="Firebase App named '{$appName}' already exists",$o["app-deleted"]="Firebase App named '{$appName}' already deleted",$o["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",$o["invalid-log-argument"]="First argument to `onLog` must be null or a function.",$o),ua=new jo("app","Firebase",sa),ca="@firebase/app",la="[DEFAULT]",fa=((aa={})[ca]="fire-core",aa["@firebase/analytics"]="fire-analytics",aa["@firebase/app-check"]="fire-app-check",aa["@firebase/auth"]="fire-auth",aa["@firebase/database"]="fire-rtdb",aa["@firebase/functions"]="fire-fn",aa["@firebase/installations"]="fire-iid",aa["@firebase/messaging"]="fire-fcm",aa["@firebase/performance"]="fire-perf",aa["@firebase/remote-config"]="fire-rc",aa["@firebase/storage"]="fire-gcs",aa["@firebase/firestore"]="fire-fst",aa["fire-js"]="fire-js",aa["firebase-wrapper"]="fire-js-all",aa),ha=new ia("@firebase/app"),da=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Ro(void 0,t),this.container=new Zo(e.name),this._addComponent(new Wo("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=la),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=la),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){ha.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ua.create("app-deleted",{appName:this.name_})},t}();da.prototype.name&&da.prototype.options||da.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function pa(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=la);var a=o.name;if("string"!=typeof a||!a)throw ua.create("bad-app-name",{appName:String(a)});if(Uo(e,a))throw ua.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=fa[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ha.warn(u.join(" "))}o(new Wo(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:oa,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw ua.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=ta[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Jo[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=Qo;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Uo(e,t=t||la))throw ua.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return ha.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw ua.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Ro(s,o.serviceProps),r[a]=s,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ya=function t(){var e=pa(da);return e.INTERNAL=So(So({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Ro(e,t)},createSubscribe:Bo,ErrorFactory:jo,deepExtend:Ro}),e}(),va=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ha.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ga=self.firebase.SDK_VERSION;ga&&ga.indexOf("LITE")>=0&&ha.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ma=ya.initializeApp;ya.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Lo()&&ha.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ma.apply(void 0,t)};var ba=ya;!function(t,e){t.INTERNAL.registerComponent(new Wo("platform-logger",(function(t){return new va(t)}),"PRIVATE")),t.registerVersion(ca,"0.6.30",e),t.registerVersion("fire-js","")}(ba);var wa="8.10.0";
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
ba.registerVersion("firebase",wa,"app"),ba.SDK_VERSION=wa;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var _a=function(t,e){return(_a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ea(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Sa,Ia="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ta=Ta||{},Oa=Ia||self;function Ca(){}function Aa(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ka(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var xa="closure_uid_"+(1e9*Math.random()>>>0),Na=0;function Ra(t,e,n){return t.call.apply(t.bind,arguments)}function Da(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Pa(t,e,n){return(Pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ra:Da).apply(null,arguments)}function La(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Fa(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ja(){this.s=this.s,this.o=this.o}var Ma={};ja.prototype.s=!1,ja.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,xa)&&t[xa]||(t[xa]=++Na)}(this);delete Ma[t]}},ja.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Va=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ua=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ba(t){return Array.prototype.concat.apply([],arguments)}function Ka(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function qa(t){return/^[\s\xa0]*$/.test(t)}var Ga,Wa=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function za(t,e){return-1!=t.indexOf(e)}function Xa(t,e){return t<e?-1:t>e?1:0}t:{var Ha=Oa.navigator;if(Ha){var Za=Ha.userAgent;if(Za){Ga=Za;break t}}Ga=""}function Ya(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ja(t){var e={};for(var n in t)e[n]=t[n];return e}var Qa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $a(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Qa.length;o++)n=Qa[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ts(t){return ts[" "](t),t}ts[" "]=Ca;var es,ns=za(Ga,"Opera"),rs=za(Ga,"Trident")||za(Ga,"MSIE"),is=za(Ga,"Edge"),os=is||rs,as=za(Ga,"Gecko")&&!(za(Ga.toLowerCase(),"webkit")&&!za(Ga,"Edge"))&&!(za(Ga,"Trident")||za(Ga,"MSIE"))&&!za(Ga,"Edge"),ss=za(Ga.toLowerCase(),"webkit")&&!za(Ga,"Edge");function us(){var t=Oa.document;return t?t.documentMode:void 0}t:{var cs="",ls=function(){var t=Ga;return as?/rv:([^\);]+)(\)|;)/.exec(t):is?/Edge\/([\d\.]+)/.exec(t):rs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):ss?/WebKit\/(\S+)/.exec(t):ns?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ls&&(cs=ls?ls[1]:""),rs){var fs=us();if(null!=fs&&fs>parseFloat(cs)){es=String(fs);break t}}es=cs}var hs,ds={};function ps(){return function(t){var e=ds;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=Wa(String(es)).split("."),n=Wa("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=Xa(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||Xa(0==o[2].length,0==a[2].length)||Xa(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(Oa.document&&rs){var ys=us();hs=ys||(parseInt(es,10)||void 0)}else hs=void 0;var vs=hs,gs=function(){if(!Oa.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Oa.addEventListener("test",Ca,e),Oa.removeEventListener("test",Ca,e)}catch(t){}return t}();function ms(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function bs(t,e){if(ms.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(as){t:{try{ts(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ws[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&bs.Z.h.call(this)}}ms.prototype.h=function(){this.defaultPrevented=!0},Fa(bs,ms);var ws={2:"touch",3:"pen",4:"mouse"};bs.prototype.h=function(){bs.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var _s="closure_listenable_"+(1e6*Math.random()|0),Es=0;function Ss(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Es,this.ca=this.fa=!1}function Is(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ts(t){this.src=t,this.g={},this.h=0}function Os(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Va(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Is(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Cs(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Ts.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=Cs(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new Ss(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var As="closure_lm_"+(1e6*Math.random()|0),ks={};function xs(t,e,n,r,i){if(r&&r.once)return Rs(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)xs(t,e[o],n,r,i);return null}return n=Vs(n),t&&t[_s]?t.N(e,n,ka(r)?!!r.capture:!!r,i):Ns(t,e,n,!1,r,i)}function Ns(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=ka(i)?!!i.capture:!!i,s=js(t);if(s||(t[As]=s=new Ts(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Fs;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)gs||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ls(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Rs(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Rs(t,e[o],n,r,i);return null}return n=Vs(n),t&&t[_s]?t.O(e,n,ka(r)?!!r.capture:!!r,i):Ns(t,e,n,!0,r,i)}function Ds(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ds(t,e[o],n,r,i);else r=ka(r)?!!r.capture:!!r,n=Vs(n),t&&t[_s]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=Cs(o=t.g[e],n,r,i))&&(Is(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=js(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Cs(e,n,r,i)),(n=-1<t?e[t]:null)&&Ps(n))}function Ps(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[_s])Os(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ls(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=js(e))?(Os(n,t),0==n.h&&(n.src=null,e[As]=null)):Is(t)}}}function Ls(t){return t in ks?ks[t]:ks[t]="on"+t}function Fs(t,e){if(t.ca)t=!0;else{e=new bs(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Ps(t),t=n.call(r,e)}return t}function js(t){return(t=t[As])instanceof Ts?t:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vs(t){return"function"==typeof t?t:(t[Ms]||(t[Ms]=function(e){return t.handleEvent(e)}),t[Ms])}function Us(){ja.call(this),this.i=new Ts(this),this.P=this,this.I=null}function Bs(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new ms(e,t);else if(e instanceof ms)e.target=e.target||t;else{var i=e;$a(e=new ms(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=Ks(a,r,!0,e)&&i}if(i=Ks(a=e.g=t,r,!0,e)&&i,i=Ks(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ks(a=e.g=n[o],r,!1,e)&&i}function Ks(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&Os(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Fa(Us,ja),Us.prototype[_s]=!0,Us.prototype.removeEventListener=function(t,e,n,r){Ds(this,t,e,n,r)},Us.prototype.M=function(){if(Us.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Is(n[r]);delete e.g[t],e.h--}}this.I=null},Us.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Us.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var qs=Oa.JSON.stringify;function Gs(){var t=Qs,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ws,zs=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Xs.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Xs=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Hs}),(function(t){return t.reset()})),Hs=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Zs(t){Oa.setTimeout((function(){throw t}),0)}function Ys(t,e){Ws||function(){var t=Oa.Promise.resolve(void 0);Ws=function(){t.then($s)}}(),Js||(Ws(),Js=!0),Qs.add(t,e)}var Js=!1,Qs=new zs;function $s(){for(var t;t=Gs();){try{t.h.call(t.g)}catch(t){Zs(t)}var e=Xs;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Js=!1}function tu(t,e){Us.call(this),this.h=t||1,this.g=e||Oa,this.j=Pa(this.kb,this),this.l=Date.now()}function eu(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function nu(t,e,n){if("function"==typeof t)n&&(t=Pa(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Pa(t.handleEvent,t)}return 2147483647<Number(e)?-1:Oa.setTimeout(t,e||0)}function ru(t){t.g=nu((function(){t.g=null,t.i&&(t.i=!1,ru(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Fa(tu,Us),(Sa=tu.prototype).da=!1,Sa.S=null,Sa.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Bs(this,"tick"),this.da&&(eu(this),this.start()))}},Sa.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Sa.M=function(){tu.Z.M.call(this),eu(this),delete this.g};var iu=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}_a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:ru(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Oa.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(ja);function ou(t){ja.call(this),this.h=t,this.g={}}Fa(ou,ja);var au=[];function su(t,e,n,r){Array.isArray(n)||(n&&(au[0]=n.toString()),n=au);for(var i=0;i<n.length;i++){var o=xs(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function uu(t){Ya(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Ps(t)}),t),t.g={}}function cu(){this.g=!0}function lu(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return qs(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}ou.prototype.M=function(){ou.Z.M.call(this),uu(this)},ou.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cu.prototype.Aa=function(){this.g=!1},cu.prototype.info=function(){};var fu={},hu=null;function du(){return hu=hu||new Us}function pu(t){ms.call(this,fu.Ma,t)}function yu(t){var e=du();Bs(e,new pu(e,t))}function vu(t,e){ms.call(this,fu.STAT_EVENT,t),this.stat=e}function gu(t){var e=du();Bs(e,new vu(e,t))}function mu(t,e){ms.call(this,fu.Na,t),this.size=e}function bu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Oa.setTimeout((function(){t()}),e)}fu.Ma="serverreachability",Fa(pu,ms),fu.STAT_EVENT="statevent",Fa(vu,ms),fu.Na="timingevent",Fa(mu,ms);var wu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},_u={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Eu(){}function Su(t){return t.h||(t.h=t.i())}function Iu(){}Eu.prototype.h=null;var Tu,Ou={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Cu(){ms.call(this,"d")}function Au(){ms.call(this,"c")}function ku(){}function xu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new ou(this),this.P=Ru,t=os?125:void 0,this.W=new tu(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Nu}function Nu(){this.i=null,this.g="",this.h=!1}Fa(Cu,ms),Fa(Au,ms),Fa(ku,Eu),ku.prototype.g=function(){return new XMLHttpRequest},ku.prototype.i=function(){return{}},Tu=new ku;var Ru=45e3,Du={},Pu={};function Lu(t,e,n){t.K=1,t.v=ic(Qu(e)),t.s=n,t.U=!0,Fu(t,null)}function Fu(t,e){t.F=Date.now(),Uu(t),t.A=Qu(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),gc(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Nu,t.g=ml(t.l,n?e:null,!t.s),0<t.O&&(t.L=new iu(Pa(t.Ia,t,t.g),t.O)),su(t.V,t.g,"readystatechange",t.gb),e=t.H?Ja(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),yu(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");a=2<=f.length&&"type"==f[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function ju(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Mu(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Vu(t,n))==Pu){4==e&&(t.o=4,gu(14),i=!1),lu(t.j,t.m,null,"[Incomplete Response]");break}if(r==Du){t.o=4,gu(15),lu(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}lu(t.j,t.m,r,null),Wu(t,r)}ju(t)&&r!=Pu&&r!=Du&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,gu(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ll(e),e.L=!0,gu(11))):(lu(t.j,t.m,n,"[Invalid Chunked Response]"),Gu(t),qu(t))}function Vu(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Pu:(n=Number(e.substring(n,r)),isNaN(n)?Du:(r+=1)+n>e.length?Pu:(e=e.substr(r,n),t.C=r+n,e))}function Uu(t){t.Y=Date.now()+t.P,Bu(t,t.P)}function Bu(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=bu(Pa(t.eb,t),e)}function Ku(t){t.B&&(Oa.clearTimeout(t.B),t.B=null)}function qu(t){0==t.l.G||t.I||dl(t.l,t)}function Gu(t){Ku(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,eu(t.W),uu(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Wu(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Ic(n.i,t)))if(n.I=t.N,!t.J&&Ic(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;hl(n),el(n)}cl(n),gu(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=bu(Pa(n.ab,n),6e3));if(1>=Sc(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else yl(n,11)}else if((t.J||n.g==t)&&hl(n),!qa(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(za(l,"spdy")||za(l,"quic")||za(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Tc(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,rc(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=gl(r,r.H?r.la:null,r.W),d.J){Oc(r.i,d);var p=d,y=r.K;y&&p.setTimeout(y),p.B&&(Ku(p),Uu(p)),r.g=d}else ul(r);0<n.l.length&&il(n)}else"stop"!=o[0]&&"close"!=o[0]||yl(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?yl(n,7):tl(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}yu(4)}catch(o){}}function zu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Aa(t)||"string"==typeof t)Ua(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Aa(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Aa(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Xu(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Xu)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Hu(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Zu(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Zu(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Zu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Sa=xu.prototype).setTimeout=function(t){this.P=t},Sa.gb=function(t){t=t.target;var e=this.L;e&&3==Zc(t)?e.l():this.Ia(t)},Sa.Ia=function(t){try{if(t==this.g)t:{var e=Zc(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||os||this.g&&(this.h.h||this.g.ga()||Yc(this.g)))){this.I||4!=e||7==n||yu(8==n||0>=r?3:2),Ku(this);var i=this.g.ba();this.N=i;e:if(ju(this)){var o=Yc(this.g);t="";var a=o.length,s=4==Zc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Gu(this),qu(this);var u="";break e}this.h.i=new Oa.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qa(c)){var f=c;break e}}f=null}if(!(i=f)){this.i=!1,this.o=3,gu(12),Gu(this),qu(this);break t}lu(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wu(this,i)}this.U?(Mu(this,e,u),os&&this.i&&3==e&&(su(this.V,this.W,"tick",this.fb),this.W.start())):(lu(this.j,this.m,u,null),Wu(this,u)),4==e&&Gu(this),this.i&&!this.I&&(4==e?dl(this.l,this):(this.i=!1,Uu(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,gu(12)):(this.o=0,gu(13)),Gu(this),qu(this)}}}catch(e){}},Sa.fb=function(){if(this.g){var t=Zc(this.g),e=this.g.ga();this.C<e.length&&(Ku(this),Mu(this,t,e),this.i&&4!=t&&Uu(this))}},Sa.cancel=function(){this.I=!0,Gu(this)},Sa.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(yu(3),gu(17)),Gu(this),this.o=2,qu(this)):Bu(this,this.Y-t)},(Sa=Xu.prototype).R=function(){Hu(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Sa.T=function(){return Hu(this),this.g.concat()},Sa.get=function(t,e){return Zu(this.h,t)?this.h[t]:e},Sa.set=function(t,e){Zu(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Sa.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Yu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ju(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ju){this.g=void 0!==e?e:t.g,$u(this,t.j),this.s=t.s,tc(this,t.i),ec(this,t.m),this.l=t.l,e=t.h;var n=new dc;n.i=e.i,e.g&&(n.g=new Xu(e.g),n.h=e.h),nc(this,n),this.o=t.o}else t&&(n=String(t).match(Yu))?(this.g=!!e,$u(this,n[1]||"",!0),this.s=oc(n[2]||""),tc(this,n[3]||"",!0),ec(this,n[4]),this.l=oc(n[5]||"",!0),nc(this,n[6]||"",!0),this.o=oc(n[7]||"")):(this.g=!!e,this.h=new dc(null,this.g))}function Qu(t){return new Ju(t)}function $u(t,e,n){t.j=n?oc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function tc(t,e,n){t.i=n?oc(e,!0):e}function ec(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function nc(t,e,n){e instanceof dc?(t.h=e,function(t,e){e&&!t.j&&(pc(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(yc(this,e),gc(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=ac(e,fc)),t.h=new dc(e,t.g))}function rc(t,e,n){t.h.set(e,n)}function ic(t){return rc(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function oc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ac(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,sc),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function sc(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ju.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ac(e,uc,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ac(e,uc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(ac(n,"/"==n.charAt(0)?lc:cc,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ac(n,hc)),t.join("")};var uc=/[#\/\?@]/g,cc=/[#\?:]/g,lc=/[#\?]/g,fc=/[#\?@]/g,hc=/#/g;function dc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function pc(t){t.g||(t.g=new Xu,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function yc(t,e){pc(t),e=mc(t,e),Zu(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Zu((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Hu(t)))}function vc(t,e){return pc(t),e=mc(t,e),Zu(t.g.h,e)}function gc(t,e,n){yc(t,e),0<n.length&&(t.i=null,t.g.set(mc(t,e),Ka(n)),t.h+=n.length)}function mc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Sa=dc.prototype).add=function(t,e){pc(this),this.i=null,t=mc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Sa.forEach=function(t,e){pc(this),this.g.forEach((function(n,r){Ua(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Sa.T=function(){pc(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Sa.R=function(t){pc(this);var e=[];if("string"==typeof t)vc(this,t)&&(e=Ba(e,this.g.get(mc(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Ba(e,t[n])}return e},Sa.set=function(t,e){return pc(this),this.i=null,vc(this,t=mc(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Sa.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Sa.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var bc=function(t,e){this.h=t,this.g=e};function wc(t){this.l=t||_c,Oa.PerformanceNavigationTiming?t=0<(t=Oa.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Oa.g&&Oa.g.Ea&&Oa.g.Ea()&&Oa.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _c=10;function Ec(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Sc(t){return t.h?1:t.g?t.g.size:0}function Ic(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Tc(t,e){t.g?t.g.add(e):t.h=e}function Oc(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Cc(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Ea(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ka(t.i)}function Ac(){}function kc(){this.g=new Ac}function xc(t,e,n){var r=n||"";try{zu(t,(function(t,n){var i=t;ka(t)&&(i=qs(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Nc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function Rc(t){this.l=t.$b||null,this.j=t.ib||!1}function Dc(t,e){Us.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Pc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wc.prototype.cancel=function(){var t,e;if(this.i=Cc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Ea(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Ac.prototype.stringify=function(t){return Oa.JSON.stringify(t,void 0)},Ac.prototype.parse=function(t){return Oa.JSON.parse(t,void 0)},Fa(Rc,Eu),Rc.prototype.g=function(){return new Dc(this.l,this.j)},Rc.prototype.i=function(t){return function(){return t}}({}),Fa(Dc,Us);var Pc=0;function Lc(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Fc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,jc(t)}function jc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Sa=Dc.prototype).open=function(t,e){if(this.readyState!=Pc)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,jc(this)},Sa.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Oa).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Sa.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fc(this)),this.readyState=Pc},Sa.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,jc(this)),this.g&&(this.readyState=3,jc(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Oa.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Lc(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Sa.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Fc(this):jc(this),3==this.readyState&&Lc(this)}},Sa.Ua=function(t){this.g&&(this.response=this.responseText=t,Fc(this))},Sa.Ta=function(t){this.g&&(this.response=t,Fc(this))},Sa.ha=function(){this.g&&Fc(this)},Sa.setRequestHeader=function(t,e){this.v.append(t,e)},Sa.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Sa.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Dc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Mc=Oa.JSON.parse;function Vc(t){Us.call(this),this.headers=new Xu,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Uc,this.K=this.L=!1}Fa(Vc,Us);var Uc="",Bc=/^https?$/i,Kc=["POST","PUT"];function qc(t){return"content-type"==t.toLowerCase()}function Gc(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Wc(t),Xc(t)}function Wc(t){t.D||(t.D=!0,Bs(t,"complete"),Bs(t,"error"))}function zc(t){if(t.h&&void 0!==Ta&&(!t.C[1]||4!=Zc(t)||2!=t.ba()))if(t.v&&4==Zc(t))nu(t.Fa,0,t);else if(Bs(t,"readystatechange"),4==Zc(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Yu)[1]||null;if(!o&&Oa.self&&Oa.self.location){var a=Oa.self.location.protocol;o=a.substr(0,a.length-1)}i=!Bc.test(o?o.toLowerCase():"")}e=i}if(e)Bs(t,"complete"),Bs(t,"success");else{t.m=6;try{var s=2<Zc(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.ba()+"]",Wc(t)}}finally{Xc(t)}}}function Xc(t,e){if(t.g){Hc(t);var n=t.g,r=t.C[0]?Ca:null;t.g=null,t.C=null,e||Bs(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Hc(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Oa.clearTimeout(t.A),t.A=null)}function Zc(t){return t.g?t.g.readyState:0}function Yc(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Uc:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Jc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ya(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):rc(t,e,n))}function Qc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function $c(t){this.za=0,this.l=[],this.h=new cu,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Qc("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Qc("baseRetryDelayMs",5e3,t),this.$a=Qc("retryDelaySeedMs",1e4,t),this.Ya=Qc("forwardChannelMaxRetries",2,t),this.ra=Qc("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new wc(t&&t.concurrentRequestLimit),this.Ca=new kc,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function tl(t){if(nl(t),3==t.G){var e=t.V++,n=Qu(t.F);rc(n,"SID",t.J),rc(n,"RID",e),rc(n,"TYPE","terminate"),al(t,n),(e=new xu(t,t.h,e,void 0)).K=2,e.v=ic(Qu(n)),n=!1,Oa.navigator&&Oa.navigator.sendBeacon&&(n=Oa.navigator.sendBeacon(e.v.toString(),"")),!n&&Oa.Image&&((new Image).src=e.v,n=!0),n||(e.g=ml(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Uu(e)}vl(t)}function el(t){t.g&&(ll(t),t.g.cancel(),t.g=null)}function nl(t){el(t),t.u&&(Oa.clearTimeout(t.u),t.u=null),hl(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Oa.clearTimeout(t.m),t.m=null)}function rl(t,e){t.l.push(new bc(t.Za++,e)),3==t.G&&il(t)}function il(t){Ec(t.i)||t.m||(t.m=!0,Ys(t.Ha,t),t.C=0)}function ol(t,e){var n;n=e?e.m:t.V++;var r=Qu(t.F);rc(r,"SID",t.J),rc(r,"RID",n),rc(r,"AID",t.U),al(t,r),t.o&&t.s&&Jc(r,t.o,t.s),n=new xu(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=sl(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Tc(t.i,n),Lu(n,r,e)}function al(t,e){t.j&&zu({},(function(t,n){rc(e,n,t)}))}function sl(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Pa(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{xc(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function ul(t){t.g||t.u||(t.Y=1,Ys(t.Ga,t),t.A=0)}function cl(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=bu(Pa(t.Ga,t),pl(t,t.A)),t.A++,!0)}function ll(t){null!=t.B&&(Oa.clearTimeout(t.B),t.B=null)}function fl(t){t.g=new xu(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Qu(t.oa);rc(e,"RID","rpc"),rc(e,"SID",t.J),rc(e,"CI",t.N?"0":"1"),rc(e,"AID",t.U),al(t,e),rc(e,"TYPE","xmlhttp"),t.o&&t.s&&Jc(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=ic(Qu(e)),n.s=null,n.U=!0,Fu(n,t)}function hl(t){null!=t.v&&(Oa.clearTimeout(t.v),t.v=null)}function dl(t,e){var n=null;if(t.g==e){hl(t),ll(t),t.g=null;var r=2}else{if(!Ic(t.i,e))return;n=e.D,Oc(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Bs(r=du(),new mu(r,n,e,i)),il(t)}else ul(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Sc(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=bu(Pa(t.Ha,t,e),pl(t,t.C)),t.C++,0)))}(t,e)||2==r&&cl(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:yl(t,5);break;case 4:yl(t,10);break;case 3:yl(t,6);break;default:yl(t,2)}}function pl(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function yl(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Pa(t.jb,t);n||(n=new Ju("//www.google.com/images/cleardot.gif"),Oa.location&&"http"==Oa.location.protocol||$u(n,"https"),ic(n)),function(t,e){var n=new cu;if(Oa.Image){var r=new Image;r.onload=La(Nc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=La(Nc,n,r,"TestLoadImage: error",!1,e),r.onabort=La(Nc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=La(Nc,n,r,"TestLoadImage: timeout",!1,e),Oa.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else gu(2);t.G=0,t.j&&t.j.va(e),vl(t),nl(t)}function vl(t){t.G=0,t.I=-1,t.j&&(0==Cc(t.i).length&&0==t.l.length||(t.i.i.length=0,Ka(t.l),t.l.length=0),t.j.ua())}function gl(t,e,n){var r=function(t){return t instanceof Ju?Qu(t):new Ju(t,void 0)}(n);if(""!=r.i)e&&tc(r,e+"."+r.i),ec(r,r.m);else{var i=Oa.location;r=function(t,e,n,r){var i=new Ju(null,void 0);return t&&$u(i,t),e&&tc(i,e),n&&ec(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Ya(t.aa,(function(t,e){rc(r,e,t)})),e=t.D,n=t.sa,e&&n&&rc(r,e,n),rc(r,"VER",t.ma),al(t,r),r}function ml(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Vc(new Rc({ib:!0})):new Vc(t.qa)).L=t.H,e}function bl(){}function wl(){if(rs&&!(10<=Number(vs)))throw Error("Environmental error: no available transport.")}function _l(t,e){Us.call(this),this.g=new $c(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!qa(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qa(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Il(this)}function El(t){Cu.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Sl(){Au.call(this),this.status=1}function Il(t){this.g=t}(Sa=Vc.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Tu.g(),this.C=this.u?Su(this.u):Su(Tu),this.g.onreadystatechange=Pa(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Gc(this,t)}t=n||"";var i=new Xu(this.headers);r&&zu(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=qc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Oa.FormData&&t instanceof Oa.FormData,!(0<=Va(Kc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Hc(this),0<this.B&&((this.K=function(t){return rs&&ps()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pa(this.pa,this)):this.A=nu(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Gc(this,t)}},Sa.pa=function(){void 0!==Ta&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bs(this,"timeout"),this.abort(8))},Sa.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Bs(this,"complete"),Bs(this,"abort"),Xc(this))},Sa.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xc(this,!0)),Vc.Z.M.call(this)},Sa.Fa=function(){this.s||(this.F||this.v||this.l?zc(this):this.cb())},Sa.cb=function(){zc(this)},Sa.ba=function(){try{return 2<Zc(this)?this.g.status:-1}catch(t){return-1}},Sa.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Sa.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Mc(e)}},Sa.Da=function(){return this.m},Sa.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Sa=$c.prototype).ma=8,Sa.G=1,Sa.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},Sa.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new xu(this,this.h,t,void 0),n=this.s;if(this.P&&(n?$a(n=Ja(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=sl(this,e,r),rc(i=Qu(this.F),"RID",t),rc(i,"CVER",22),this.D&&rc(i,"X-HTTP-Session-Id",this.D),al(this,i),this.o&&n&&Jc(i,this.o,n),Tc(this.i,e),this.Ra&&rc(i,"TYPE","init"),this.ja?(rc(i,"$req",r),rc(i,"SID","null"),e.$=!0,Lu(e,i,null)):Lu(e,i,r),this.G=2}}else 3==this.G&&(t?ol(this,t):0==this.l.length||Ec(this.i)||ol(this))},Sa.Ga=function(){if(this.u=null,fl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=bu(Pa(this.bb,this),t)}},Sa.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,gu(10),el(this),fl(this))},Sa.ab=function(){null!=this.v&&(this.v=null,el(this),cl(this),gu(19))},Sa.jb=function(t){t?(this.h.info("Successfully pinged google.com"),gu(2)):(this.h.info("Failed to ping google.com"),gu(1))},(Sa=bl.prototype).xa=function(){},Sa.wa=function(){},Sa.va=function(){},Sa.ua=function(){},Sa.Oa=function(){},wl.prototype.g=function(t,e){return new _l(t,e)},Fa(_l,Us),_l.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ys(Pa(t.hb,t,e))),gu(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=gl(t,null,t.W),il(t)},_l.prototype.close=function(){tl(this.g)},_l.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,rl(this.g,e)}else this.v?((e={}).__data__=qs(t),rl(this.g,e)):rl(this.g,t)},_l.prototype.M=function(){this.g.j=null,delete this.j,tl(this.g),delete this.g,_l.Z.M.call(this)},Fa(El,Cu),Fa(Sl,Au),Fa(Il,bl),Il.prototype.xa=function(){Bs(this.g,"a")},Il.prototype.wa=function(t){Bs(this.g,new El(t))},Il.prototype.va=function(t){Bs(this.g,new Sl(t))},Il.prototype.ua=function(){Bs(this.g,"b")},wl.prototype.createWebChannel=wl.prototype.g,_l.prototype.send=_l.prototype.u,_l.prototype.open=_l.prototype.m,_l.prototype.close=_l.prototype.close,wu.NO_ERROR=0,wu.TIMEOUT=8,wu.HTTP_ERROR=6,_u.COMPLETE="complete",Iu.EventType=Ou,Ou.OPEN="a",Ou.CLOSE="b",Ou.ERROR="c",Ou.MESSAGE="d",Us.prototype.listen=Us.prototype.N,Vc.prototype.listenOnce=Vc.prototype.O,Vc.prototype.getLastError=Vc.prototype.La,Vc.prototype.getLastErrorCode=Vc.prototype.Da,Vc.prototype.getStatus=Vc.prototype.ba,Vc.prototype.getResponseJson=Vc.prototype.Qa,Vc.prototype.getResponseText=Vc.prototype.ga,Vc.prototype.send=Vc.prototype.ea;var Tl=wu,Ol=_u,Cl=fu,Al=10,kl=11,xl=Rc,Nl=Iu,Rl=Vc,Dl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Dl.o=-1;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Pl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ll=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Eo(e,t),e}(Error),Fl=new ia("@firebase/firestore");function jl(){return Fl.logLevel}function Ml(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fl.logLevel<=Jo.DEBUG){var r=e.map(Bl);Fl.debug.apply(Fl,Ao(["Firestore (8.10.0): "+t],r))}}function Vl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fl.logLevel<=Jo.ERROR){var r=e.map(Bl);Fl.error.apply(Fl,Ao(["Firestore (8.10.0): "+t],r))}}function Ul(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fl.logLevel<=Jo.WARN){var r=e.map(Bl);Fl.warn.apply(Fl,Ao(["Firestore (8.10.0): "+t],r))}}function Bl(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kl(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+t;throw Vl(e),new Error(e)}function ql(t,e){t||Kl()}function Gl(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wl(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var zl=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Wl(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Xl(t,e){return t<e?-1:t>e?1:0}function Hl(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Zl(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Yl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ll(Pl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ll(Pl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ll(Pl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ll(Pl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Xl(this.nanoseconds,t.nanoseconds):Xl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Jl=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Yl(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ql(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $l(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tf(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ef=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Kl(),void 0===n?n=t.length-e:n>t.length-e&&Kl(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),nf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Eo(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ef),rf=/^[_a-zA-Z][_a-zA-Z0-9]*$/,of=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Eo(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return rf.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Ll(Pl.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ll(Pl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Ll(Pl.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ef),af=function(){function t(t){this.fields=t,t.sort(of.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Hl(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),sf=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Xl(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();sf.EMPTY_BYTE_STRING=new sf("");var uf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cf(t){if(ql(!!t),"string"==typeof t){var e=0,n=uf.exec(t);if(ql(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:lf(t.seconds),nanos:lf(t.nanos)}}function lf(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ff(t){return"string"==typeof t?sf.fromBase64String(t):sf.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hf(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function df(t){var e=t.mapValue.fields.__previous_value__;return hf(e)?df(e):e}function pf(t){var e=cf(t.mapValue.fields.__local_write_time__.timestampValue);return new Yl(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function yf(t){return null==t}function vf(t){return 0===t&&1/t==-1/0}function gf(t){return"number"==typeof t&&Number.isInteger(t)&&!vf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var mf=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(nf.fromString(e))},t.fromName=function(e){return new t(nf.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===nf.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return nf.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new nf(e.slice()))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hf(t)?4:10:Kl()}function wf(t,e){var n=bf(t);if(n!==bf(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pf(t).isEqual(pf(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=cf(t.timestampValue),r=cf(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ff(t.bytesValue).isEqual(ff(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return lf(t.geoPointValue.latitude)===lf(e.geoPointValue.latitude)&&lf(t.geoPointValue.longitude)===lf(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return lf(t.integerValue)===lf(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=lf(t.doubleValue),r=lf(e.doubleValue);return n===r?vf(n)===vf(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Hl(t.arrayValue.values||[],e.arrayValue.values||[],wf);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ql(n)!==Ql(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wf(n[i],r[i])))return!1;return!0}(t,e);default:return Kl()}}function _f(t,e){return void 0!==(t.values||[]).find((function(t){return wf(t,e)}))}function Ef(t,e){var n=bf(t),r=bf(e);if(n!==r)return Xl(n,r);switch(n){case 0:return 0;case 1:return Xl(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=lf(t.integerValue||t.doubleValue),r=lf(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Sf(t.timestampValue,e.timestampValue);case 4:return Sf(pf(t),pf(e));case 5:return Xl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ff(t),r=ff(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Xl(n[i],r[i]);if(0!==o)return o}return Xl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Xl(lf(t.latitude),lf(e.latitude));return 0!==n?n:Xl(lf(t.longitude),lf(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ef(n[i],r[i]);if(o)return o}return Xl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Xl(r[a],o[a]);if(0!==s)return s;var u=Ef(n[r[a]],i[o[a]]);if(0!==u)return u}return Xl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Kl()}}function Sf(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Xl(t,e);var n=cf(t),r=cf(e),i=Xl(n.seconds,r.seconds);return 0!==i?i:Xl(n.nanos,r.nanos)}function If(t){return Tf(t)}function Tf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=cf(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ff(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,mf.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Tf(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Tf(t.fields[o])}return e+"}"}(t.mapValue):Kl();var e,n}function Of(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Cf(t){return!!t&&"integerValue"in t}function Af(t){return!!t&&"arrayValue"in t}function kf(t){return!!t&&"nullValue"in t}function xf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nf(t){return!!t&&"mapValue"in t}function Rf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return $l(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Rf(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Rf(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Df=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Nf(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Rf(e)},t.prototype.setAll=function(t){var e=this,n=of.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Rf(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Nf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return wf(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Nf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){$l(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Rf(this.value))},t}();function Pf(t){var e=[];return $l(t.fields,(function(t,n){var r=new of([t]);if(Nf(n)){var i=Pf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new af(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Lf=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Jl.min(),Df.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Df.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Df.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Df.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Df.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ff=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jf(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Ff(t,e,n,r,i,o,a)}function Mf(t){var e=Gl(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+If(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),yf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Jf(e.startAt)),e.endAt&&(n+="|ub:",n+=Jf(e.endAt)),e.h=n}return e.h}function Vf(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!$f(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!wf(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eh(t.startAt,e.startAt)&&eh(t.endAt,e.endAt)}function Uf(t){return mf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Bf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Eo(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Kf(t,n,r):"array-contains"===n?new zf(t,r):"in"===n?new Xf(t,r):"not-in"===n?new Hf(t,r):"array-contains-any"===n?new Zf(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new qf(t,n):new Gf(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ef(e,this.value)):null!==e&&bf(this.value)===bf(e)&&this.m(Ef(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Kl()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Kf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=mf.fromName(r.referenceValue),i}return Eo(e,t),e.prototype.matches=function(t){var e=mf.comparator(t.key,this.key);return this.m(e)},e}(Bf),qf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Wf("in",n),r}return Eo(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Bf),Gf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Wf("not-in",n),r}return Eo(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Bf);function Wf(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return mf.fromName(t.referenceValue)}))}var zf=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Eo(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Af(e)&&_f(e.arrayValue,this.value)},e}(Bf),Xf=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Eo(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&_f(this.value.arrayValue,e)},e}(Bf),Hf=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Eo(e,t),e.prototype.matches=function(t){if(_f(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!_f(this.value.arrayValue,e)},e}(Bf),Zf=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Eo(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Af(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return _f(e.value.arrayValue,t)}))},e}(Bf),Yf=function(t,e){this.position=t,this.before=e};function Jf(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return If(t)})).join(",")}var Qf=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function $f(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function th(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?mf.comparator(mf.fromName(a.referenceValue),n.key):Ef(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function eh(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!wf(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var nh=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function rh(t,e,n,r,i,o,a,s){return new nh(t,e,n,r,i,o,a,s)}function ih(t){return new nh(t)}function oh(t){return!yf(t.limit)&&"F"===t.limitType}function ah(t){return!yf(t.limit)&&"L"===t.limitType}function sh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function uh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ch(t){return null!==t.collectionGroup}function lh(t){var e=Gl(t);if(null===e.p){e.p=[];var n=uh(e),r=sh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Qf(n)),e.p.push(new Qf(of.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Qf(of.keyField(),u))}}}return e.p}function fh(t){var e=Gl(t);if(!e.T)if("F"===e.limitType)e.T=jf(e.path,e.collectionGroup,lh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=lh(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Qf(o.field,a))}var s=e.endAt?new Yf(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Yf(e.startAt.position,!e.startAt.before):null;e.T=jf(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function hh(t,e,n){return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dh(t,e){return Vf(fh(t),fh(e))&&t.limitType===e.limitType}function ph(t){return Mf(fh(t))+"|lt:"+t.limitType}function yh(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+If(e.value);var e})).join(", ")+"]"),yf(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Jf(t.startAt)),t.endAt&&(e+=", endAt: "+Jf(t.endAt)),"Target("+e+")"}(fh(t))+"; limitType="+t.limitType+")"}function vh(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):mf.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!th(t.startAt,lh(t),e)||t.endAt&&th(t.endAt,lh(t),e))}(t,e)}function gh(t){return function(e,n){for(var r=!1,i=0,o=lh(t);i<o.length;i++){var a=o[i],s=mh(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function mh(t,e,n){var r=t.field.isKeyField()?mf.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ef(r,i):Kl()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Kl()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vf(e)?"-0":e}}function wh(t){return{integerValue:""+t}}function _h(t,e){return gf(e)?wh(e):bh(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Eh=function(){this._=void 0};function Sh(t,e,n){return t instanceof Oh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ch?Ah(t,e):t instanceof kh?xh(t,e):function(t,e){var n=Th(t,e),r=Rh(n)+Rh(t.A);return Cf(n)&&Cf(t.A)?wh(r):bh(t.R,r)}(t,e)}function Ih(t,e,n){return t instanceof Ch?Ah(t,e):t instanceof kh?xh(t,e):n}function Th(t,e){return t instanceof Nh?Cf(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Oh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Eo(e,t),e}(Eh),Ch=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Eo(e,t),e}(Eh);function Ah(t,e){for(var n=Dh(e),r=function(t){n.some((function(e){return wf(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var kh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Eo(e,t),e}(Eh);function xh(t,e){for(var n=Dh(e),r=function(t){n=n.filter((function(e){return!wf(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Nh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Eo(e,t),e}(Eh);function Rh(t){return lf(t.integerValue||t.doubleValue)}function Dh(t){return Af(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ph=function(t,e){this.field=t,this.transform=e},Lh=function(t,e){this.version=t,this.transformResults=e},Fh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function jh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Mh=function(){};function Vh(t,e,n){t instanceof Gh?function(t,e,n){var r=t.value.clone(),i=Xh(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Wh?function(t,e,n){if(jh(t.precondition,e)){var r=Xh(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(zh(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Uh(t,e,n){t instanceof Gh?function(t,e,n){if(jh(t.precondition,e)){var r=t.value.clone(),i=Hh(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(qh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Wh?function(t,e,n){if(jh(t.precondition,e)){var r=Hh(t.fieldTransforms,n,e),i=e.data;i.setAll(zh(t)),i.setAll(r),e.convertToFoundDocument(qh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){jh(t.precondition,e)&&e.convertToNoDocument(Jl.min())}(t,e)}function Bh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Th(o.transform,a||null);null!=s&&(null==n&&(n=Df.empty()),n.set(o.field,s))}return n||null}function Kh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Hl(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ch&&e instanceof Ch||t instanceof kh&&e instanceof kh?Hl(t.elements,e.elements,wf):t instanceof Nh&&e instanceof Nh?wf(t.A,e.A):t instanceof Oh&&e instanceof Oh}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function qh(t){return t.isFoundDocument()?t.version:Jl.min()}var Gh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Eo(e,t),e}(Mh),Wh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Eo(e,t),e}(Mh);function zh(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Xh(t,e,n){var r=new Map;ql(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Ih(a,s,n[i]))}return r}function Hh(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Sh(s,u,e))}return r}var Zh,Yh,Jh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Eo(e,t),e}(Mh),Qh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Eo(e,t),e}(Mh),$h=function(t){this.count=t};function td(t){switch(t){case Pl.OK:return Kl();case Pl.CANCELLED:case Pl.UNKNOWN:case Pl.DEADLINE_EXCEEDED:case Pl.RESOURCE_EXHAUSTED:case Pl.INTERNAL:case Pl.UNAVAILABLE:case Pl.UNAUTHENTICATED:return!1;case Pl.INVALID_ARGUMENT:case Pl.NOT_FOUND:case Pl.ALREADY_EXISTS:case Pl.PERMISSION_DENIED:case Pl.FAILED_PRECONDITION:case Pl.ABORTED:case Pl.OUT_OF_RANGE:case Pl.UNIMPLEMENTED:case Pl.DATA_LOSS:return!0;default:return Kl()}}function ed(t){if(void 0===t)return Vl("GRPC error has no .code"),Pl.UNKNOWN;switch(t){case Zh.OK:return Pl.OK;case Zh.CANCELLED:return Pl.CANCELLED;case Zh.UNKNOWN:return Pl.UNKNOWN;case Zh.DEADLINE_EXCEEDED:return Pl.DEADLINE_EXCEEDED;case Zh.RESOURCE_EXHAUSTED:return Pl.RESOURCE_EXHAUSTED;case Zh.INTERNAL:return Pl.INTERNAL;case Zh.UNAVAILABLE:return Pl.UNAVAILABLE;case Zh.UNAUTHENTICATED:return Pl.UNAUTHENTICATED;case Zh.INVALID_ARGUMENT:return Pl.INVALID_ARGUMENT;case Zh.NOT_FOUND:return Pl.NOT_FOUND;case Zh.ALREADY_EXISTS:return Pl.ALREADY_EXISTS;case Zh.PERMISSION_DENIED:return Pl.PERMISSION_DENIED;case Zh.FAILED_PRECONDITION:return Pl.FAILED_PRECONDITION;case Zh.ABORTED:return Pl.ABORTED;case Zh.OUT_OF_RANGE:return Pl.OUT_OF_RANGE;case Zh.UNIMPLEMENTED:return Pl.UNIMPLEMENTED;case Zh.DATA_LOSS:return Pl.DATA_LOSS;default:return Kl()}}(Yh=Zh||(Zh={}))[Yh.OK=0]="OK",Yh[Yh.CANCELLED=1]="CANCELLED",Yh[Yh.UNKNOWN=2]="UNKNOWN",Yh[Yh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yh[Yh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yh[Yh.NOT_FOUND=5]="NOT_FOUND",Yh[Yh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yh[Yh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yh[Yh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yh[Yh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yh[Yh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yh[Yh.ABORTED=10]="ABORTED",Yh[Yh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yh[Yh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yh[Yh.INTERNAL=13]="INTERNAL",Yh[Yh.UNAVAILABLE=14]="UNAVAILABLE",Yh[Yh.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var nd=function(){function t(t,e){this.comparator=t,this.root=e||id.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,id.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,id.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new rd(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new rd(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new rd(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new rd(this.root,t,this.comparator,!0)},t}(),rd=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),id=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Kl();if(this.right.isRed())throw Kl();var t=this.left.check();if(t!==this.right.check())throw Kl();return t+(this.isRed()?0:1)},t}();id.EMPTY=null,id.RED=!0,id.BLACK=!1,id.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Kl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Kl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Kl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Kl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Kl()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new id(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var od=function(){function t(t){this.comparator=t,this.data=new nd(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ad(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ad(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ad=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),sd=new nd(mf.comparator);function ud(){return sd}var cd=new nd(mf.comparator);function ld(){return cd}var fd=new nd(mf.comparator);var hd=new od(mf.comparator);function dd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=hd,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var pd=new od(Xl);function yd(){return pd}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var vd=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,gd.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Jl.min(),r,yd(),ud(),dd())},t}(),gd=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(sf.EMPTY_BYTE_STRING,n,dd(),dd(),dd())},t}(),md=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},bd=function(t,e){this.targetId=t,this.V=e},wd=function(t,e,n,r){void 0===n&&(n=sf.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},_d=function(){function t(){this.S=0,this.D=Id(),this.C=sf.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=dd(),e=dd(),n=dd();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Kl()}})),new gd(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=Id()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),Ed=function(){function t(t){this.W=t,this.G=new Map,this.H=ud(),this.J=Sd(),this.Y=new od(Xl)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Kl()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Uf(i))if(0===n){var o=new mf(i.path);this.tt(e,o,Lf.newNoDocument(o,Jl.min()))}else ql(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Uf(o.target)){var a=new mf(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Lf.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=dd();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new vd(t,n,this.Y,this.H,r);return this.H=ud(),this.J=Sd(),this.Y=new od(Xl),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new _d,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new od(Xl),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ml("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new _d),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Sd(){return new nd(mf.comparator)}function Id(){return new nd(mf.comparator)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Td={asc:"ASCENDING",desc:"DESCENDING"},Od={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cd=function(t,e){this.databaseId=t,this.I=e};function Ad(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function kd(t,e){return t.I?e.toBase64():e.toUint8Array()}function xd(t,e){return Ad(t,e.toTimestamp())}function Nd(t){return ql(!!t),Jl.fromTimestamp(function(t){var e=cf(t);return new Yl(e.seconds,e.nanos)}(t))}function Rd(t,e){return function(t){return new nf(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Dd(t){var e=nf.fromString(t);return ql(np(e)),e}function Pd(t,e){return Rd(t.databaseId,e.path)}function Ld(t,e){var n=Dd(e);if(n.get(1)!==t.databaseId.projectId)throw new Ll(Pl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ll(Pl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new mf(Vd(n))}function Fd(t,e){return Rd(t.databaseId,e)}function jd(t){var e=Dd(t);return 4===e.length?nf.emptyPath():Vd(e)}function Md(t){return new nf(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Vd(t){return ql(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ud(t,e,n){return{name:Pd(t,e),fields:n.value.mapValue.fields}}function Bd(t,e){var n;if(e instanceof Gh)n={update:Ud(t,e.key,e.value)};else if(e instanceof Jh)n={delete:Pd(t,e.key)};else if(e instanceof Wh)n={update:Ud(t,e.key,e.data),updateMask:ep(e.fieldMask)};else{if(!(e instanceof Qh))return Kl();n={verify:Pd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Oh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ch)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof kh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Nh)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Kl()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:xd(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Kl()}(t,e.precondition)),n}function Kd(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Fh.updateTime(Nd(t.updateTime)):void 0!==t.exists?Fh.exists(t.exists):Fh.none()}(e.currentDocument):Fh.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)ql("REQUEST_TIME"===e.setToServerValue),n=new Oh;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Ch(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new kh(i)}else"increment"in e?n=new Nh(t,e.increment):Kl();var o=of.fromServerFormat(e.fieldPath);return new Ph(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ld(t,e.update.name),o=new Df({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new af(e.map((function(t){return of.fromServerFormat(t)})))}(e.updateMask);return new Wh(i,o,a,n,r)}return new Gh(i,o,n,r)}if(e.delete){var s=Ld(t,e.delete);return new Jh(s,n)}if(e.verify){var u=Ld(t,e.verify);return new Qh(u,n)}return Kl()}function qd(t,e){return{documents:[Fd(t,e.path)]}}function Gd(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Fd(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Fd(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(xf(t.value))return{unaryFilter:{field:Jd(t.field),op:"IS_NAN"}};if(kf(t.value))return{unaryFilter:{field:Jd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(xf(t.value))return{unaryFilter:{field:Jd(t.field),op:"IS_NOT_NAN"}};if(kf(t.value))return{unaryFilter:{field:Jd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jd(t.field),op:Yd(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Jd(t.field),direction:Zd(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||yf(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Xd(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Xd(e.endAt)),n}function Wd(t){var e=jd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ql(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=zd(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Qf(Qd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return yf(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Hd(n.startAt));var l=null;return n.endAt&&(l=Hd(n.endAt)),rh(e,i,s,a,u,"F",c,l)}function zd(t){return t?void 0!==t.unaryFilter?[tp(t)]:void 0!==t.fieldFilter?[$d(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return zd(t)})).reduce((function(t,e){return t.concat(e)})):Kl():[]}function Xd(t){return{before:t.before,values:t.position}}function Hd(t){var e=!!t.before,n=t.values||[];return new Yf(n,e)}function Zd(t){return Td[t]}function Yd(t){return Od[t]}function Jd(t){return{fieldPath:t.canonicalString()}}function Qd(t){return of.fromServerFormat(t.fieldPath)}function $d(t){return Bf.create(Qd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Kl()}}(t.fieldFilter.op),t.fieldFilter.value)}function tp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Qd(t.unaryFilter.field);return Bf.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Qd(t.unaryFilter.field);return Bf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Qd(t.unaryFilter.field);return Bf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Qd(t.unaryFilter.field);return Bf.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Kl()}}function ep(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function np(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=op(e)),e=ip(t.get(n),e);return op(e)}function ip(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function op(t){return t+""}function ap(t){var e=t.length;if(ql(e>=2),2===e)return ql(""===t.charAt(0)&&""===t.charAt(1)),nf.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&Kl(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:Kl()}o=a+2}return new nf(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var sp=function(t,e){this.seconds=t,this.nanoseconds=e},up=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};up.store="owner",up.key="owner";var cp=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};cp.store="mutationQueues",cp.keyPath="userId";var lp=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};lp.store="mutations",lp.keyPath="batchId",lp.userMutationsIndex="userMutationsIndex",lp.userMutationsKeyPath=["userId","batchId"];var fp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,rp(e)]},t.key=function(t,e,n){return[t,rp(e),n]},t}();fp.store="documentMutations",fp.PLACEHOLDER=new fp;var hp=function(t,e){this.path=t,this.readTime=e},dp=function(t,e){this.path=t,this.version=e},pp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};pp.store="remoteDocuments",pp.readTimeIndex="readTimeIndex",pp.readTimeIndexPath="readTime",pp.collectionReadTimeIndex="collectionReadTimeIndex",pp.collectionReadTimeIndexPath=["parentPath","readTime"];var yp=function(t){this.byteSize=t};yp.store="remoteDocumentGlobal",yp.key="remoteDocumentGlobalKey";var vp=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};vp.store="targets",vp.keyPath="targetId",vp.queryTargetsIndexName="queryTargetsIndex",vp.queryTargetsKeyPath=["canonicalId","targetId"];var gp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};gp.store="targetDocuments",gp.keyPath=["targetId","path"],gp.documentTargetsIndex="documentTargetsIndex",gp.documentTargetsKeyPath=["path","targetId"];var mp=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};mp.key="targetGlobalKey",mp.store="targetGlobal";var bp=function(t,e){this.collectionId=t,this.parent=e};bp.store="collectionParents",bp.keyPath=["collectionId","parent"];var wp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};wp.store="clientMetadata",wp.keyPath="clientId";var _p=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};_p.store="bundles",_p.keyPath="bundleId";var Ep=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ep.store="namedQueries",Ep.keyPath="name";var Sp=Ao(Ao([],Ao(Ao([],Ao(Ao([],Ao(Ao([],[cp.store,lp.store,fp.store,pp.store,vp.store,up.store,mp.store,gp.store]),[wp.store])),[yp.store])),[bp.store])),[_p.store,Ep.store]),Ip="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Op=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Cp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Kl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Ap=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Op,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Np(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Fp(e.target.error);n.ft.reject(new Np(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Np(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ml("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Dp(e)},t}(),kp=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Po())&&Vl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ml("SimpleDb","Removing database:",t),Pp(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Po(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Io(this,void 0,void 0,(function(){var e,n=this;return To(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ml("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Np(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ll(Pl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Np(t,n))},i.onupgradeneeded=function(t){Ml("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Ml("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Io(this,void 0,void 0,(function(){var i,o,a,s,u;return To(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return To(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=f.sent(),e=Ap.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),Cp.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(f.sent(),a),u)];case 4:return c=f.sent(),l="FirebaseError"!==c.name&&o<3,Ml("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),xp=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Pp(this.Pt.delete())},t}(),Np=function(t){function e(e,n){var r=this;return(r=t.call(this,Pl.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Eo(e,t),e}(Ll);function Rp(t){return"IndexedDbTransactionError"===t.name}var Dp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ml("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ml("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Pp(n)},t.prototype.add=function(t){return Ml("SimpleDb","ADD",this.store.name,t,t),Pp(this.store.add(t))},t.prototype.get=function(t){var e=this;return Pp(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ml("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ml("SimpleDb","DELETE",this.store.name,t),Pp(this.store.delete(t))},t.prototype.count=function(){return Ml("SimpleDb","COUNT",this.store.name),Pp(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Ml("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Cp((function(n,r){e.onerror=function(t){var e=Fp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Cp((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new xp(i),a=e(i.primaryKey,i.value,o);if(a instanceof Cp){var s=a.catch((function(t){return o.done(),Cp.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Cp.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Pp(t){return new Cp((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Fp(t.target.error);n(e)}}))}var Lp=!1;function Fp(t){var e=kp._t(Po());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ll("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Lp||(Lp=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var jp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Eo(e,t),e}(Tp);function Mp(t,e){var n=Gl(t);return kp.It(n.Mt,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vp=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Vh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Uh(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Uh(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Jl.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),dd())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Hl(this.mutations,t.mutations,(function(t,e){return Kh(t,e)}))&&Hl(this.baseMutations,t.baseMutations,(function(t,e){return Kh(t,e)}))},t}(),Up=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){ql(e.mutations.length===r.length);for(var i=fd,o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Bp=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Jl.min()),void 0===o&&(o=Jl.min()),void 0===a&&(a=sf.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Kp=function(t){this.Lt=t};function qp(t,e){if(e.document)return function(t,e,n){var r=Ld(t,e.name),i=Nd(e.updateTime),o=new Df({mapValue:{fields:e.fields}}),a=Lf.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=mf.fromSegments(e.noDocument.path),r=Hp(e.noDocument.readTime),i=Lf.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=mf.fromSegments(e.unknownDocument.path);return r=Hp(e.unknownDocument.version),Lf.newUnknownDocument(o,r)}return Kl()}function Gp(t,e,n){var r=Wp(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Pd(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Ad(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new pp(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Xp(e.version);return a=e.hasCommittedMutations,new pp(null,new hp(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Xp(e.version);return new pp(new dp(c,l),null,null,!0,r,i)}return Kl()}function Wp(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zp(t){var e=new Yl(t[0],t[1]);return Jl.fromTimestamp(e)}function Xp(t){var e=t.toTimestamp();return new sp(e.seconds,e.nanoseconds)}function Hp(t){var e=new Yl(t.seconds,t.nanoseconds);return Jl.fromTimestamp(e)}function Zp(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Kd(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return Kd(t.Lt,e)})),s=Yl.fromMillis(e.localWriteTimeMs);return new Vp(e.batchId,s,n,a)}function Yp(t){var e,n,r=Hp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Hp(t.lastLimboFreeSnapshotVersion):Jl.min();return void 0!==t.query.documents?(ql(1===(n=t.query).documents.length),e=fh(ih(jd(n.documents[0])))):e=function(t){return fh(Wd(t))}(t.query),new Bp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,sf.fromBase64String(t.resumeToken))}function Jp(t,e){var n,r=Xp(e.snapshotVersion),i=Xp(e.lastLimboFreeSnapshotVersion);n=Uf(e.target)?qd(t.Lt,e.target):Gd(t.Lt,e.target);var o=e.resumeToken.toBase64();return new vp(e.targetId,Mf(e.target),r,o,e.sequenceNumber,i,n)}function Qp(t){var e=Wd({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?hh(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var $p=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return ty(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Hp(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return ty(t).put({bundleId:(n=e).id,createTime:Xp(Nd(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return ey(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Qp(e.bundledQuery),readTime:Hp(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return ey(t).put(function(t){return{name:t.name,readTime:Xp(Nd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function ty(t){return Mp(t,_p.store)}function ey(t){return Mp(t,Ep.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ny=function(){function t(){this.Bt=new ry}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Cp.resolve()},t.prototype.getCollectionParents=function(t,e){return Cp.resolve(this.Bt.getEntries(e))},t}(),ry=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new od(nf.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new od(nf.comparator)).toArray()},t}(),iy=function(){function t(){this.qt=new ry}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:rp(i)};return oy(t).put(o)}return Cp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Zl(e),""],!1,!0);return oy(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ap(o.parent))}return n}))},t}();function oy(t){return Mp(t,bp.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ay={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sy=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function uy(t,e,n){var r=t.store(lp.store),i=t.store(fp.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){ql(1===s)})));for(var c=[],l=0,f=n.mutations;l<f.length;l++){var h=f[l],d=fp.key(e,h.key.path,n.batchId);o.push(i.delete(d)),c.push(h.key)}return Cp.waitFor(o).next((function(){return c}))}function cy(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Kl();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */sy.DEFAULT_COLLECTION_PERCENTILE=10,sy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sy.DEFAULT=new sy(41943040,sy.DEFAULT_COLLECTION_PERCENTILE,sy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sy.DISABLED=new sy(-1,0,0);var ly=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return ql(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hy(t).$t({index:lp.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=dy(t),a=hy(t);return a.add({}).next((function(s){ql("number"==typeof s);for(var u=new Vp(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Bd(t.Lt,e)})),i=n.mutations.map((function(e){return Bd(t.Lt,e)}));return new lp(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],f=new od((function(t,e){return Xl(t.canonicalString(),e.canonicalString())})),h=0,d=r;h<d.length;h++){var p=d[h],y=fp.key(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(y,fp.PLACEHOLDER))}return f.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),Cp.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return hy(t).get(e).next((function(t){return t?(ql(t.userId===n.userId),Zp(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Cp.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return hy(t).$t({index:lp.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ql(e.batchId>=r),o=Zp(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return hy(t).$t({index:lp.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hy(t).Nt(lp.userMutationsIndex,n).next((function(t){return t.map((function(t){return Zp(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=fp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return dy(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=ap(u);if(s===n.userId&&e.path.isEqual(l))return hy(t).get(c).next((function(t){if(!t)throw Kl();ql(t.userId===n.userId),o.push(Zp(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new od(Xl),i=[];return e.forEach((function(e){var o=fp.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=dy(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=ap(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Cp.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=fp.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new od(Xl);return dy(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=ap(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(hy(t).get(e).next((function(t){if(null===t)throw Kl();ql(t.userId===n.userId),r.push(Zp(n.R,t))})))})),Cp.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return uy(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Cp.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Cp.resolve();var r=IDBKeyRange.lowerBound(fp.prefixForUser(e.userId)),i=[];return dy(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=ap(t[1]);i.push(o)}else r.done()})).next((function(){ql(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return fy(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return py(t).get(this.userId).next((function(t){return t||new cp(e.userId,-1,"")}))},t}();function fy(t,e,n){var r=fp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return dy(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function hy(t){return Mp(t,lp.store)}function dy(t){return Mp(t,fp.store)}function py(t){return Mp(t,cp.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var yy=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),vy=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new yy(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Jl.fromTimestamp(new Yl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return gy(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return ql(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return gy(t).$t((function(a,s){var u=Yp(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Cp.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return gy(t).$t((function(t,n){var r=Yp(n);e(r)}))},t.prototype.Xt=function(t){return my(t).get(mp.key).next((function(t){return ql(null!==t),t}))},t.prototype.Zt=function(t,e){return my(t).put(mp.key,e)},t.prototype.te=function(t,e){return gy(t).put(Jp(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Mf(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return gy(t).$t({range:r,index:vp.queryTargetsIndexName},(function(t,n,r){var o=Yp(n);Vf(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=by(t);return e.forEach((function(e){var a=rp(e.path);i.push(o.put(new gp(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),Cp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=by(t);return Cp.forEach(e,(function(e){var o=rp(e.path);return Cp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=by(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=by(t),i=dd();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=ap(t[1]),o=new mf(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=rp(e.path),r=IDBKeyRange.bound([n],[Zl(n)],!1,!0),i=0;return by(t).$t({index:gp.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return gy(t).get(e).next((function(t){return t?Yp(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gy(t){return Mp(t,vp.store)}function my(t){return Mp(t,mp.store)}function by(t){return Mp(t,gp.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function wy(t){return Io(this,void 0,void 0,(function(){return To(this,(function(e){if(t.code!==Pl.FAILED_PRECONDITION||t.message!==Ip)throw t;return Ml("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function _y(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Xl(n,i);return 0===a?Xl(r,o):a}var Ey=function(){function t(t){this.ne=t,this.buffer=new od(_y),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();_y(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Sy=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ml("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Io(e,void 0,void 0,(function(){var e;return To(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Rp(e=n.sent())?(Ml("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,wy(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Iy=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Cp.resolve(Dl.o);var r=new Ey(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ml("LruGarbageCollector","Garbage collection skipped; disabled"),Cp.resolve(ay)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ml("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),ay):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ml("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),jl()<=Jo.DEBUG&&Ml("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),Cp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Ty=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Iy(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Oy(t,n)},t.prototype.removeReference=function(t,e,n){return Oy(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Oy(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return py(t).Ot((function(r){return fy(t,r,e).next((function(t){return t&&(n=!0),Cp.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),by(t).delete([0,rp(a.path)])}))}));i.push(u)}})).next((function(){return Cp.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Oy(t,e)},t.prototype.we=function(t,e){var n,r=by(t),i=Dl.o;return r.$t({index:gp.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==Dl.o&&e(new mf(ap(n)),i),i=s,n=a):i=Dl.o})).next((function(){i!==Dl.o&&e(new mf(ap(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Oy(t,e){return by(t).put(function(t,e){return new gp(0,rp(t.path),e)}(e,t.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cy=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){$l(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return tf(this.inner)},t}(),Ay=function(){function t(){this.changes=new Cy((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Jl.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Lf.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Cp.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),ky=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Ry(t).put(Dy(e),n)},t.prototype.removeEntry=function(t,e){var n=Ry(t),r=Dy(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Ry(t).get(Dy(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Ry(t).get(Dy(e)).next((function(t){return{document:n.ye(e,t),size:cy(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=ud();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=ud(),i=new nd(mf.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,cy(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Cp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Ry(t).$t({range:r},(function(t,e,r){for(var a=mf.fromSegments(t);o&&mf.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ud(),o=e.path.length+1,a={};if(n.isEqual(Jl.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Wp(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=pp.collectionReadTimeIndex}return Ry(t).$t(a,(function(t,n,a){if(t.length===o){var s=qp(r.R,n);e.path.isPrefixOf(s.key.path)?vh(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new xy(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ny(t).get(yp.key).next((function(t){return ql(!!t),t}))},t.prototype.me=function(t,e){return Ny(t).put(yp.key,e)},t.prototype.ye=function(t,e){if(e){var n=qp(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Jl.min()))return n}return Lf.newInvalidDocument(t)},t}(),xy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Cy((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Eo(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new od((function(t,e){return Xl(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Gp(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=cy(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=Gp(e.Ie.R,Lf.newNoDocument(o,Jl.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Cp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Ay);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ny(t){return Mp(t,yp.store)}function Ry(t){return Mp(t,pp.store)}function Dy(t){return t.path.toArray()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Py=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;ql(n<r&&n>=0&&r<=11);var o=new Ap("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(up.store)}(t),function(t){t.createObjectStore(cp.store,{keyPath:cp.keyPath}),t.createObjectStore(lp.store,{keyPath:lp.keyPath,autoIncrement:!0}).createIndex(lp.userMutationsIndex,lp.userMutationsKeyPath,{unique:!0}),t.createObjectStore(fp.store)}(t),Ly(t),function(t){t.createObjectStore(pp.store)}(t));var a=Cp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(gp.store),t.deleteObjectStore(vp.store),t.deleteObjectStore(mp.store)}(t),Ly(t)),a=a.next((function(){return function(t){var e=t.store(mp.store),n=new mp(0,0,Jl.min().toTimestamp(),0);return e.put(mp.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(lp.store).Nt().next((function(n){t.deleteObjectStore(lp.store),t.createObjectStore(lp.store,{keyPath:lp.keyPath,autoIncrement:!0}).createIndex(lp.userMutationsIndex,lp.userMutationsKeyPath,{unique:!0});var r=e.store(lp.store),i=n.map((function(t){return r.put(t)}));return Cp.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(wp.store,{keyPath:wp.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(yp.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(pp.store);e.createIndex(pp.readTimeIndex,pp.readTimeIndexPath,{unique:!1}),e.createIndex(pp.collectionReadTimeIndex,pp.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(_p.store,{keyPath:_p.keyPath})}(t),function(t){t.createObjectStore(Ep.store,{keyPath:Ep.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(pp.store).$t((function(t,n){e+=cy(n)})).next((function(){var n=new yp(e);return t.store(yp.store).put(yp.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(cp.store),r=t.store(lp.store);return n.Nt().next((function(n){return Cp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(lp.userMutationsIndex,i).next((function(r){return Cp.forEach(r,(function(r){ql(r.userId===n.userId);var i=Zp(e.R,r);return uy(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(gp.store),n=t.store(pp.store);return t.store(mp.store).get(mp.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new nf(n),a=function(t){return[0,rp(t)]}(o);r.push(e.get(a).next((function(n){return n?Cp.resolve():function(n){return e.put(new gp(0,rp(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Cp.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(bp.store,{keyPath:bp.keyPath});var n=e.store(bp.store),r=new ry,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:rp(i)})}};return e.store(pp.store).$t({Ft:!0},(function(t,e){var n=new nf(t);return i(n.popLast())})).next((function(){return e.store(fp.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=ap(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(vp.store);return n.$t((function(t,r){var i=Yp(r),o=Jp(e.R,i);return n.put(o)}))},t}();function Ly(t){t.createObjectStore(gp.store,{keyPath:gp.keyPath}).createIndex(gp.documentTargetsIndex,gp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(vp.store,{keyPath:vp.keyPath}).createIndex(vp.queryTargetsIndexName,vp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(mp.store)}var Fy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jy=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Ll(Pl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ty(this,i),this.Le=n+"main",this.R=new Kp(u),this.Be=new kp(this.Le,11,new Py(this.R)),this.qe=new vy(this.referenceDelegate,this.R),this.Ut=new iy,this.Ue=function(t,e){return new ky(t,e)}(this.R,this.Ut),this.Ke=new $p,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Vl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ll(Pl.FAILED_PRECONDITION,Fy);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Dl(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Io(e,void 0,void 0,(function(){return To(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Io(e,void 0,void 0,(function(){return To(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Io(e,void 0,void 0,(function(){return To(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Vy(e).put(new wp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Rp(e))return Ml("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ml("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return My(t).get(up.key).next((function(t){return Cp.resolve(e.tn(t))}))},t.prototype.en=function(t){return Vy(t).delete(this.clientId)},t.prototype.nn=function(){return Io(this,void 0,void 0,(function(){var t,e,n,r,i=this;return To(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Mp(t,wp.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Cp.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Cp.resolve(!0):My(t).get(up.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Ll(Pl.FAILED_PRECONDITION,Fy);return!1}}return!(!e.networkEnabled||!e.inForeground)||Vy(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ml("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Io(this,void 0,void 0,(function(){var t=this;return To(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[up.store,wp.store],(function(e){var n=new jp(e,Dl.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Vy(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ly.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ml("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Sp,(function(o){return i=new jp(o,r.Ne?r.Ne.next():Dl.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Vl("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Ll(Pl.FAILED_PRECONDITION,Ip);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return My(t).get(up.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ll(Pl.FAILED_PRECONDITION,Fy)}))},t.prototype.Ze=function(t){var e=new up(this.clientId,this.allowTabSynchronization,Date.now());return My(t).put(up.key,e)},t.yt=function(){return kp.yt()},t.prototype.Xe=function(t){var e=this,n=My(t);return n.get(up.key).next((function(t){return e.tn(t)?(Ml("IndexedDbPersistence","Releasing primary lease."),n.delete(up.key)):Cp.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Vl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),!Lo()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Ml("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Vl("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Vl("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function My(t){return Mp(t,up.store)}function Vy(t){return Mp(t,wp.store)}function Uy(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var By=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return mf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):ch(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new mf(e)).next((function(t){var e=ld();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ld();return this.Ut.getCollectionParents(t,i).next((function(a){return Cp.forEach(a,(function(a){var s=function(t,e){return new nh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Lf.newInvalidDocument(c),r=r.insert(c,l)),Uh(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){vh(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=dd(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Wh&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Ky=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=dd(),i=dd(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),qy=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Jl.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(oh(e)||ah(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(jl()<=Jo.DEBUG&&Ml("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),yh(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new od(gh(t));return e.forEach((function(e,r){vh(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return jl()<=Jo.DEBUG&&Ml("QueryEngine","Using full collection scan to execute query:",yh(e)),this.Sn.getDocumentsMatchingQuery(t,e,Jl.min())},t}(),Gy=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new nd(Xl),this.Fn=new Cy((function(t){return Mf(t)}),Vf),this.$n=Jl.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new By(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wy(t,e,n,r){return new Gy(t,e,n,r)}function zy(t,e){return Io(this,void 0,void 0,(function(){var n,r,i,o;return To(this,(function(a){switch(a.label){case 0:return n=Gl(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new By(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=dd(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,f=c.mutations;l<f.length;l++){var h=f[l];a=a.add(h.key)}}for(var d=0,p=e;d<p.length;d++){var y=p[d];r.push(y.batchId);for(var v=0,g=y.mutations;v<g.length;v++){var m=g[v];a=a.add(m.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Xy(t,e){var n=Gl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Cp.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);ql(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Hy(t){var e=Gl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Zy(t,e){var n=Gl(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return ql(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=ud();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(function(t,e,n,r,i){var o=dd();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ud();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Jl.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Ml("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Jl.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return Cp.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.kn=i,t}))}function Yy(t,e){var n=Gl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Jy(t,e){var n=Gl(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Cp.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Bp(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function Qy(t,e,n){return Io(this,void 0,void 0,(function(){var r,i,o,a;return To(this,(function(s){switch(s.label){case 0:r=Gl(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Rp(a=s.sent()))throw a;return Ml("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function $y(t,e,n){var r=Gl(t),i=Jl.min(),o=dd();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Gl(t),i=r.Fn.get(n);return void 0!==i?Cp.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,fh(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Jl.min(),n?o:dd())})).next((function(t){return{documents:t,Bn:o}}))}))}function tv(t,e){var n=Gl(t),r=Gl(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function ev(t){var e=Gl(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Gl(t),i=ud(),o=Wp(n),a=Ry(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:pp.readTimeIndex,range:s},(function(t,e){var n=qp(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:zp(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function nv(t){return Io(this,void 0,void 0,(function(){var e;return To(this,(function(n){return[2,(e=Gl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Ry(t),n=Jl.min();return e.$t({index:pp.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=zp(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var rv=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Cp.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Nd(n.createTime)}),Cp.resolve()},t.prototype.getNamedQuery=function(t,e){return Cp.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Qp(t.bundledQuery),readTime:Nd(t.readTime)}}(e)),Cp.resolve()},t}(),iv=function(){function t(){this.Wn=new od(ov.Gn),this.zn=new od(ov.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new ov(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new ov(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new mf(new nf([])),r=new ov(n,t),i=new ov(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new mf(new nf([])),n=new ov(e,t),r=new ov(e,t+1),i=dd();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new ov(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),ov=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return mf.comparator(t.key,e.key)||Xl(t.ns,e.ns)},t.Hn=function(t,e){return Xl(t.ns,e.ns)||mf.comparator(t.key,e.key)},t}(),av=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new od(ov.Gn)}return t.prototype.checkEmpty=function(t){return Cp.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Vp(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new ov(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Cp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Cp.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Cp.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Cp.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Cp.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new ov(e,0),i=new ov(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Cp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new od(Xl);return e.forEach((function(t){var e=new ov(t,0),i=new ov(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Cp.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;mf.isDocumentKey(i)||(i=i.child(""));var o=new ov(new mf(i),0),a=new od(Xl);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),Cp.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;ql(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Cp.forEach(e.mutations,(function(i){var o=new ov(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new ov(e,0),r=this.rs.firstAfterOrEqual(n);return Cp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Cp.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),sv=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new nd(mf.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Cp.resolve(n?n.document.clone():Lf.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ud();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Lf.newInvalidDocument(t))})),Cp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ud(),i=new mf(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||vh(e,c)&&(r=r.insert(c.key,c.clone()))}return Cp.resolve(r)},t.prototype.fs=function(t,e){return Cp.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new uv(this)},t.prototype.getSize=function(t){return Cp.resolve(this.size)},t}(),uv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Eo(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Cp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Ay),cv=function(){function t(t){this.persistence=t,this.ds=new Cy((function(t){return Mf(t)}),Vf),this.lastRemoteSnapshotVersion=Jl.min(),this.highestTargetId=0,this.ws=0,this._s=new iv,this.targetCount=0,this.ys=yy.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Cp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Cp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Cp.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Cp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Cp.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new yy(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Cp.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Cp.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Cp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Cp.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Cp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Cp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Cp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Cp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Cp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Cp.resolve(n)},t.prototype.containsKey=function(t,e){return Cp.resolve(this._s.containsKey(e))},t}(),lv=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Dl(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new cv(this),this.Ut=new ny,this.Ue=function(t,e){return new sv(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Kp(e),this.Ke=new rv(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new av(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ml("MemoryPersistence","Starting transaction:",t);var i=new fv(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Cp.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),fv=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Eo(e,t),e}(Tp),hv=function(){function t(t){this.persistence=t,this.As=new iv,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Kl()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Cp.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Cp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Cp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cp.forEach(this.vs,(function(r){var i=mf.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Cp.or([function(){return Cp.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),dv=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pv(t,e){return"firestore_clients_"+t+"_"+e}function yv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function vv(t,e){return"firestore_targets_"+t+"_"+e}dv.UNAUTHENTICATED=new dv(null),dv.GOOGLE_CREDENTIALS=new dv("google-credentials-uid"),dv.FIRST_PARTY=new dv("first-party-uid"),dv.MOCK_USER=new dv("mock-user");var gv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ll(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Vl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),mv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ll(i.error.code,i.error.message)),o?new t(e,i.state,r):(Vl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),bv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=yd(),a=0;i&&a<r.activeTargetIds.length;++a)i=gf(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Vl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),wv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Vl("SharedClientState","Failed to parse online state: "+e),null)},t}(),_v=function(){function t(){this.activeTargetIds=yd()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ev=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new nd(Xl),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=pv(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new _v),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Io(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l,f=this;return To(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(pv(this.persistenceKey,r)))&&(o=bv.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)l=c[u],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(vv(this.persistenceKey,t));if(n){var r=mv.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(vv(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ml("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ml("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ml("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ml("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Vl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Io(e,void 0,void 0,(function(){var t,e,r,i,o,a;return To(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=Dl.o;if(null!=t)try{var n=JSON.parse(t);ql("number"==typeof n),e=n}catch(t){Vl("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Dl.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new gv(this.currentUser,t,e,n),i=yv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=yv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=vv(this.persistenceKey,t),i=new mv(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return bv.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return gv.Vs(new dv(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return mv.Vs(r,e)},t.prototype.js=function(t){return wv.Vs(t)},t.prototype.ii=function(t){return Io(this,void 0,void 0,(function(){return To(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ml("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=yd();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Sv=function(){function t(){this.li=new _v,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new _v,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Iv=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Tv=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ml("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ml("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ov={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Cv=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Av=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Eo(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var a=new Rl;a.listenOnce(Ol.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Tl.NO_ERROR:var e=a.getResponseJson();Ml("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Tl.TIMEOUT:Ml("Connection",'RPC "'+t+'" timed out'),o(new Ll(Pl.DEADLINE_EXCEEDED,"Request time out"));break;case Tl.HTTP_ERROR:var n=a.getStatus();if(Ml("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Pl).indexOf(e)>=0?e:Pl.UNKNOWN}(r.status);o(new Ll(s,r.message))}else o(new Ll(Pl.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ll(Pl.UNAVAILABLE,"Connection failed."));break;default:Kl()}}finally{Ml("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new wl,o=du(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new xl({})),this.ki(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Po())||"object"==typeof navigator&&"ReactNative"===navigator.product||Po().indexOf("Electron/")>=0||function(){var t=Po();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||Po().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Ml("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,l=!1,f=new Cv({Ei:function(t){l?Ml("Connection","Not sending because WebChannel is closed:",t):(c||(Ml("Connection","Opening WebChannel transport."),u.open(),c=!0),Ml("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(u,Nl.EventType.OPEN,(function(){l||Ml("Connection","WebChannel transport opened.")})),h(u,Nl.EventType.CLOSE,(function(){l||(l=!0,Ml("Connection","WebChannel transport closed"),f.Vi())})),h(u,Nl.EventType.ERROR,(function(t){l||(l=!0,Ul("Connection","WebChannel transport errored:",t),f.Vi(new Ll(Pl.UNAVAILABLE,"The operation could not be completed")))})),h(u,Nl.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];ql(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ml("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Zh[t];if(void 0!==e)return ed(e)}(o),s=i.message;void 0===a&&(a=Pl.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,f.Vi(new Ll(a,s)),u.close()}else Ml("Connection","WebChannel received:",n),f.Si(n)}})),h(o,Cl.STAT_EVENT,(function(t){t.stat===Al?Ml("Connection","Detected buffering proxy"):t.stat===kl&&Ml("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Pi()}),0),f},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ml("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Ml("RestConnection","Received: ",t),t}),(function(e){throw Ul("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Ov[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kv(){return"undefined"!=typeof window?window:null}function xv(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nv(t){return new Cd(t,!0)}var Rv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Ml("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Dv=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Rv(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Io(this,void 0,void 0,(function(){return To(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Io(this,void 0,void 0,(function(){return To(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Io(this,void 0,void 0,(function(){return To(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Pl.RESOURCE_EXHAUSTED?(Vl(e.toString()),Vl("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Pl.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Ll(Pl.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Io(t,void 0,void 0,(function(){return To(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Ml("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Ml("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Pv=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return Eo(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Kl()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(ql(void 0===e||"string"==typeof e),sf.fromBase64String(e||"")):(ql(void 0===e||e instanceof Uint8Array),sf.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Pl.UNKNOWN:ed(t.code);return new Ll(e,t.message||"")}(s);n=new wd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ld(t,r.document.name),o=Nd(r.document.updateTime);var s=new Df({mapValue:{fields:r.document.fields}}),u=(a=Lf.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new md(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ld(t,r.document),o=r.readTime?Nd(r.readTime):Jl.min(),s=Lf.newNoDocument(i,o),a=r.removedTargetIds||[],n=new md([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ld(t,r.document),o=r.removedTargetIds||[],n=new md([],o,i,null);else{if(!("filter"in e))return Kl();e.filter;var l=e.filter;l.targetId,r=l.count||0,i=new $h(r),o=l.targetId,n=new bd(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Jl.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Jl.min():e.readTime?Nd(e.readTime):Jl.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Md(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Uf(r)?{documents:qd(t,r)}:{query:Gd(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=kd(t,e.resumeToken):e.snapshotVersion.compareTo(Jl.min())>0&&(n.readTime=Ad(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Kl()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Md(this.R),e.removeTarget=t,this.cr(e)},e}(Dv),Lv=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return Eo(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(ql(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(ql(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Nd(t.updateTime):Nd(e);return n.isEqual(Jl.min())&&(n=Nd(e)),new Lh(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Nd(t.commitTime);return this.listener.Tr(n,e)}return ql(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Md(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Bd(e.R,t)}))};this.cr(n)},e}(Dv),Fv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Eo(e,t),e.prototype.br=function(){if(this.Rr)throw new Ll(Pl.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Pl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ll(Pl.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Pl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ll(Pl.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),jv=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Vl(e),this.Vr=!1):Ml("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Mv=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Io(o,void 0,void 0,(function(){return To(this,(function(t){switch(t.label){case 0:return Xv(this)?(Ml("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Io(this,void 0,void 0,(function(){var e;return To(this,(function(n){switch(n.label){case 0:return(e=Gl(t)).Or.add(4),[4,Uv(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Vv(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new jv(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vv(t){return Io(this,void 0,void 0,(function(){var e,n;return To(this,(function(r){switch(r.label){case 0:if(!Xv(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Uv(t){return Io(this,void 0,void 0,(function(){var e,n;return To(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Bv(t,e){var n=Gl(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),zv(n)?Wv(n):ug(n).er()&&qv(n,e))}function Kv(t,e){var n=Gl(t),r=ug(n);n.$r.delete(e),r.er()&&Gv(n,e),0===n.$r.size&&(r.er()?r.ir():Xv(n)&&n.Br.set("Unknown"))}function qv(t,e){t.qr.U(e.targetId),ug(t).mr(e)}function Gv(t,e){t.qr.U(e),ug(t).yr(e)}function Wv(t){t.qr=new Ed({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),ug(t).start(),t.Br.Sr()}function zv(t){return Xv(t)&&!ug(t).tr()&&t.$r.size>0}function Xv(t){return 0===Gl(t).Or.size}function Hv(t){t.qr=void 0}function Zv(t){return Io(this,void 0,void 0,(function(){return To(this,(function(e){return t.$r.forEach((function(e,n){qv(t,e)})),[2]}))}))}function Yv(t,e){return Io(this,void 0,void 0,(function(){return To(this,(function(n){return Hv(t),zv(t)?(t.Br.Nr(e),Wv(t)):t.Br.set("Unknown"),[2]}))}))}function Jv(t,e,n){return Io(this,void 0,void 0,(function(){var r,i,o;return To(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof wd&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Io(this,void 0,void 0,(function(){var n,r,i,o;return To(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Ml("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Qv(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof md?t.qr.X(e):e instanceof bd?t.qr.rt(e):t.qr.et(e),n.isEqual(Jl.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Hy(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(sf.EMPTY_BYTE_STRING,n.snapshotVersion)),Gv(t,e);var r=new Bp(n.target,e,1,n.sequenceNumber);qv(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Ml("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Qv(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Qv(t,e,n){return Io(this,void 0,void 0,(function(){var r=this;return To(this,(function(i){switch(i.label){case 0:if(!Rp(e))throw e;return t.Or.add(1),[4,Uv(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Hy(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Io(r,void 0,void 0,(function(){return To(this,(function(e){switch(e.label){case 0:return Ml("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Vv(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function $v(t,e){return e().catch((function(n){return Qv(t,n,e)}))}function tg(t){return Io(this,void 0,void 0,(function(){var e,n,r,i,o;return To(this,(function(a){switch(a.label){case 0:e=Gl(t),n=cg(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Xv(t)&&t.Fr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Yy(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=cg(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Qv(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return eg(e)&&ng(e),[2]}}))}))}function eg(t){return Xv(t)&&!cg(t).tr()&&t.Fr.length>0}function ng(t){cg(t).start()}function rg(t){return Io(this,void 0,void 0,(function(){return To(this,(function(e){return cg(t).Ar(),[2]}))}))}function ig(t){return Io(this,void 0,void 0,(function(){var e,n,r,i;return To(this,(function(o){for(e=cg(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function og(t,e,n){return Io(this,void 0,void 0,(function(){var r,i;return To(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=Up.from(r,e,n),[4,$v(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,tg(t)];case 2:return o.sent(),[2]}}))}))}function ag(t,e){return Io(this,void 0,void 0,(function(){return To(this,(function(n){switch(n.label){case 0:return e&&cg(t).pr?[4,function(t,e){return Io(this,void 0,void 0,(function(){var n,r;return To(this,(function(i){switch(i.label){case 0:return td(r=e.code)&&r!==Pl.ABORTED?(n=t.Fr.shift(),cg(t).sr(),[4,$v(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,tg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return eg(t)&&ng(t),[2]}}))}))}function sg(t,e){return Io(this,void 0,void 0,(function(){var n;return To(this,(function(r){switch(r.label){case 0:return n=Gl(t),e?(n.Or.delete(2),[4,Vv(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Uv(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function ug(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Gl(t);return r.br(),new Pv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Zv.bind(null,t),Ri:Yv.bind(null,t),_r:Jv.bind(null,t)}),t.Mr.push((function(n){return Io(e,void 0,void 0,(function(){return To(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),zv(t)?Wv(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Hv(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function cg(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Gl(t);return r.br(),new Lv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:rg.bind(null,t),Ri:ag.bind(null,t),Ir:ig.bind(null,t),Tr:og.bind(null,t)}),t.Mr.push((function(n){return Io(e,void 0,void 0,(function(){return To(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,tg(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Ml("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var lg=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Op,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ll(Pl.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function fg(t,e){if(Vl("AsyncQueue",e+": "+t),Rp(t))return new Ll(Pl.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var hg=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||mf.comparator(e.key,n.key)}:function(t,e){return mf.comparator(t.key,e.key)},this.keyedMap=ld(),this.sortedSet=new nd(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),dg=function(){function t(){this.Qr=new nd(mf.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Kl():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),pg=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,hg.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&dh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),yg=function(){this.Wr=void 0,this.listeners=[]},vg=function(){this.queries=new Cy((function(t){return ph(t)}),dh),this.onlineState="Unknown",this.Gr=new Set};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gg(t,e){return Io(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return To(this,(function(c){switch(c.label){case 0:if(n=Gl(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new yg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=fg(s,"Initialization of query '"+yh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&_g(n),[2]}}))}))}function mg(t,e){return Io(this,void 0,void 0,(function(){var n,r,i,o,a;return To(this,(function(s){return n=Gl(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function bg(t,e){for(var n=Gl(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&_g(n)}function wg(t,e,n){var r=Gl(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function _g(t){t.Gr.forEach((function(t){t.next()}))}var Eg=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new pg(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=pg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Sg=function(t){this.key=t},Ig=function(t){this.key=t},Tg=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=dd(),this.mutatedKeys=dd(),this.lo=gh(t),this.fo=new hg(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new dg,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=oh(this.query)&&i.size===this.query.limit?i.last():null,c=ah(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),f=vh(n.query,e)?e:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.yo(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.lo(f,u)>0||c&&n.lo(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(a=a.add(f),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),oh(this.query)||ah(this.query))for(;a.size>this.query.limit;){var l=oh(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kl()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new pg(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new dg,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=dd(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Ig(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Sg(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=dd();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return pg.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Og=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Cg=function(t){this.key=t,this.bo=!1},Ag=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Cy((function(t){return ph(t)}),dh),this.Vo=new Map,this.So=new Set,this.Do=new nd(mf.comparator),this.Co=new Map,this.No=new iv,this.xo={},this.ko=new Map,this.Fo=yy.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kg(t,e){return Io(this,void 0,void 0,(function(){var n,r,i,o,a,s;return To(this,(function(u){switch(u.label){case 0:return n=im(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Jy(n.localStore,fh(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,xg(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&Bv(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function xg(t,e,n,r){return Io(this,void 0,void 0,(function(){var i,o,a,s,u,c;return To(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Io(this,void 0,void 0,(function(){var i,o,a;return To(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,$y(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(qg(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,$y(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Tg(e,i.Bn),a=o._o(i.documents),s=gd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),qg(t,n,u.To),c=new Og(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Ng(t,e){return Io(this,void 0,void 0,(function(){var n,r,i;return To(this,(function(o){switch(o.label){case 0:return n=Gl(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!dh(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Qy(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Kv(n.remoteStore,r.targetId),Bg(n,r.targetId)})).catch(wy)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Bg(n,r.targetId),[4,Qy(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Rg(t,e,n){return Io(this,void 0,void 0,(function(){var r,i,o,a;return To(this,(function(s){switch(s.label){case 0:r=om(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Gl(t),i=Yl.now(),o=e.reduce((function(t,e){return t.add(e.key)}),dd());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=Bh(c,n.get(c.key));null!=l&&a.push(new Wh(c.key,l,Pf(l.value.mapValue),Fh.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new nd(Xl)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,zg(r,i.changes)];case 3:return s.sent(),[4,tg(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=fg(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Dg(t,e){return Io(this,void 0,void 0,(function(){var n,r;return To(this,(function(i){switch(i.label){case 0:n=Gl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Zy(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(ql(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?ql(r.bo):t.removedDocuments.size>0&&(ql(r.bo),r.bo=!1))})),[4,zg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,wy(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Pg(t,e,n){var r=Gl(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Gl(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&_g(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Lg(t,e,n){return Io(this,void 0,void 0,(function(){var r,i,o,a,s,u;return To(this,(function(c){switch(c.label){case 0:return(r=Gl(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new nd(mf.comparator)).insert(o,Lf.newNoDocument(o,Jl.min())),s=dd().add(o),u=new vd(Jl.min(),new Map,new od(Xl),a,s),[4,Dg(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Wg(r),[3,4];case 2:return[4,Qy(r.localStore,e,!1).then((function(){return Bg(r,e,n)})).catch(wy)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Fg(t,e){return Io(this,void 0,void 0,(function(){var n,r,i;return To(this,(function(o){switch(o.label){case 0:n=Gl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Xy(n.localStore,e)];case 2:return i=o.sent(),Ug(n,r,null),Vg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,zg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,wy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function jg(t,e,n){return Io(this,void 0,void 0,(function(){var r,i;return To(this,(function(o){switch(o.label){case 0:r=Gl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Gl(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return ql(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Ug(r,e,n),Vg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,zg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,wy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Mg(t,e){return Io(this,void 0,void 0,(function(){var n,r,i,o,a;return To(this,(function(s){switch(s.label){case 0:Xv((n=Gl(t)).remoteStore)||Ml("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Gl(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=s.sent(),a=fg(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Vg(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Ug(t,e,n){var r=Gl(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Bg(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Kg(t,e)}))}function Kg(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Kv(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Wg(t))}function qg(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Sg?(t.No.addReference(o.key,e),Gg(t,o)):o instanceof Ig?(Ml("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Kg(t,o.key)):Kl()}}function Gg(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ml("SyncEngine","New document in limbo: "+n),t.So.add(r),Wg(t))}function Wg(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new mf(nf.fromString(e)),r=t.Fo.next();t.Co.set(r,new Cg(n)),t.Do=t.Do.insert(n,r),Bv(t.remoteStore,new Bp(fh(ih(n.path)),r,2,Dl.o))}}function zg(t,e,n){return Io(this,void 0,void 0,(function(){var r,i,o,a;return To(this,(function(s){switch(s.label){case 0:return r=Gl(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ky.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return Io(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return To(this,(function(f){switch(f.label){case 0:n=Gl(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Cp.forEach(e,(function(e){return Cp.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Cp.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!Rp(r=f.sent()))throw r;return Ml("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.kn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.kn=n.kn.insert(s,l));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Xg(t,e){return Io(this,void 0,void 0,(function(){var n,r;return To(this,(function(i){switch(i.label){case 0:return(n=Gl(t)).currentUser.isEqual(e)?[3,3]:(Ml("SyncEngine","User change. New user:",e.toKey()),[4,zy(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new Ll(Pl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,zg(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Hg(t,e){var n=Gl(t),r=n.Co.get(e);if(r&&r.bo)return dd().add(r.key);var i=dd(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Zg(t,e){return Io(this,void 0,void 0,(function(){var n,r,i;return To(this,(function(o){switch(o.label){case 0:return[4,$y((n=Gl(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&qg(n,e.targetId,i.To),i)]}}))}))}function Yg(t){return Io(this,void 0,void 0,(function(){var e;return To(this,(function(n){return[2,ev((e=Gl(t)).localStore).then((function(t){return zg(e,t)}))]}))}))}function Jg(t,e,n,r){return Io(this,void 0,void 0,(function(){var i,o;return To(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=Gl(t),r=Gl(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Cp.resolve(null)}))}))}((i=Gl(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,tg(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ug(i,e,r||null),Vg(i,e),function(t,e){Gl(Gl(t)._n).Gt(e)}(i.localStore,e)):Kl(),a.label=4;case 4:return[4,zg(i,o)];case 5:return a.sent(),[3,7];case 6:Ml("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function Qg(t,e){return Io(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return To(this,(function(l){switch(l.label){case 0:return im(n=Gl(t)),om(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,$g(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,sg(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],Bv(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Bg(n,e),Qy(n.localStore,e,!0)})),Kv(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,$g(n,u)];case 5:return l.sent(),function(t){var e=Gl(t);e.Co.forEach((function(t,n){Kv(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new nd(mf.comparator)}(n),n.$o=!1,[4,sg(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))}function $g(t,e,n){return Io(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,f,h,d,p,y;return To(this,(function(v){switch(v.label){case 0:n=Gl(t),r=[],i=[],o=0,a=e,v.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,Jy(n.localStore,fh(c[0]))]:[3,7]):[3,13];case 2:u=v.sent(),l=0,f=c,v.label=3;case 3:return l<f.length?(h=f[l],d=n.Po.get(h),[4,Zg(n,d)]):[3,6];case 4:(p=v.sent()).snapshot&&i.push(p.snapshot),v.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,tv(n.localStore,s)];case 8:return y=v.sent(),[4,Jy(n.localStore,y)];case 9:return u=v.sent(),[4,xg(n,tm(y),s,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function tm(t){return rh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function em(t){var e=Gl(t);return Gl(Gl(e.localStore).persistence).fn()}function nm(t,e,n,r){return Io(this,void 0,void 0,(function(){var i,o,a;return To(this,(function(s){switch(s.label){case 0:return(i=Gl(t)).$o?(Ml("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ev(i.localStore)];case 3:return o=s.sent(),a=vd.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,zg(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Qy(i.localStore,e,!0)];case 6:return s.sent(),Bg(i,e,r),[3,8];case 7:Kl(),s.label=8;case 8:return[2]}}))}))}function rm(t,e,n){return Io(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,f,h;return To(this,(function(d){switch(d.label){case 0:if(!(r=im(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(Ml("SyncEngine","Adding an already active target "+a),[3,5]):[4,tv(r.localStore,a)]):[3,6];case 2:return s=d.sent(),[4,Jy(r.localStore,s)];case 3:return u=d.sent(),[4,xg(r,tm(s),u.targetId,!1)];case 4:d.sent(),Bv(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return To(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Qy(r.localStore,t,!1).then((function(){Kv(r.remoteStore,t),Bg(r,t)})).catch(wy)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,d.label=7;case 7:return l<f.length?(h=f[l],[5,c(h)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function im(t){var e=Gl(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lg.bind(null,e),e.vo._r=bg.bind(null,e.eventManager),e.vo.Mo=wg.bind(null,e.eventManager),e}function om(t){var e=Gl(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jg.bind(null,e),e}var am=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Io(this,void 0,void 0,(function(){return To(this,(function(e){switch(e.label){case 0:return this.R=Nv(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Wy(this.persistence,new qy,t.initialUser,this.R)},t.prototype.qo=function(t){return new lv(hv.bs,this.R)},t.prototype.Bo=function(t){return new Sv},t.prototype.terminate=function(){return Io(this,void 0,void 0,(function(){return To(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),sm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Eo(e,t),e.prototype.initialize=function(e){return Io(this,void 0,void 0,(function(){var n=this;return To(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,nv(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,om(this.Qo.syncEngine)];case 4:return r.sent(),[4,tg(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Wy(this.persistence,new qy,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Sy(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Uy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sy.withCacheSize(this.cacheSizeBytes):sy.DEFAULT;return new jy(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,kv(),xv(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Sv},e}(am),um=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Eo(e,t),e.prototype.initialize=function(e){return Io(this,void 0,void 0,(function(){var n,r=this;return To(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Ev?(this.sharedClientState.syncEngine={ui:Jg.bind(null,n),ai:nm.bind(null,n),hi:rm.bind(null,n),fn:em.bind(null,n),ci:Yg.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Io(r,void 0,void 0,(function(){return To(this,(function(e){switch(e.label){case 0:return[4,Qg(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=kv();if(!Ev.yt(e))throw new Ll(Pl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Uy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ev(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(sm),cm=function(){function t(){}return t.prototype.initialize=function(t,e){return Io(this,void 0,void 0,(function(){var n=this;return To(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Pg(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Xg.bind(null,this.syncEngine),[4,sg(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new vg},t.prototype.createDatastore=function(t){var e,n=Nv(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Av(e));return function(t,e,n){return new Fv(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Pg(a.syncEngine,t,0)},o=Tv.yt()?new Tv:new Iv,new Mv(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Ag(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Io(this,void 0,void 0,(function(){var e;return To(this,(function(n){switch(n.label){case 0:return e=Gl(t),Ml("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Uv(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),lm=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),fm=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Io(this,void 0,void 0,(function(){var e,n=this;return To(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ll(Pl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Io(this,void 0,void 0,(function(){var n,r,i,o,a,s;return To(this,(function(u){switch(u.label){case 0:return n=Gl(t),r=Md(n.R)+"/documents",i={documents:e.map((function(t){return Pd(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){ql(!!e.found),e.found.name,e.found.updateTime;var n=Ld(t,e.found.name),r=Nd(e.found.updateTime),i=new Df({mapValue:{fields:e.found.fields}});return Lf.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){ql(!!e.missing),ql(!!e.readTime);var n=Ld(t,e.missing),r=Nd(e.readTime);return Lf.newNoDocument(n,r)}(t,e):Kl()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());ql(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Jh(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Io(this,void 0,void 0,(function(){var t,e=this;return To(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=mf.fromPath(n);e.mutations.push(new Qh(r,e.precondition(r)))})),[4,function(t,e){return Io(this,void 0,void 0,(function(){var n,r,i;return To(this,(function(o){switch(o.label){case 0:return n=Gl(t),r=Md(n.R)+"/documents",i={writes:e.map((function(t){return Bd(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Kl();e=Jl.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ll(Pl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Fh.updateTime(e):Fh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Jl.min()))throw new Ll(Pl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fh.updateTime(e)}return Fh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),hm=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Rv(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Io(t,void 0,void 0,(function(){var t,e,n=this;return To(this,(function(r){return t=new fm(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!yf(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!td(e)}return!1},t}(),dm=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=dv.UNAUTHENTICATED,this.clientId=zl.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Io(r,void 0,void 0,(function(){return To(this,(function(e){switch(e.label){case 0:return Ml("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Io(this,void 0,void 0,(function(){return To(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ll(Pl.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Op;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Io(t,void 0,void 0,(function(){var t,n;return To(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=fg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function pm(t,e){return Io(this,void 0,void 0,(function(){var n,r,i=this;return To(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ml("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Io(i,void 0,void 0,(function(){return To(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,zy(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function ym(t,e){return Io(this,void 0,void 0,(function(){var n,r;return To(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,vm(t)];case 1:return n=i.sent(),Ml("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Io(this,void 0,void 0,(function(){var n,r;return To(this,(function(i){switch(i.label){case 0:return(n=Gl(t)).asyncQueue.verifyOperationInProgress(),Ml("RemoteStore","RemoteStore received new credentials"),r=Xv(n),n.Or.add(3),[4,Uv(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Vv(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function vm(t){return Io(this,void 0,void 0,(function(){return To(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ml("FirestoreClient","Using default OfflineComponentProvider"),[4,pm(t,new am)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function gm(t){return Io(this,void 0,void 0,(function(){return To(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ml("FirestoreClient","Using default OnlineComponentProvider"),[4,ym(t,new cm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function mm(t){return vm(t).then((function(t){return t.persistence}))}function bm(t){return vm(t).then((function(t){return t.localStore}))}function wm(t){return gm(t).then((function(t){return t.remoteStore}))}function _m(t){return gm(t).then((function(t){return t.syncEngine}))}function Em(t){return Io(this,void 0,void 0,(function(){var e,n;return To(this,(function(r){switch(r.label){case 0:return[4,gm(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=kg.bind(null,e.syncEngine),n.onUnlisten=Ng.bind(null,e.syncEngine),n)]}}))}))}function Sm(t,e,n){var r=this;void 0===n&&(n={});var i=new Op;return t.asyncQueue.enqueueAndForget((function(){return Io(r,void 0,void 0,(function(){var r;return To(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new lm({next:function(o){e.enqueueAndForget((function(){return mg(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Ll(Pl.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Ll(Pl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new Eg(ih(n.path),o,{includeMetadataChanges:!0,so:!0});return gg(t,a)},[4,Em(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Im(t,e,n){var r=this;void 0===n&&(n={});var i=new Op;return t.asyncQueue.enqueueAndForget((function(){return Io(r,void 0,void 0,(function(){var r;return To(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new lm({next:function(n){e.enqueueAndForget((function(){return mg(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Ll(Pl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new Eg(n,o,{includeMetadataChanges:!0,so:!0});return gg(t,a)},[4,Em(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Tm=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Om=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Cm=new Map,Am=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},km=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(dv.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),xm=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Nm=function(){function t(t){var e=this;this.currentUser=dv.UNAUTHENTICATED,this.oc=new Op,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Ml("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Ml("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Ml("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ql("string"==typeof n.accessToken),new Am(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return Io(n,void 0,void 0,(function(){return To(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return ql(null===t||"string"==typeof t),new dv(t)},t}(),Rm=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=dv.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Dm=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Rm(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(dv.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Pm(t,e,n){if(!n)throw new Ll(Pl.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Lm(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Fm(t,e,n,r){if(!0===e&&!0===r)throw new Ll(Pl.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function jm(t){if(!mf.isDocumentKey(t))throw new Ll(Pl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Mm(t){if(mf.isDocumentKey(t))throw new Ll(Pl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Vm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Kl()}function Um(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ll(Pl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Vm(t);throw new Ll(Pl.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Bm(t,e){if(e<=0)throw new Ll(Pl.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Km=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ll(Pl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ll(Pl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Fm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),qm=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Km({}),this._settingsFrozen=!1,t instanceof Om?(this._databaseId=t,this._credentials=new km):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ll(Pl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Om(t.options.projectId)}(t),this._credentials=new Nm(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ll(Pl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ll(Pl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Km(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new km;switch(t.type){case"gapi":var e=t.client;return ql(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Dm(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ll(Pl.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Cm.get(this))&&(Ml("ComponentProvider","Removing Datastore"),Cm.delete(this),t.terminate()),Promise.resolve();var t},t}(),Gm=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new zm(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Wm=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),zm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ih(r))||this)._path=r,i.type="collection",i}return Eo(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Gm(this.firestore,null,new mf(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Wm);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Go(t),Pm("collection","path",e),t instanceof qm)return Mm(n=nf.fromString.apply(nf,Ao([e],r))),new zm(t,null,n);if(!(t instanceof Gm||t instanceof zm))throw new Ll(Pl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Mm(n=nf.fromString.apply(nf,Ao([t.path],r)).child(nf.fromString(e))),new zm(t.firestore,null,n)}function Hm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Go(t),1===arguments.length&&(e=zl.u()),Pm("doc","path",e),t instanceof qm)return jm(n=nf.fromString.apply(nf,Ao([e],r))),new Gm(t,null,new mf(n));if(!(t instanceof Gm||t instanceof zm))throw new Ll(Pl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return jm(n=t._path.child(nf.fromString.apply(nf,Ao([e],r)))),new Gm(t.firestore,t instanceof zm?t.converter:null,new mf(n))}function Zm(t,e){return t=Go(t),e=Go(e),(t instanceof Gm||t instanceof zm)&&(e instanceof Gm||e instanceof zm)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ym(t,e){return t=Go(t),e=Go(e),t instanceof Wm&&e instanceof Wm&&t.firestore===e.firestore&&dh(t._query,e._query)&&t.converter===e.converter
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Jm=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Rv(this,"async_queue_retry"),this.Ic=function(){var e=xv();e&&Ml("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=xv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=xv();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new Op;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return Io(this,void 0,void 0,(function(){var t,e=this;return To(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Rp(t=n.sent()))throw t;return Ml("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Vl("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=lg.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Kl()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return Io(this,void 0,void 0,(function(){var t;return To(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Qm(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var $m=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Jm,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Eo(e,t),e.prototype._terminate=function(){return this._firestoreClient||eb(this),this._firestoreClient.terminate()},e}(qm);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function tb(t){return t._firestoreClient||eb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function eb(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Tm(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new dm(t._credentials,t._queue,r)}function nb(t,e,n){var r=this,i=new Op;return t.asyncQueue.enqueue((function(){return Io(r,void 0,void 0,(function(){var r;return To(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,pm(t,n)];case 1:return o.sent(),[4,ym(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Pl.FAILED_PRECONDITION||t.code===Pl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function rb(t){if(t._initialized||t._terminated)throw new Ll(Pl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ib=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new of(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),ob=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(sf.fromBase64String(e))}catch(e){throw new Ll(Pl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(sf.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ab=function(t){this._methodName=t},sb=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ll(Pl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ll(Pl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Xl(this._lat,t._lat)||Xl(this._long,t._long)},t}(),ub=/^__.*__$/,cb=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Wh(t,this.data,this.fieldMask,e,this.fieldTransforms):new Gh(t,this.data,e,this.fieldTransforms)},t}(),lb=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Wh(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function fb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kl()}}var hb=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Rb(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(fb(this.Nc)&&ub.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),db=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Nv(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new hb({Nc:t,methodName:e,qc:n,path:of.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function pb(t){var e=t._freezeSettings(),n=Nv(t._databaseId);return new db(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yb(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Ab("Data must be an object, but it was:",a,r);var s,u,c=Ob(r,a);if(o.merge)s=new af(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],f=0,h=o.mergeFields;f<h.length;f++){var d=kb(e,h[f],n);if(!a.contains(d))throw new Ll(Pl.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Db(l,d)||l.push(d)}s=new af(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new cb(new Df(c),s,u)}var vb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Eo(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ab);function gb(t,e,n){return new hb({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var mb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Eo(e,t),e.prototype._toFieldTransform=function(t){return new Ph(t.path,new Oh)},e.prototype.isEqual=function(t){return t instanceof e},e}(ab),bb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Eo(e,t),e.prototype._toFieldTransform=function(t){var e=gb(this,t,!0),n=this.Kc.map((function(t){return Tb(t,e)})),r=new Ch(n);return new Ph(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ab),wb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Eo(e,t),e.prototype._toFieldTransform=function(t){var e=gb(this,t,!0),n=this.Kc.map((function(t){return Tb(t,e)})),r=new kh(n);return new Ph(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ab),_b=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Eo(e,t),e.prototype._toFieldTransform=function(t){var e=new Nh(t.R,_h(t.R,this.Qc));return new Ph(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ab);function Eb(t,e,n,r){var i=t.Uc(1,e,n);Ab("Data must be an object, but it was:",i,r);var o=[],a=Df.empty();$l(r,(function(t,r){var s=Nb(e,t,n);r=Go(r);var u=i.Oc(s);if(r instanceof vb)o.push(s);else{var c=Tb(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new af(o);return new lb(a,s,i.fieldTransforms)}function Sb(t,e,n,r,i,o){var a=t.Uc(1,e,n),s=[kb(e,r,n)],u=[i];if(o.length%2!=0)throw new Ll(Pl.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(kb(e,o[c])),u.push(o[c+1]);for(var l=[],f=Df.empty(),h=s.length-1;h>=0;--h)if(!Db(l,s[h])){var d=s[h],p=u[h];p=Go(p);var y=a.Oc(d);if(p instanceof vb)l.push(d);else{var v=Tb(p,y);null!=v&&(l.push(d),f.set(d,v))}}var g=new af(l);return new lb(f,g,a.fieldTransforms)}function Ib(t,e,n,r){return void 0===r&&(r=!1),Tb(n,t.Uc(r?4:3,e))}function Tb(t,e){if(Cb(t=Go(t)))return Ab("Unsupported field value:",e,t),Ob(t,e);if(t instanceof ab)return function(t,e){if(!fb(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Tb(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Go(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _h(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Yl.fromDate(t);return{timestampValue:Ad(e.R,n)}}if(t instanceof Yl)return n=new Yl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ad(e.R,n)};if(t instanceof sb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ob)return{bytesValue:kd(e.R,t._byteString)};if(t instanceof Gm){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Rd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Vm(t))}(t,e)}function Ob(t,e){var n={};return tf(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$l(t,(function(t,r){var i=Tb(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Cb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Yl||t instanceof sb||t instanceof ob||t instanceof Gm||t instanceof ab)}function Ab(t,e,n){if(!Cb(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Vm(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function kb(t,e,n){if((e=Go(e))instanceof ib)return e._internalPath;if("string"==typeof e)return Nb(t,e);throw Rb("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var xb=new RegExp("[~\\*/\\[\\]]");function Nb(t,e,n){if(e.search(xb)>=0)throw Rb("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(ib.bind.apply(ib,Ao([void 0],e.split(".")))))._internalPath}catch(r){throw Rb("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Rb(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Ll(Pl.INVALID_ARGUMENT,(s+=". ")+t+u)}function Db(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Pb=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Gm(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Lb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Fb("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Lb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Eo(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Pb);function Fb(t,e){return"string"==typeof e?Nb(t,e):e instanceof ib?e._internalPath:e._delegate._internalPath}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var jb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Mb=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Eo(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Vb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Fb("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Pb),Vb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Eo(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Mb),Ub=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new jb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Vb(n._firestore,n._userDataWriter,r.key,r,new jb(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ll(Pl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Vb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new jb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Vb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new jb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Bb(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Bb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kl()}}function Kb(t,e){return t instanceof Mb&&e instanceof Mb?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ub&&e instanceof Ub&&t._firestore===e._firestore&&Ym(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qb(t){if(ah(t)&&0===t.explicitOrderBy.length)throw new Ll(Pl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Gb=function(){};function Wb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var zb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Eo(e,t),e.prototype._apply=function(t){var e=pb(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){$b(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var f=l[c];u.push(Qb(r,t,f))}s={arrayValue:{values:u}}}else s=Qb(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||$b(a,o),s=Ib(n,"where",a,"in"===o||"not-in"===o);var h=Bf.create(i,o,s);return function(t,e){if(e.g()){var n=uh(t);if(null!==n&&!n.isEqual(e.field))throw new Ll(Pl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=sh(t);null!==r&&tw(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Ll(Pl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Ll(Pl.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Wm(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Gb),Xb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Eo(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Qf(e,n);return function(t,e){if(null===sh(t)){var n=uh(t);null!==n&&tw(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Wm(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new nh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Gb),Hb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Eo(e,t),e.prototype._apply=function(t){return new Wm(t.firestore,t.converter,hh(t._query,this.Hc,this.Jc))},e}(Gb),Zb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Eo(e,t),e.prototype._apply=function(t){var e=Jb(t,this.type,this.Yc,this.Xc);return new Wm(t.firestore,t.converter,function(t,e){return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Gb),Yb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Eo(e,t),e.prototype._apply=function(t){var e=Jb(t,this.type,this.Yc,this.Xc);return new Wm(t.firestore,t.converter,function(t,e){return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Gb);function Jb(t,e,n,r){if(n[0]=Go(n[0]),n[0]instanceof Pb)return function(t,e,n,r,i){if(!r)throw new Ll(Pl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=lh(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Of(e,r.key));else{var c=r.data.field(u.field);if(hf(c))throw new Ll(Pl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ll(Pl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Yf(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=pb(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Ll(Pl.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ch(t)&&-1!==c.indexOf("/"))throw new Ll(Pl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(nf.fromString(c));if(!mf.isDocumentKey(l))throw new Ll(Pl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var f=new mf(l);s.push(Of(e,f))}else{var h=Ib(n,r,c);s.push(h)}}return new Yf(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Qb(t,e,n){if("string"==typeof(n=Go(n))){if(""===n)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ch(e)&&-1!==n.indexOf("/"))throw new Ll(Pl.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(nf.fromString(n));if(!mf.isDocumentKey(r))throw new Ll(Pl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Of(t,new mf(r))}if(n instanceof Gm)return Of(t,n._key);throw new Ll(Pl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Vm(n)+".")}function $b(t,e){if(!Array.isArray(t)||0===t.length)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function tw(t,e,n){if(!n.isEqual(e))throw new Ll(Pl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ew=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),bf(t)){case 0:return null;case 1:return t.booleanValue;case 2:return lf(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ff(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Kl()}},t.prototype.convertObject=function(t,e){var n=this,r={};return $l(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new sb(lf(t.latitude),lf(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=df(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(pf(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=cf(t);return new Yl(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=nf.fromString(t);ql(np(n));var r=new Om(n.get(1),n.get(3)),i=new mf(n.popFirst(5));return r.isEqual(e)||Vl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function nw(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var rw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Eo(e,t),e.prototype.convertBytes=function(t){return new ob(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Gm(this.firestore,null,e)},e}(ew),iw=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=pb(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=ow(t,this._firestore),i=nw(r.converter,e,n),o=yb(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Fh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=ow(t,this._firestore);return o="string"==typeof(e=Go(e))||e instanceof ib?Sb(this._dataReader,"WriteBatch.update",a._key,e,n,r):Eb(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,Fh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=ow(t,this._firestore);return this._mutations=this._mutations.concat(new Jh(e._key,Fh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ll(Pl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ow(t,e){if((t=Go(t)).firestore!==e)throw new Ll(Pl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var aw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Eo(e,t),e.prototype.convertBytes=function(t){return new ob(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Gm(this.firestore,null,e)},e}(ew);function sw(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Um(t,Gm);var o=Um(t.firestore,$m),a=pb(o);return cw(o,[("string"==typeof(e=Go(e))||e instanceof ib?Sb(a,"updateDoc",t._key,e,n,r):Eb(a,"updateDoc",t._key,e)).toMutation(t._key,Fh.exists(!0))])}function uw(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Go(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Qm(i[s])||(a=i[s],s++);var u,c,l,f={includeMetadataChanges:a.includeMetadataChanges};if(Qm(i[s])){var h=i[s];i[s]=null===(e=h.next)||void 0===e?void 0:e.bind(h),i[s+1]=null===(n=h.error)||void 0===n?void 0:n.bind(h),i[s+2]=null===(r=h.complete)||void 0===r?void 0:r.bind(h)}if(t instanceof Gm)c=Um(t.firestore,$m),l=ih(t._key.path),u={next:function(e){i[s]&&i[s](lw(c,t,e))},error:i[s+1],complete:i[s+2]};else{var d=Um(t,Wm);c=Um(d.firestore,$m),l=d._query;var p=new aw(c);u={next:function(t){i[s]&&i[s](new Ub(c,p,d,t))},error:i[s+1],complete:i[s+2]},qb(t._query)}return function(t,e,n,r){var i=this,o=new lm(r),a=new Eg(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Io(i,void 0,void 0,(function(){var e;return To(this,(function(n){switch(n.label){case 0:return e=gg,[4,Em(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Io(i,void 0,void 0,(function(){var e;return To(this,(function(n){switch(n.label){case 0:return e=mg,[4,Em(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(tb(c),l,f,u)}function cw(t,e){return function(t,e){var n=this,r=new Op;return t.asyncQueue.enqueueAndForget((function(){return Io(n,void 0,void 0,(function(){var n;return To(this,(function(i){switch(i.label){case 0:return n=Rg,[4,_m(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(tb(t),e)}function lw(t,e,n){var r=n.docs.get(e._key),i=new aw(t);return new Mb(t,i,e._key,r,new jb(n.hasPendingWrites,n.fromCache),e.converter)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Eo(e,t),e.prototype.get=function(e){var n=this,r=ow(e,this._firestore),i=new aw(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Mb(n._firestore,i,r._key,t._document,new jb(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=pb(t)}return t.prototype.get=function(t){var e=this,n=ow(t,this._firestore),r=new rw(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Kl();var i=t[0];if(i.isFoundDocument())return new Pb(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Pb(e._firestore,r,n._key,null,n.converter);throw Kl()}))},t.prototype.set=function(t,e,n){var r=ow(t,this._firestore),i=nw(r.converter,e,n),o=yb(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=ow(t,this._firestore);return o="string"==typeof(e=Go(e))||e instanceof ib?Sb(this._dataReader,"Transaction.update",a._key,e,n,r):Eb(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=ow(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hw(){if("undefined"==typeof Uint8Array)throw new Ll(Pl.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function dw(){if("undefined"==typeof atob)throw new Ll(Pl.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var pw=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return dw(),new t(ob.fromBase64String(e))},t.fromUint8Array=function(e){return hw(),new t(ob.fromUint8Array(e))},t.prototype.toBase64=function(){return dw(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return hw(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),yw=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){rb(t=Um(t,$m));var n=tb(t),r=t._freezeSettings(),i=new cm;return nb(n,i,new sm(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){rb(t=Um(t,$m));var e=tb(t),n=t._freezeSettings(),r=new cm;return nb(e,r,new um(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ll(Pl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Op;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Io(e,void 0,void 0,(function(){var e;return To(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Io(this,void 0,void 0,(function(){var e;return To(this,(function(n){switch(n.label){case 0:return kp.yt()?(e=t+"main",[4,kp.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Uy(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),vw=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Om||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Ul("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=Um(t,qm))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Ul("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var a,s;if("string"==typeof r.mockUserToken)a=r.mockUserToken,s=dv.MOCK_USER;else{a=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=So({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[No(JSON.stringify({alg:"none",type:"JWT"})),No(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ll(Pl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new dv(u)}t._credentials=new xm(new Am(a,s))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Io(e,void 0,void 0,(function(){var e,n;return To(this,(function(r){switch(r.label){case 0:return[4,mm(t)];case 1:return e=r.sent(),[4,wm(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Gl(t);return e.Or.delete(0),Vv(e)}(n))]}}))}))}))}(tb(Um(this._delegate,$m)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Io(e,void 0,void 0,(function(){var e,n;return To(this,(function(r){switch(r.label){case 0:return[4,mm(t)];case 1:return e=r.sent(),[4,wm(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Io(this,void 0,void 0,(function(){var e;return To(this,(function(n){switch(n.label){case 0:return(e=Gl(t)).Or.add(0),[4,Uv(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(tb(Um(this._delegate,$m)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Fm("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Op;return t.asyncQueue.enqueueAndForget((function(){return Io(e,void 0,void 0,(function(){var e;return To(this,(function(r){switch(r.label){case 0:return e=Mg,[4,_m(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(tb(Um(this._delegate,$m)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new lm(e);return t.asyncQueue.enqueueAndForget((function(){return Io(n,void 0,void 0,(function(){var e;return To(this,(function(n){switch(n.label){case 0:return e=function(t,e){Gl(t).Gr.add(e),e.next()},[4,Em(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Io(n,void 0,void 0,(function(){var e;return To(this,(function(n){switch(n.label){case 0:return e=function(t,e){Gl(t).Gr.delete(e)},[4,Em(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(tb(t=Um(t,$m)),Qm(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Ll(Pl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xw(this,Xm(this._delegate,t))}catch(t){throw Ew(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new _w(this,Hm(this._delegate,t))}catch(t){throw Ew(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Cw(this,function(t,e){if(t=Um(t,qm),Pm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Wm(t,null,function(t){return new nh(nf.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Ew(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Op;return t.asyncQueue.enqueueAndForget((function(){return Io(n,void 0,void 0,(function(){var n;return To(this,(function(i){switch(i.label){case 0:return[4,function(t){return gm(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new hm(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(tb(t),(function(n){return e(new fw(t,n))}))}(this._delegate,(function(n){return t(new mw(e,n))}))},t.prototype.batch=function(){var t=this;return tb(this._delegate),new bw(new iw(this._delegate,(function(e){return cw(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Ll(Pl.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Ll(Pl.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),gw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Eo(e,t),e.prototype.convertBytes=function(t){return new pw(new ob(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return _w.eu(e,this.firestore,null)},e}(ew);var mw=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new gw(t)}return t.prototype.get=function(t){var e=this,n=Nw(t);return this._delegate.get(n).then((function(t){return new Tw(e._firestore,new Mb(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Nw(t);return n?(Lm("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Nw(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Ao([a,e,n],i)),this},t.prototype.delete=function(t){var e=Nw(t);return this._delegate.delete(e),this},t}(),bw=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Nw(t);return n?(Lm("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Nw(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Ao([a,e,n],i)),this},t.prototype.delete=function(t){var e=Nw(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),ww=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Vb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Ow(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new gw(e),n),i.set(n,o)),o},t}();ww.su=new WeakMap;var _w=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gw(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Ll(Pl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Gm(n._delegate,r,new mf(e)))},t.eu=function(e,n,r){return new t(n,new Gm(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new xw(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xw(this.firestore,Xm(this._delegate,t))}catch(t){throw Ew(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Go(t))instanceof Gm&&Zm(this._delegate,t)},t.prototype.set=function(t,e){e=Lm("DocumentReference.set",e);try{return function(t,e,n){t=Um(t,Gm);var r=Um(t.firestore,$m),i=nw(t.converter,e,n);return cw(r,[yb(pb(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Fh.none())])}(this._delegate,t,e)}catch(t){throw Ew(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?sw(this._delegate,t):sw.apply(void 0,Ao([this._delegate,t,e],n))}catch(t){throw Ew(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return cw(Um((t=this._delegate).firestore,$m),[new Jh(t._key,Fh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Sw(e),i=Iw(e,(function(e){return new Tw(t.firestore,new Mb(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return uw(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Um(t,Gm);var e=Um(t.firestore,$m),n=tb(e),r=new aw(e);return function(t,e){var n=this,r=new Op;return t.asyncQueue.enqueueAndForget((function(){return Io(n,void 0,void 0,(function(){var n;return To(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Io(this,void 0,void 0,(function(){var r,i;return To(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Gl(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Ll(Pl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=fg(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,bm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Mb(e,r,t._key,n,new jb(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Um(t,Gm);var e=Um(t.firestore,$m);return Sm(tb(e),t._key,{source:"server"}).then((function(n){return lw(e,t,n)}))}(this._delegate):function(t){t=Um(t,Gm);var e=Um(t.firestore,$m);return Sm(tb(e),t._key).then((function(n){return lw(e,t,n)}))}(this._delegate)).then((function(t){return new Tw(e.firestore,new Mb(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(ww.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Ew(t,e,n){return t.message=t.message.replace(e,n),t}function Sw(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Qm(r))return r}return{}}function Iw(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Qm(t[0])?t[0]:Qm(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Tw=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new _w(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Kb(this._delegate,t._delegate)},t}(),Ow=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Eo(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Tw),Cw=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gw(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Wb(this._delegate,function(t,e,n){var r=e,i=Fb("where",t);return new zb(i,r,n)}(e,n,r)))}catch(e){throw Ew(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Wb(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Fb("orderBy",t);return new Xb(r,n)}(e,n)))}catch(e){throw Ew(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Wb(this._delegate,function(t){return Bm("limit",t),new Hb("limit",t,"F")}(e)))}catch(e){throw Ew(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Wb(this._delegate,function(t){return Bm("limitToLast",t),new Hb("limitToLast",t,"L")}(e)))}catch(e){throw Ew(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Wb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zb("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Ew(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Wb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zb("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Ew(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Wb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yb("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Ew(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Wb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yb("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Ew(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Ym(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Um(t,Wm);var e=Um(t.firestore,$m),n=tb(e),r=new aw(e);return function(t,e){var n=this,r=new Op;return t.asyncQueue.enqueueAndForget((function(){return Io(n,void 0,void 0,(function(){var n;return To(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Io(this,void 0,void 0,(function(){var r,i,o,a,s;return To(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,$y(t,e,!0)];case 1:return s=u.sent(),r=new Tg(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=fg(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,bm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Ub(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Um(t,Wm);var e=Um(t.firestore,$m),n=tb(e),r=new aw(e);return Im(n,t._query,{source:"server"}).then((function(n){return new Ub(e,r,t,n)}))}(this._delegate):function(t){t=Um(t,Wm);var e=Um(t.firestore,$m),n=tb(e),r=new aw(e);return qb(t._query),Im(n,t._query).then((function(n){return new Ub(e,r,t,n)}))}(this._delegate)).then((function(t){return new kw(e.firestore,new Ub(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Sw(e),i=Iw(e,(function(e){return new kw(t.firestore,new Ub(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return uw(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(ww.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Aw=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Ow(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),kw=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Cw(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Ow(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Aw(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Ow(n._firestore,r))}))},t.prototype.isEqual=function(t){return Kb(this._delegate,t._delegate)},t}(),xw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Eo(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new _w(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new _w(this.firestore,void 0===t?Hm(this._delegate):Hm(this._delegate,t))}catch(t){throw Ew(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Um(t.firestore,$m),r=Hm(t),i=nw(t.converter,e);return cw(n,[yb(pb(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Fh.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new _w(e.firestore,t)}))},e.prototype.isEqual=function(t){return Zm(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(ww.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Cw);function Nw(t){return Um(t,Gm)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Rw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(ib.bind.apply(ib,Ao([void 0],t)))}return t.documentId=function(){return new t(of.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Go(t))instanceof ib&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Dw=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new mb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new vb("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bb("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wb("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new _b("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Pw={Firestore:vw,GeoPoint:sb,Timestamp:Yl,Blob:pw,Transaction:mw,WriteBatch:bw,DocumentReference:_w,DocumentSnapshot:Tw,Query:Cw,QueryDocumentSnapshot:Ow,QuerySnapshot:kw,CollectionReference:xw,FieldPath:Rw,FieldValue:Dw,setLogLevel:function(t){var e;e=t,Fl.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};!
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){!function(t,e){t.INTERNAL.registerComponent(new Wo("firestore",(function(t){return function(t,e){return new vw(t,new $m(t,e),new yw)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Pw)))}(t),t.registerVersion("@firebase/firestore","2.4.0")}(ba);ba.initializeApp({apiKey:"AIzaSyDjSSoXs-xNIyq310lsCzVcYu8Zz9puiPQ",authDomain:"tag-generator-3.firebaseapp.com",projectId:"tag-generator-3",storageBucket:"tag-generator-3.appspot.com",messagingSenderId:"25589238377",appId:"1:25589238377:web:b089f263d21e9b18d330f8"});var Lw={},Fw={},jw={};Object.defineProperty(jw,"__esModule",{value:!0});jw.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=e,this.text=n.text||e,this.options=n},Object.defineProperty(Fw,"__esModule",{value:!0}),Fw.CODE39=void 0;var Mw,Vw=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Uw=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t.toUpperCase(),n.mod43&&(t+=function(t){return Bw[t]}(function(t){for(var e=0,n=0;n<t.length;n++)e+=Gw(t[n]);return e%=43}(t))),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),Vw(e,[{key:"encode",value:function(){for(var t=qw("*"),e=0;e<this.data.length;e++)t+=qw(this.data[e])+"0";return{data:t+=qw("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),e}(((Mw=jw)&&Mw.__esModule?Mw:{default:Mw}).default),Bw=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],Kw=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function qw(t){return function(t){return Kw[t].toString(2)}(Gw(t))}function Gw(t){return Bw.indexOf(t)}Fw.CODE39=Uw;var Ww,zw={},Xw={},Hw={},Zw={};function Yw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(Zw,"__esModule",{value:!0});var Jw=Zw.SET_A=0,Qw=Zw.SET_B=1,$w=Zw.SET_C=2;Zw.SHIFT=98;var t_=Zw.START_A=103,e_=Zw.START_B=104,n_=Zw.START_C=105;Zw.MODULO=103,Zw.STOP=106,Zw.FNC1=207,Zw.SET_BY_CODE=(Yw(Ww={},t_,Jw),Yw(Ww,e_,Qw),Yw(Ww,n_,$w),Ww),Zw.SWAP={101:Jw,100:Qw,99:$w},Zw.A_START_CHAR=String.fromCharCode(208),Zw.B_START_CHAR=String.fromCharCode(209),Zw.C_START_CHAR=String.fromCharCode(210),Zw.A_CHARS="[\0-_Ã-Ã]",Zw.B_CHARS="[ -Ã-Ã]",Zw.C_CHARS="(Ã*[0-9]{2}Ã*)",Zw.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Object.defineProperty(Hw,"__esModule",{value:!0});var r_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i_=function(t){return t&&t.__esModule?t:{default:t}}(jw),o_=Zw;var a_=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.substring(1),n));return r.bytes=t.split("").map((function(t){return t.charCodeAt(0)})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r_(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var t=this.bytes,n=t.shift()-105,r=o_.SET_BY_CODE[n];if(void 0===r)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&t.unshift(o_.FNC1);var i=e.next(t,1,r);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(n)+i.result+e.getBar((i.checksum+n)%o_.MODULO)+e.getBar(o_.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var t=this.options.ean128||!1;return"string"==typeof t&&(t="true"===t.toLowerCase()),t}}],[{key:"getBar",value:function(t){return o_.BARS[t]?o_.BARS[t].toString():""}},{key:"correctIndex",value:function(t,e){if(e===o_.SET_A){var n=t.shift();return n<32?n+64:n-32}return e===o_.SET_B?t.shift()-32:10*(t.shift()-48)+t.shift()-48}},{key:"next",value:function(t,n,r){if(!t.length)return{result:"",checksum:0};var i=void 0,o=void 0;if(t[0]>=200){o=t.shift()-105;var a=o_.SWAP[o];void 0!==a?i=e.next(t,n+1,a):(r!==o_.SET_A&&r!==o_.SET_B||o!==o_.SHIFT||(t[0]=r===o_.SET_A?t[0]>95?t[0]-96:t[0]:t[0]<32?t[0]+96:t[0]),i=e.next(t,n+1,r))}else o=e.correctIndex(t,r),i=e.next(t,n+1,r);var s=o*n;return{result:e.getBar(o)+i.result,checksum:s+i.checksum}}}]),e}(i_.default);Hw.default=a_;var s_={};Object.defineProperty(s_,"__esModule",{value:!0});var u_=Zw,c_=function(t){return t.match(new RegExp("^"+u_.A_CHARS+"*"))[0].length},l_=function(t){return t.match(new RegExp("^"+u_.B_CHARS+"*"))[0].length},f_=function(t){return t.match(new RegExp("^"+u_.C_CHARS+"*"))[0]};function h_(t,e){var n=e?u_.A_CHARS:u_.B_CHARS,r=t.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(r)return r[1]+String.fromCharCode(204)+d_(t.substring(r[1].length));var i=t.match(new RegExp("^"+n+"+"))[0];return i.length===t.length?t:i+String.fromCharCode(e?205:206)+h_(t.substring(i.length),!e)}function d_(t){var e=f_(t),n=e.length;if(n===t.length)return t;t=t.substring(n);var r=c_(t)>=l_(t);return e+String.fromCharCode(r?206:205)+h_(t,r)}s_.default=function(t){var e=void 0;if(f_(t).length>=2)e=u_.C_START_CHAR+d_(t);else{var n=c_(t)>l_(t);e=(n?u_.A_START_CHAR:u_.B_START_CHAR)+h_(t,n)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,(function(t,e){return String.fromCharCode(203)+e}))},Object.defineProperty(Xw,"__esModule",{value:!0});var p_=v_(Hw),y_=v_(s_);function v_(t){return t&&t.__esModule?t:{default:t}}function g_(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var m_=function(t){function e(t,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(t))var r=g_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,y_.default)(t),n));else r=g_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return g_(r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(p_.default);Xw.default=m_;var b_={};Object.defineProperty(b_,"__esModule",{value:!0});var w_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),__=function(t){return t&&t.__esModule?t:{default:t}}(Hw),E_=Zw;var S_=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,E_.A_START_CHAR+t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),w_(e,[{key:"valid",value:function(){return new RegExp("^"+E_.A_CHARS+"+$").test(this.data)}}]),e}(__.default);b_.default=S_;var I_={};Object.defineProperty(I_,"__esModule",{value:!0});var T_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),O_=function(t){return t&&t.__esModule?t:{default:t}}(Hw),C_=Zw;var A_=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,C_.B_START_CHAR+t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),T_(e,[{key:"valid",value:function(){return new RegExp("^"+C_.B_CHARS+"+$").test(this.data)}}]),e}(O_.default);I_.default=A_;var k_={};Object.defineProperty(k_,"__esModule",{value:!0});var x_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),N_=function(t){return t&&t.__esModule?t:{default:t}}(Hw),R_=Zw;var D_=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,R_.C_START_CHAR+t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),x_(e,[{key:"valid",value:function(){return new RegExp("^"+R_.C_CHARS+"+$").test(this.data)}}]),e}(N_.default);k_.default=D_,Object.defineProperty(zw,"__esModule",{value:!0}),zw.CODE128C=zw.CODE128B=zw.CODE128A=zw.CODE128=void 0;var P_=M_(Xw),L_=M_(b_),F_=M_(I_),j_=M_(k_);function M_(t){return t&&t.__esModule?t:{default:t}}zw.CODE128=P_.default,zw.CODE128A=L_.default,zw.CODE128B=F_.default,zw.CODE128C=j_.default;var V_={},U_={},B_={};Object.defineProperty(B_,"__esModule",{value:!0}),B_.SIDE_BIN="101",B_.MIDDLE_BIN="01010",B_.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},B_.EAN2_STRUCTURE=["LL","LG","GL","GG"],B_.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],B_.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var K_={},q_={};Object.defineProperty(q_,"__esModule",{value:!0});var G_=B_;q_.default=function(t,e,n){var r=t.split("").map((function(t,n){return G_.BINARIES[e[n]]})).map((function(e,n){return e?e[t[n]]:""}));if(n){var i=t.length-1;r=r.map((function(t,e){return e<i?t+n:t}))}return r.join("")},Object.defineProperty(K_,"__esModule",{value:!0});var W_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),z_=B_,X_=H_(q_);function H_(t){return t&&t.__esModule?t:{default:t}}var Z_=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.fontSize=!n.flat&&n.fontSize>10*n.width?10*n.width:n.fontSize,r.guardHeight=n.height+r.fontSize/2+n.textMargin,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),W_(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(t,e){return this.text.substr(t,e)}},{key:"leftEncode",value:function(t,e){return(0,X_.default)(t,e)}},{key:"rightText",value:function(t,e){return this.text.substr(t,e)}},{key:"rightEncode",value:function(t,e){return(0,X_.default)(t,e)}},{key:"encodeGuarded",value:function(){var t={fontSize:this.fontSize},e={height:this.guardHeight};return[{data:z_.SIDE_BIN,options:e},{data:this.leftEncode(),text:this.leftText(),options:t},{data:z_.MIDDLE_BIN,options:e},{data:this.rightEncode(),text:this.rightText(),options:t},{data:z_.SIDE_BIN,options:e}]}},{key:"encodeFlat",value:function(){return{data:[z_.SIDE_BIN,this.leftEncode(),z_.MIDDLE_BIN,this.rightEncode(),z_.SIDE_BIN].join(""),text:this.text}}}]),e}(H_(jw).default);K_.default=Z_,Object.defineProperty(U_,"__esModule",{value:!0});var Y_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),J_=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},Q_=B_,$_=function(t){return t&&t.__esModule?t:{default:t}}(K_);var tE=function(t){return(10-t.substr(0,12).split("").map((function(t){return+t})).reduce((function(t,e,n){return n%2?t+3*e:t+e}),0)%10)%10},eE=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==t.search(/^[0-9]{12}$/)&&(t+=tE(t));var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.lastChar=n.lastChar,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),Y_(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===tE(this.data)}},{key:"leftText",value:function(){return J_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var t=this.data.substr(1,6),n=Q_.EAN13_STRUCTURE[this.data[0]];return J_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,t,n)}},{key:"rightText",value:function(){return J_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var t=this.data.substr(7,6);return J_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,t,"RRRRRR")}},{key:"encodeGuarded",value:function(){var t=J_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(t.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(t.push({data:"00"}),t.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),t}}]),e}($_.default);U_.default=eE;var nE={};Object.defineProperty(nE,"__esModule",{value:!0});var rE=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),iE=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},oE=function(t){return t&&t.__esModule?t:{default:t}}(K_);var aE=function(t){return(10-t.substr(0,7).split("").map((function(t){return+t})).reduce((function(t,e,n){return n%2?t+e:t+3*e}),0)%10)%10},sE=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==t.search(/^[0-9]{7}$/)&&(t+=aE(t)),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),rE(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===aE(this.data)}},{key:"leftText",value:function(){return iE(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var t=this.data.substr(0,4);return iE(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,t,"LLLL")}},{key:"rightText",value:function(){return iE(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var t=this.data.substr(4,4);return iE(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,t,"RRRR")}}]),e}(oE.default);nE.default=sE;var uE={};Object.defineProperty(uE,"__esModule",{value:!0});var cE=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),lE=B_,fE=dE(q_),hE=dE(jw);function dE(t){return t&&t.__esModule?t:{default:t}}var pE=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),cE(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var t,e=lE.EAN5_STRUCTURE[(t=this.data,t.split("").map((function(t){return+t})).reduce((function(t,e,n){return n%2?t+9*e:t+3*e}),0)%10)];return{data:"1011"+(0,fE.default)(this.data,e,"01"),text:this.text}}}]),e}(hE.default);uE.default=pE;var yE={};Object.defineProperty(yE,"__esModule",{value:!0});var vE=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),gE=B_,mE=bE(q_);function bE(t){return t&&t.__esModule?t:{default:t}}var wE=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),vE(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var t=gE.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,mE.default)(this.data,t,"01"),text:this.text}}}]),e}(bE(jw).default);yE.default=wE;var _E={};Object.defineProperty(_E,"__esModule",{value:!0});var EE=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();_E.checksum=OE;var SE=IE(q_);function IE(t){return t&&t.__esModule?t:{default:t}}var TE=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==t.search(/^[0-9]{11}$/)&&(t+=OE(t));var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.displayValue=n.displayValue,n.fontSize>10*n.width?r.fontSize=10*n.width:r.fontSize=n.fontSize,r.guardHeight=n.height+r.fontSize/2+n.textMargin,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),EE(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==OE(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var t="";return t+="101",t+=(0,SE.default)(this.data.substr(0,6),"LLLLLL"),t+="01010",t+=(0,SE.default)(this.data.substr(6,6),"RRRRRR"),{data:t+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var t=[];return this.displayValue&&t.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),t.push({data:"101"+(0,SE.default)(this.data[0],"L"),options:{height:this.guardHeight}}),t.push({data:(0,SE.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),t.push({data:"01010",options:{height:this.guardHeight}}),t.push({data:(0,SE.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),t.push({data:(0,SE.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&t.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),t}}]),e}(IE(jw).default);function OE(t){var e,n=0;for(e=1;e<11;e+=2)n+=parseInt(t[e]);for(e=0;e<11;e+=2)n+=3*parseInt(t[e]);return(10-n%10)%10}_E.default=TE;var CE={};Object.defineProperty(CE,"__esModule",{value:!0});var AE=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),kE=RE(q_),xE=RE(jw),NE=_E;function RE(t){return t&&t.__esModule?t:{default:t}}function DE(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var PE=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],LE=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],FE=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=DE(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if(r.isValid=!1,-1!==t.search(/^[0-9]{6}$/))r.middleDigits=t,r.upcA=jE(t,"0"),r.text=n.text||""+r.upcA[0]+t+r.upcA[r.upcA.length-1],r.isValid=!0;else{if(-1===t.search(/^[01][0-9]{7}$/))return DE(r);if(r.middleDigits=t.substring(1,t.length-1),r.upcA=jE(r.middleDigits,t[0]),r.upcA[r.upcA.length-1]!==t[t.length-1])return DE(r);r.isValid=!0}return r.displayValue=n.displayValue,n.fontSize>10*n.width?r.fontSize=10*n.width:r.fontSize=n.fontSize,r.guardHeight=n.height+r.fontSize/2+n.textMargin,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),AE(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var t="";return t+="101",t+=this.encodeMiddleDigits(),{data:t+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var t=[];return this.displayValue&&t.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),t.push({data:"101",options:{height:this.guardHeight}}),t.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),t.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&t.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),t}},{key:"encodeMiddleDigits",value:function(){var t=this.upcA[0],e=this.upcA[this.upcA.length-1],n=LE[parseInt(e)][parseInt(t)];return(0,kE.default)(this.middleDigits,n)}}]),e}(xE.default);function jE(t,e){for(var n=parseInt(t[t.length-1]),r=PE[n],i="",o=0,a=0;a<r.length;a++){var s=r[a];i+="X"===s?t[o++]:s}return""+(i=""+e+i)+(0,NE.checksum)(i)}CE.default=FE,Object.defineProperty(V_,"__esModule",{value:!0}),V_.UPCE=V_.UPC=V_.EAN2=V_.EAN5=V_.EAN8=V_.EAN13=void 0;var ME=GE(U_),VE=GE(nE),UE=GE(uE),BE=GE(yE),KE=GE(_E),qE=GE(CE);function GE(t){return t&&t.__esModule?t:{default:t}}V_.EAN13=ME.default,V_.EAN8=VE.default,V_.EAN5=UE.default,V_.EAN2=BE.default,V_.UPC=KE.default,V_.UPCE=qE.default;var WE={},zE={},XE={};Object.defineProperty(XE,"__esModule",{value:!0}),XE.START_BIN="1010",XE.END_BIN="11101",XE.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"],Object.defineProperty(zE,"__esModule",{value:!0});var HE=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),ZE=XE;function YE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JE(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var QE=function(t){function e(){return YE(this,e),JE(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),HE(e,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var t=this,e=this.data.match(/.{2}/g).map((function(e){return t.encodePair(e)})).join("");return{data:ZE.START_BIN+e+ZE.END_BIN,text:this.text}}},{key:"encodePair",value:function(t){var e=ZE.BINARIES[t[1]];return ZE.BINARIES[t[0]].split("").map((function(t,n){return("1"===t?"111":"1")+("1"===e[n]?"000":"0")})).join("")}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(jw).default);zE.default=QE;var $E={};Object.defineProperty($E,"__esModule",{value:!0});var tS=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),eS=function(t){return t&&t.__esModule?t:{default:t}}(zE);var nS=function(t){var e=t.substr(0,13).split("").map((function(t){return parseInt(t,10)})).reduce((function(t,e,n){return t+e*(3-n%2*2)}),0);return 10*Math.ceil(e/10)-e},rS=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==t.search(/^[0-9]{13}$/)&&(t+=nS(t)),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),tS(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===nS(this.data)}}]),e}(eS.default);$E.default=rS,Object.defineProperty(WE,"__esModule",{value:!0}),WE.ITF14=WE.ITF=void 0;var iS=aS(zE),oS=aS($E);function aS(t){return t&&t.__esModule?t:{default:t}}WE.ITF=iS.default,WE.ITF14=oS.default;var sS={},uS={};Object.defineProperty(uS,"__esModule",{value:!0});var cS=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var lS=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),cS(e,[{key:"encode",value:function(){for(var t="110",e=0;e<this.data.length;e++){var n=parseInt(this.data[e]).toString(2);n=fS(n,4-n.length);for(var r=0;r<n.length;r++)t+="0"==n[r]?"100":"110"}return{data:t+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(jw).default);function fS(t,e){for(var n=0;n<e;n++)t="0"+t;return t}uS.default=lS;var hS={},dS={};Object.defineProperty(dS,"__esModule",{value:!0}),dS.mod10=function(t){for(var e=0,n=0;n<t.length;n++){var r=parseInt(t[n]);(n+t.length)%2==0?e+=r:e+=2*r%10+Math.floor(2*r/10)}return(10-e%10)%10},dS.mod11=function(t){for(var e=0,n=[2,3,4,5,6,7],r=0;r<t.length;r++){var i=parseInt(t[t.length-1-r]);e+=n[r%n.length]*i}return(11-e%11)%11},Object.defineProperty(hS,"__esModule",{value:!0});var pS=function(t){return t&&t.__esModule?t:{default:t}}(uS),yS=dS;var vS=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,yS.mod10)(t),n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(pS.default);hS.default=vS;var gS={};Object.defineProperty(gS,"__esModule",{value:!0});var mS=function(t){return t&&t.__esModule?t:{default:t}}(uS),bS=dS;var wS=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,bS.mod11)(t),n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(mS.default);gS.default=wS;var _S={};Object.defineProperty(_S,"__esModule",{value:!0});var ES=function(t){return t&&t.__esModule?t:{default:t}}(uS),SS=dS;var IS=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t+=(0,SS.mod10)(t),t+=(0,SS.mod10)(t),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(ES.default);_S.default=IS;var TS={};Object.defineProperty(TS,"__esModule",{value:!0});var OS=function(t){return t&&t.__esModule?t:{default:t}}(uS),CS=dS;var AS=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t+=(0,CS.mod11)(t),t+=(0,CS.mod10)(t),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(OS.default);TS.default=AS,Object.defineProperty(sS,"__esModule",{value:!0}),sS.MSI1110=sS.MSI1010=sS.MSI11=sS.MSI10=sS.MSI=void 0;var kS=PS(uS),xS=PS(hS),NS=PS(gS),RS=PS(_S),DS=PS(TS);function PS(t){return t&&t.__esModule?t:{default:t}}sS.MSI=kS.default,sS.MSI10=xS.default,sS.MSI11=NS.default,sS.MSI1010=RS.default,sS.MSI1110=DS.default;var LS={};Object.defineProperty(LS,"__esModule",{value:!0}),LS.pharmacode=void 0;var FS=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var jS=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.number=parseInt(t,10),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),FS(e,[{key:"encode",value:function(){for(var t=this.number,e="";!isNaN(t)&&0!=t;)t%2==0?(e="11100"+e,t=(t-2)/2):(e="100"+e,t=(t-1)/2);return{data:e=e.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(jw).default);LS.pharmacode=jS;var MS={};Object.defineProperty(MS,"__esModule",{value:!0}),MS.codabar=void 0;var VS=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var US=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),0===t.search(/^[0-9\-\$\:\.\+\/]+$/)&&(t="A"+t+"A");var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.toUpperCase(),n));return r.text=r.options.text||r.text.replace(/[A-D]/g,""),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),VS(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var t=[],e=this.getEncodings(),n=0;n<this.data.length;n++)t.push(e[this.data.charAt(n)]),n!==this.data.length-1&&t.push("0");return{text:this.text,data:t.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"101100110011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(jw).default);MS.codabar=US;var BS={};Object.defineProperty(BS,"__esModule",{value:!0}),BS.GenericBarcode=void 0;var KS=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var qS=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),KS(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(jw).default);BS.GenericBarcode=qS,Object.defineProperty(Lw,"__esModule",{value:!0});var GS=Fw,WS=zw,zS=V_,XS=WE,HS=sS,ZS=LS,YS=MS,JS=BS;Lw.default={CODE39:GS.CODE39,CODE128:WS.CODE128,CODE128A:WS.CODE128A,CODE128B:WS.CODE128B,CODE128C:WS.CODE128C,EAN13:zS.EAN13,EAN8:zS.EAN8,EAN5:zS.EAN5,EAN2:zS.EAN2,UPC:zS.UPC,UPCE:zS.UPCE,ITF14:XS.ITF14,ITF:XS.ITF,MSI:HS.MSI,MSI10:HS.MSI10,MSI11:HS.MSI11,MSI1010:HS.MSI1010,MSI1110:HS.MSI1110,pharmacode:ZS.pharmacode,codabar:YS.codabar,GenericBarcode:JS.GenericBarcode};var QS={};Object.defineProperty(QS,"__esModule",{value:!0});var $S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};QS.default=function(t,e){return $S({},t,e)};var tI={};Object.defineProperty(tI,"__esModule",{value:!0}),tI.default=function(t){var e=[];return function t(n){if(Array.isArray(n))for(var r=0;r<n.length;r++)t(n[r]);else n.text=n.text||"",n.data=n.data||"",e.push(n)}(t),e};var eI={};Object.defineProperty(eI,"__esModule",{value:!0}),eI.default=function(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t};var nI={},rI={},iI={};Object.defineProperty(iI,"__esModule",{value:!0}),iI.default=function(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],"string"==typeof t[n]&&(t[n]=parseInt(t[n],10)));"string"==typeof t.displayValue&&(t.displayValue="false"!=t.displayValue);return t};var oI={};Object.defineProperty(oI,"__esModule",{value:!0});var aI={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};oI.default=aI,Object.defineProperty(rI,"__esModule",{value:!0});var sI=cI(iI),uI=cI(oI);function cI(t){return t&&t.__esModule?t:{default:t}}rI.default=function(t){var e={};for(var n in uI.default)uI.default.hasOwnProperty(n)&&(t.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=t.getAttribute("jsbarcode-"+n.toLowerCase())),t.hasAttribute("data-"+n.toLowerCase())&&(e[n]=t.getAttribute("data-"+n.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,sI.default)(e)};var lI={},fI={},hI={};Object.defineProperty(hI,"__esModule",{value:!0}),hI.getTotalWidthOfEncodings=hI.calculateEncodingAttributes=hI.getBarcodePadding=hI.getEncodingHeight=hI.getMaximumHeightOfEncodings=void 0;var dI=function(t){return t&&t.__esModule?t:{default:t}}(QS);function pI(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function yI(t,e,n){if(n.displayValue&&e<t){if("center"==n.textAlign)return Math.floor((t-e)/2);if("left"==n.textAlign)return 0;if("right"==n.textAlign)return Math.floor(t-e)}return 0}function vI(t,e,n){var r;if(n)r=n;else{if("undefined"==typeof document)return 0;r=document.createElement("canvas").getContext("2d")}r.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var i=r.measureText(t);return i?i.width:0}hI.getMaximumHeightOfEncodings=function(t){for(var e=0,n=0;n<t.length;n++)t[n].height>e&&(e=t[n].height);return e},hI.getEncodingHeight=pI,hI.getBarcodePadding=yI,hI.calculateEncodingAttributes=function(t,e,n){for(var r=0;r<t.length;r++){var i,o=t[r],a=(0,dI.default)(e,o.options);i=a.displayValue?vI(o.text,a,n):0;var s=o.data.length*a.width;o.width=Math.ceil(Math.max(i,s)),o.height=pI(o,a),o.barcodePadding=yI(i,s,a)}},hI.getTotalWidthOfEncodings=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].width;return e},Object.defineProperty(fI,"__esModule",{value:!0});var gI=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),mI=function(t){return t&&t.__esModule?t:{default:t}}(QS),bI=hI;var wI=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.encodings=n,this.options=r}return gI(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var t=0;t<this.encodings.length;t++){var e=(0,mI.default)(this.options,this.encodings[t].options);this.drawCanvasBarcode(e,this.encodings[t]),this.drawCanvasText(e,this.encodings[t]),this.moveCanvasDrawing(this.encodings[t])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var t=this.canvas.getContext("2d");t.save(),(0,bI.calculateEncodingAttributes)(this.encodings,this.options,t);var e=(0,bI.getTotalWidthOfEncodings)(this.encodings),n=(0,bI.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=e+this.options.marginLeft+this.options.marginRight,this.canvas.height=n,t.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(t.fillStyle=this.options.background,t.fillRect(0,0,this.canvas.width,this.canvas.height)),t.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(t,e){var n,r=this.canvas.getContext("2d"),i=e.data;n="top"==t.textPosition?t.marginTop+t.fontSize+t.textMargin:t.marginTop,r.fillStyle=t.lineColor;for(var o=0;o<i.length;o++){var a=o*t.width+e.barcodePadding;"1"===i[o]?r.fillRect(a,n,t.width,t.height):i[o]&&r.fillRect(a,n,t.width,t.height*i[o])}}},{key:"drawCanvasText",value:function(t,e){var n,r,i=this.canvas.getContext("2d"),o=t.fontOptions+" "+t.fontSize+"px "+t.font;t.displayValue&&(r="top"==t.textPosition?t.marginTop+t.fontSize-t.textMargin:t.height+t.textMargin+t.marginTop+t.fontSize,i.font=o,"left"==t.textAlign||e.barcodePadding>0?(n=0,i.textAlign="left"):"right"==t.textAlign?(n=e.width-1,i.textAlign="right"):(n=e.width/2,i.textAlign="center"),i.fillText(e.text,n,r))}},{key:"moveCanvasDrawing",value:function(t){this.canvas.getContext("2d").translate(t.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),t}();fI.default=wI;var _I={};Object.defineProperty(_I,"__esModule",{value:!0});var EI=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),SI=function(t){return t&&t.__esModule?t:{default:t}}(QS),II=hI;var TI="http://www.w3.org/2000/svg",OI=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.svg=e,this.encodings=n,this.options=r,this.document=r.xmlDocument||document}return EI(t,[{key:"render",value:function(){var t=this.options.marginLeft;this.prepareSVG();for(var e=0;e<this.encodings.length;e++){var n=this.encodings[e],r=(0,SI.default)(this.options,n.options),i=this.createGroup(t,r.marginTop,this.svg);this.setGroupOptions(i,r),this.drawSvgBarcode(i,r,n),this.drawSVGText(i,r,n),t+=n.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,II.calculateEncodingAttributes)(this.encodings,this.options);var t=(0,II.getTotalWidthOfEncodings)(this.encodings),e=(0,II.getMaximumHeightOfEncodings)(this.encodings),n=t+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(n,e),this.options.background&&this.drawRect(0,0,n,e,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(t,e,n){var r,i=n.data;r="top"==e.textPosition?e.fontSize+e.textMargin:0;for(var o=0,a=0,s=0;s<i.length;s++)a=s*e.width+n.barcodePadding,"1"===i[s]?o++:o>0&&(this.drawRect(a-e.width*o,r,e.width*o,e.height,t),o=0);o>0&&this.drawRect(a-e.width*(o-1),r,e.width*o,e.height,t)}},{key:"drawSVGText",value:function(t,e,n){var r,i,o=this.document.createElementNS(TI,"text");e.displayValue&&(o.setAttribute("style","font:"+e.fontOptions+" "+e.fontSize+"px "+e.font),i="top"==e.textPosition?e.fontSize-e.textMargin:e.height+e.textMargin+e.fontSize,"left"==e.textAlign||n.barcodePadding>0?(r=0,o.setAttribute("text-anchor","start")):"right"==e.textAlign?(r=n.width-1,o.setAttribute("text-anchor","end")):(r=n.width/2,o.setAttribute("text-anchor","middle")),o.setAttribute("x",r),o.setAttribute("y",i),o.appendChild(this.document.createTextNode(n.text)),t.appendChild(o))}},{key:"setSvgAttributes",value:function(t,e){var n=this.svg;n.setAttribute("width",t+"px"),n.setAttribute("height",e+"px"),n.setAttribute("x","0px"),n.setAttribute("y","0px"),n.setAttribute("viewBox","0 0 "+t+" "+e),n.setAttribute("xmlns",TI),n.setAttribute("version","1.1"),n.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(t,e,n){var r=this.document.createElementNS(TI,"g");return r.setAttribute("transform","translate("+t+", "+e+")"),n.appendChild(r),r}},{key:"setGroupOptions",value:function(t,e){t.setAttribute("style","fill:"+e.lineColor+";")}},{key:"drawRect",value:function(t,e,n,r,i){var o=this.document.createElementNS(TI,"rect");return o.setAttribute("x",t),o.setAttribute("y",e),o.setAttribute("width",n),o.setAttribute("height",r),i.appendChild(o),o}}]),t}();_I.default=OI;var CI={};Object.defineProperty(CI,"__esModule",{value:!0});var AI=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var kI=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.object=e,this.encodings=n,this.options=r}return AI(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();CI.default=kI,Object.defineProperty(lI,"__esModule",{value:!0});var xI=DI(fI),NI=DI(_I),RI=DI(CI);function DI(t){return t&&t.__esModule?t:{default:t}}lI.default={CanvasRenderer:xI.default,SVGRenderer:NI.default,ObjectRenderer:RI.default};var PI={};function LI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FI(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function jI(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(PI,"__esModule",{value:!0});var MI=function(t){function e(t,n){LI(this,e);var r=FI(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.name="InvalidInputException",r.symbology=t,r.input=n,r.message='"'+r.input+'" is not a valid input for '+r.symbology,r}return jI(e,Error),e}(),VI=function(t){function e(){LI(this,e);var t=FI(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="InvalidElementException",t.message="Not supported type to render on",t}return jI(e,Error),e}(),UI=function(t){function e(){LI(this,e);var t=FI(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="NoElementException",t.message="No element to render on.",t}return jI(e,Error),e}();PI.InvalidInputException=MI,PI.InvalidElementException=VI,PI.NoElementException=UI,Object.defineProperty(nI,"__esModule",{value:!0});var BI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KI=WI(rI),qI=WI(lI),GI=PI;function WI(t){return t&&t.__esModule?t:{default:t}}function zI(t){if("string"==typeof t)return function(t){var e=document.querySelectorAll(t);if(0===e.length)return;for(var n=[],r=0;r<e.length;r++)n.push(zI(e[r]));return n}(t);if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(zI(t[n]));return e}if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLImageElement)return function(t){var e=document.createElement("canvas");return{element:e,options:(0,KI.default)(t),renderer:qI.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}(t);if(t&&t.nodeName&&"svg"===t.nodeName.toLowerCase()||"undefined"!=typeof SVGElement&&t instanceof SVGElement)return{element:t,options:(0,KI.default)(t),renderer:qI.default.SVGRenderer};if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement)return{element:t,options:(0,KI.default)(t),renderer:qI.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:qI.default.CanvasRenderer};if(t&&"object"===(void 0===t?"undefined":BI(t))&&!t.nodeName)return{element:t,renderer:qI.default.ObjectRenderer};throw new GI.InvalidElementException}nI.default=zI;var XI={};Object.defineProperty(XI,"__esModule",{value:!0});var HI=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var ZI=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=e}return HI(t,[{key:"handleCatch",value:function(t){if("InvalidInputException"!==t.name)throw t;if(this.api._options.valid===this.api._defaults.valid)throw t.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(t){try{var e=t.apply(void 0,arguments);return this.api._options.valid(!0),e}catch(t){return this.handleCatch(t),this.api}}}]),t}();XI.default=ZI;var YI=oT(Lw),JI=oT(QS),QI=oT(tI),$I=oT(eI),tT=oT(nI),eT=oT(iI),nT=oT(XI),rT=PI,iT=oT(oI);function oT(t){return t&&t.__esModule?t:{default:t}}var aT=function(){},sT=function(t,e,n){var r=new aT;if(void 0===t)throw Error("No element to render on was provided.");return r._renderProperties=(0,tT.default)(t),r._encodings=[],r._options=iT.default,r._errorHandler=new nT.default(r),void 0!==e&&((n=n||{}).format||(n.format=fT()),r.options(n)[n.format](e,n).render()),r};for(var uT in sT.getModule=function(t){return YI.default[t]},YI.default)YI.default.hasOwnProperty(uT)&&cT(YI.default,uT);function cT(t,e){aT.prototype[e]=aT.prototype[e.toUpperCase()]=aT.prototype[e.toLowerCase()]=function(n,r){var i=this;return i._errorHandler.wrapBarcodeCall((function(){r.text=void 0===r.text?void 0:""+r.text;var o=(0,JI.default)(i._options,r);o=(0,eT.default)(o);var a=t[e],s=lT(n,a,o);return i._encodings.push(s),i}))}}function lT(t,e,n){var r=new e(t=""+t,n);if(!r.valid())throw new rT.InvalidInputException(r.constructor.name,t);var i=r.encode();i=(0,QI.default)(i);for(var o=0;o<i.length;o++)i[o].options=(0,JI.default)(n,i[o].options);return i}function fT(){return YI.default.CODE128?"CODE128":Object.keys(YI.default)[0]}function hT(t,e,n){e=(0,QI.default)(e);for(var r=0;r<e.length;r++)e[r].options=(0,JI.default)(n,e[r].options),(0,$I.default)(e[r].options);(0,$I.default)(n),new(0,t.renderer)(t.element,e,n).render(),t.afterRender&&t.afterRender()}aT.prototype.options=function(t){return this._options=(0,JI.default)(this._options,t),this},aT.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this},aT.prototype.init=function(){var t;if(this._renderProperties)for(var e in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){t=this._renderProperties[e];var n=(0,JI.default)(this._options,t.options);"auto"==n.format&&(n.format=fT()),this._errorHandler.wrapBarcodeCall((function(){var e=lT(n.value,YI.default[n.format.toUpperCase()],n);hT(t,e,n)}))}},aT.prototype.render=function(){if(!this._renderProperties)throw new rT.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)hT(this._renderProperties[t],this._encodings,this._options);else hT(this._renderProperties,this._encodings,this._options);return this},aT.prototype._defaults=iT.default,"undefined"!=typeof window&&(window.JsBarcode=sT),"undefined"!=typeof jQuery&&(jQuery.fn.JsBarcode=function(t,e){var n=[];return jQuery(this).each((function(){n.push(this)})),sT(n,t,e)});var dT=sT;const pT="start",yT="count",vT="template";async function gT(){if(_T){let t=document.querySelector("#template")?.value||"#female-male",e=parseInt(document.querySelector("#start")?.value||"0"),n=parseInt(document.querySelector("#count")?.value||"12");if(n>48)return void alert("ÐÑ Ð¿ÑÑÐ°ÐµÑÐµÑÑ ÑÐ¾Ð·Ð´Ð°ÑÑ ÑÐ»Ð¸ÑÐºÐ¾Ð¼ Ð¼Ð½Ð¾Ð³Ð¾ Ð±Ð¸ÑÐ¾Ðº. ÐÐ±ÑÐ°ÑÐ¸ÑÐµÑÑ Ðº Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑÑÐ°ÑÐ¾ÑÐ°Ð¼.");document.querySelector("#generate").disabled=!0;let r={start:e,end:e+n-1,template:t,userId:_T.id,userName:_T.name};try{!function(t){let e=localStorage.getItem("generated"),n=t;if(e){let r=JSON.parse(e);const i=864e5,o=240;if((new Date).getTime()-new Date(r.date).getTime()<i){if(r.count+t>=o)throw new Error("ÐÑ ÑÐ¾Ð·Ð´Ð°Ð»Ð¸ ÑÐµÐ³Ð¾Ð´Ð½Ñ ÑÐ»Ð¸ÑÐºÐ¾Ð¼ Ð¼Ð½Ð¾Ð³Ð¾ Ð±Ð¸ÑÐ¾Ðº. ÐÐ±ÑÐ°ÑÐ¸ÑÐµÑÑ Ðº Ð¾ÑÐ³Ð°Ð½Ð¸Ð·Ð°ÑÐ¾ÑÐ°Ð¼ ÑÐºÐ»Ð°Ð´Ð°.");n+=r.count}}localStorage.setItem("generated",JSON.stringify({date:new Date,count:n}))}(n),await async function(t){let e=ba.firestore().doc("generation/latest");if((await ba.firestore().doc("generation/latest").get()).get("end")>t.end)throw Error("ÐÑÐ´ÐµÐ»ÐµÐ½Ð½ÑÐµ Ð½Ð¾Ð¼ÐµÑÐ° ÑÐ¶Ðµ Ð·Ð°Ð½ÑÑÑ. ÐÐ¾Ð¶Ð°Ð»ÑÐ¹ÑÑÐ°, Ð¾Ð±Ð½Ð¾Ð²Ð¸ÑÐµ ÑÑÑÐ°Ð½Ð¸ÑÑ Ð¸ Ð¿Ð¾Ð¿ÑÐ¾Ð±ÑÐ¹ÑÐµ ÑÐ½Ð¾Ð²Ð°.");await e.set(t);let n=ba.firestore().collection("generation").doc();await n.set(t)}(r),window.open(location.pathname+`?start=${e}&count=${n}&template=${encodeURIComponent(t)}`)}catch(t){alert(t.message)}document.querySelector("#start").value=(r.end+1).toString(),document.querySelector("#generate").disabled=!1}}function mT(){const t=new URLSearchParams(window.location.search),e=t.get(pT),n=t.get(yT),r=t.get(vT);return!!(e&&n&&r)&&(function(t,e,n){document.querySelector("#settings").style.display="none",document.querySelector("#loading").style.display="none";let r=document.querySelector("#print"),i=document.querySelector(t);if(i){let t=i.content.querySelector(".code");for(let o=e;o<e+n;o++){dT(t).options({height:35,fontSize:18}).CODE128(o.toString(),{}).render();let e=document.importNode(i.content,!0);r.appendChild(e)}window.print()}else alert("Template not found!")}(r,parseInt(e),parseInt(n)),!0)}async function bT(){let t=await async function(){let t=await ba.firestore().doc("generation/latest").get();return{start:t.get("start"),end:t.get("end"),template:t.get("template"),userId:t.get("userId"),userName:t.get("userName")}}();document.querySelector("#start").value=(t.end+1).toString()}function wT(t){t?(document.querySelector("#settings").style.display="none",document.querySelector("#loading").style.display=""):(document.querySelector("#settings").style.display="",document.querySelector("#loading").style.display="none")}var _T=null;!async function(){if(!mT()){wT(!0);try{await bT(),_T=await wo(),wT(!1),document.querySelector("#generate")?.addEventListener("click",gT),document.querySelector("#login")?.addEventListener("click",mo),function(t){if(t){document.querySelector("#generation-block").style.display="",document.querySelector("#login-block").style.display="none",document.querySelector("#login-info").innerHTML="ÐÑ Ð²Ð¾ÑÐ»Ð¸ ÐºÐ°Ðº "+t.name;let e=document.createElement("a");e.innerText="Ð²ÑÐ¹ÑÐ¸",e.addEventListener("click",bo),document.querySelector("#login-info").appendChild(e)}else document.querySelector("#generation-block").style.display="none",document.querySelector("#login-block").style.display=""}(_T)}catch(t){return void alert(t.message)}}}()}();
//# sourceMappingURL=app.js.map
