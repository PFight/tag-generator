!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function r(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function i(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function l(t,e){return t(e={exports:{}},e.exports),e.exports}var h=function(t){return t&&t.Math==Math&&t},f=h("object"==typeof globalThis&&globalThis)||h("object"==typeof window&&window)||h("object"==typeof self&&self)||h("object"==typeof u&&u)||function(){return this}()||Function("return this")(),d=function(t){try{return!!t()}catch(t){return!0}},p=!d((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),y={}.propertyIsEnumerable,v=Object.getOwnPropertyDescriptor,g={f:v&&!y.call({1:2},1)?function(t){var e=v(this,t);return!!e&&e.enumerable}:y},m=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},b={}.toString,w=function(t){return b.call(t).slice(8,-1)},I="".split,S=d((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==w(t)?I.call(t,""):Object(t)}:Object,E=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},T=function(t){return S(E(t))},_=function(t){return"object"==typeof t?null!==t:"function"==typeof t},k=function(t,e){if(!_(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!_(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!_(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!_(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},N=function(t){return Object(E(t))},A={}.hasOwnProperty,C=Object.hasOwn||function(t,e){return A.call(N(t),e)},D=f.document,R=_(D)&&_(D.createElement),O=function(t){return R?D.createElement(t):{}},x=!p&&!d((function(){return 7!=Object.defineProperty(O("div"),"a",{get:function(){return 7}}).a})),L=Object.getOwnPropertyDescriptor,F={f:p?L:function(t,e){if(t=T(t),e=k(e,!0),x)try{return L(t,e)}catch(t){}if(C(t,e))return m(!g.f.call(t,e),t[e])}},P=function(t){if(!_(t))throw TypeError(String(t)+" is not an object");return t},V=Object.defineProperty,U={f:p?V:function(t,e,n){if(P(t),e=k(e,!0),P(n),x)try{return V(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},M=p?function(t,e,n){return U.f(t,e,m(1,n))}:function(t,e,n){return t[e]=n,t},j=function(t,e){try{M(f,t,e)}catch(n){f[t]=e}return e},B=f["__core-js_shared__"]||j("__core-js_shared__",{}),K=Function.toString;"function"!=typeof B.inspectSource&&(B.inspectSource=function(t){return K.call(t)});var q,W,G,z=B.inspectSource,X=f.WeakMap,Z="function"==typeof X&&/native code/.test(z(X)),H=l((function(t){(t.exports=function(t,e){return B[t]||(B[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.2",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),Y=0,J=Math.random(),Q=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Y+J).toString(36)},$=H("keys"),tt=function(t){return $[t]||($[t]=Q(t))},et={},nt=f.WeakMap;if(Z||B.state){var rt=B.state||(B.state=new nt),it=rt.get,ot=rt.has,st=rt.set;q=function(t,e){if(ot.call(rt,t))throw new TypeError("Object already initialized");return e.facade=t,st.call(rt,t,e),e},W=function(t){return it.call(rt,t)||{}},G=function(t){return ot.call(rt,t)}}else{var at=tt("state");et[at]=!0,q=function(t,e){if(C(t,at))throw new TypeError("Object already initialized");return e.facade=t,M(t,at,e),e},W=function(t){return C(t,at)?t[at]:{}},G=function(t){return C(t,at)}}var ut,ct,lt={set:q,get:W,has:G,enforce:function(t){return G(t)?W(t):q(t,{})},getterFor:function(t){return function(e){var n;if(!_(e)||(n=W(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},ht=l((function(t){var e=lt.get,n=lt.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var s,a=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||C(i,"name")||M(i,"name",e),(s=n(i)).source||(s.source=r.join("string"==typeof e?e:""))),t!==f?(a?!c&&t[e]&&(u=!0):delete t[e],u?t[e]=i:M(t,e,i)):u?t[e]=i:j(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||z(this)}))})),ft=f,dt=function(t){return"function"==typeof t?t:void 0},pt=function(t,e){return arguments.length<2?dt(ft[t])||dt(f[t]):ft[t]&&ft[t][e]||f[t]&&f[t][e]},yt=Math.ceil,vt=Math.floor,gt=function(t){return isNaN(t=+t)?0:(t>0?vt:yt)(t)},mt=Math.min,bt=function(t){return t>0?mt(gt(t),9007199254740991):0},wt=Math.max,It=Math.min,St=function(t){return function(e,n,r){var i,o=T(e),s=bt(o.length),a=function(t,e){var n=gt(t);return n<0?wt(n+e,0):It(n,e)}(r,s);if(t&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},Et={includes:St(!0),indexOf:St(!1)},Tt=Et.indexOf,_t=function(t,e){var n,r=T(t),i=0,o=[];for(n in r)!C(et,n)&&C(r,n)&&o.push(n);for(;e.length>i;)C(r,n=e[i++])&&(~Tt(o,n)||o.push(n));return o},kt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Nt=kt.concat("length","prototype"),At={f:Object.getOwnPropertyNames||function(t){return _t(t,Nt)}},Ct={f:Object.getOwnPropertySymbols},Dt=pt("Reflect","ownKeys")||function(t){var e=At.f(P(t)),n=Ct.f;return n?e.concat(n(t)):e},Rt=function(t,e){for(var n=Dt(e),r=U.f,i=F.f,o=0;o<n.length;o++){var s=n[o];C(t,s)||r(t,s,i(e,s))}},Ot=/#|\.prototype\./,xt=function(t,e){var n=Ft[Lt(t)];return n==Vt||n!=Pt&&("function"==typeof e?d(e):!!e)},Lt=xt.normalize=function(t){return String(t).replace(Ot,".").toLowerCase()},Ft=xt.data={},Pt=xt.NATIVE="N",Vt=xt.POLYFILL="P",Ut=xt,Mt=F.f,jt=function(t,e){var n,r,i,o,s,a=t.target,u=t.global,c=t.stat;if(n=u?f:c?f[a]||j(a,{}):(f[a]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(s=Mt(n,r))&&s.value:n[r],!Ut(u?r:a+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Rt(o,i)}(t.sham||i&&i.sham)&&M(o,"sham",!0),ht(n,r,o,t)}},Bt=pt("navigator","userAgent")||"",Kt=f.process,qt=Kt&&Kt.versions,Wt=qt&&qt.v8;Wt?ct=(ut=Wt.split("."))[0]<4?1:ut[0]+ut[1]:Bt&&(!(ut=Bt.match(/Edge\/(\d+)/))||ut[1]>=74)&&(ut=Bt.match(/Chrome\/(\d+)/))&&(ct=ut[1]);var Gt,zt=ct&&+ct,Xt=!!Object.getOwnPropertySymbols&&!d((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&zt&&zt<41})),Zt=Xt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ht=H("wks"),Yt=f.Symbol,Jt=Zt?Yt:Yt&&Yt.withoutSetter||Q,Qt=function(t){return C(Ht,t)&&(Xt||"string"==typeof Ht[t])||(Xt&&C(Yt,t)?Ht[t]=Yt[t]:Ht[t]=Jt("Symbol."+t)),Ht[t]},$t=Qt("match"),te=function(t){if(function(t){var e;return _(t)&&(void 0!==(e=t[$t])?!!e:"RegExp"==w(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},ee=Qt("match"),ne=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[ee]=!1,"/./"[t](e)}catch(t){}}return!1},re=F.f,ie="".startsWith,oe=Math.min,se=ne("startsWith"),ae=!(se||(Gt=re(String.prototype,"startsWith"),!Gt||Gt.writable));jt({target:"String",proto:!0,forced:!ae&&!se},{startsWith:function(t){var e=String(E(this));te(t);var n=bt(oe(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return ie?ie.call(e,r,n):e.slice(n,n+r.length)===r}});var ue=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},ce=function(t,e,n){if(ue(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},le=Function.call,he=function(t,e,n){return ce(le,f[t].prototype[e],n)};he("String","startsWith");var fe=Array.isArray||function(t){return"Array"==w(t)},de=function(t,e,n){var r=k(e);r in t?U.f(t,r,m(0,n)):t[r]=n},pe=Qt("species"),ye=function(t,e){var n;return fe(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!fe(n.prototype)?_(n)&&null===(n=n[pe])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},ve=Qt("species"),ge=Qt("isConcatSpreadable"),me=zt>=51||!d((function(){var t=[];return t[ge]=!1,t.concat()[0]!==t})),be=zt>=51||!d((function(){var t=[];return(t.constructor={})[ve]=function(){return{foo:1}},1!==t.concat(Boolean).foo})),we=function(t){if(!_(t))return!1;var e=t[ge];return void 0!==e?!!e:fe(t)};jt({target:"Array",proto:!0,forced:!me||!be},{concat:function(t){var e,n,r,i,o,s=N(this),a=ye(s,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(we(o=-1===e?s:arguments[e])){if(u+(i=bt(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,u++)n in o&&de(a,u,o[n])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");de(a,u++,o)}return a.length=u,a}});var Ie={};Ie[Qt("toStringTag")]="z";var Se="[object z]"===String(Ie),Ee=Qt("toStringTag"),Te="Arguments"==w(function(){return arguments}()),_e=Se?w:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ee))?n:Te?w(e):"Object"==(r=w(e))&&"function"==typeof e.callee?"Arguments":r},ke=Se?{}.toString:function(){return"[object "+_e(this)+"]"};Se||ht(Object.prototype,"toString",ke,{unsafe:!0});var Ne,Ae=Object.keys||function(t){return _t(t,kt)},Ce=p?Object.defineProperties:function(t,e){P(t);for(var n,r=Ae(e),i=r.length,o=0;i>o;)U.f(t,n=r[o++],e[n]);return t},De=pt("document","documentElement"),Re=tt("IE_PROTO"),Oe=function(){},xe=function(t){return"<script>"+t+"<\/script>"},Le=function(){try{Ne=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Le=Ne?function(t){t.write(xe("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Ne):((e=O("iframe")).style.display="none",De.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(xe("document.F=Object")),t.close(),t.F);for(var n=kt.length;n--;)delete Le.prototype[kt[n]];return Le()};et[Re]=!0;var Fe=Object.create||function(t,e){var n;return null!==t?(Oe.prototype=P(t),n=new Oe,Oe.prototype=null,n[Re]=t):n=Le(),void 0===e?n:Ce(n,e)},Pe=At.f,Ve={}.toString,Ue="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Me={f:function(t){return Ue&&"[object Window]"==Ve.call(t)?function(t){try{return Pe(t)}catch(t){return Ue.slice()}}(t):Pe(T(t))}},je={f:Qt},Be=U.f,Ke=function(t){var e=ft.Symbol||(ft.Symbol={});C(e,t)||Be(e,t,{value:je.f(t)})},qe=U.f,We=Qt("toStringTag"),Ge=function(t,e,n){t&&!C(t=n?t:t.prototype,We)&&qe(t,We,{configurable:!0,value:e})},ze=[].push,Xe=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,s=7==t,a=5==t||o;return function(u,c,l,h){for(var f,d,p=N(u),y=S(p),v=ce(c,l,3),g=bt(y.length),m=0,b=h||ye,w=e?b(u,g):n||s?b(u,0):void 0;g>m;m++)if((a||m in y)&&(d=v(f=y[m],m,p),t))if(e)w[m]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return m;case 2:ze.call(w,f)}else switch(t){case 4:return!1;case 7:ze.call(w,f)}return o?-1:r||i?i:w}},Ze=[Xe(0),Xe(1),Xe(2),Xe(3),Xe(4),Xe(5),Xe(6),Xe(7)][0],He=tt("hidden"),Ye=Qt("toPrimitive"),Je=lt.set,Qe=lt.getterFor("Symbol"),$e=Object.prototype,tn=f.Symbol,en=pt("JSON","stringify"),nn=F.f,rn=U.f,on=Me.f,sn=g.f,an=H("symbols"),un=H("op-symbols"),cn=H("string-to-symbol-registry"),ln=H("symbol-to-string-registry"),hn=H("wks"),fn=f.QObject,dn=!fn||!fn.prototype||!fn.prototype.findChild,pn=p&&d((function(){return 7!=Fe(rn({},"a",{get:function(){return rn(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=nn($e,e);r&&delete $e[e],rn(t,e,n),r&&t!==$e&&rn($e,e,r)}:rn,yn=function(t,e){var n=an[t]=Fe(tn.prototype);return Je(n,{type:"Symbol",tag:t,description:e}),p||(n.description=e),n},vn=Zt?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof tn},gn=function(t,e,n){t===$e&&gn(un,e,n),P(t);var r=k(e,!0);return P(n),C(an,r)?(n.enumerable?(C(t,He)&&t[He][r]&&(t[He][r]=!1),n=Fe(n,{enumerable:m(0,!1)})):(C(t,He)||rn(t,He,m(1,{})),t[He][r]=!0),pn(t,r,n)):rn(t,r,n)},mn=function(t,e){P(t);var n=T(e),r=Ae(n).concat(Sn(n));return Ze(r,(function(e){p&&!bn.call(n,e)||gn(t,e,n[e])})),t},bn=function(t){var e=k(t,!0),n=sn.call(this,e);return!(this===$e&&C(an,e)&&!C(un,e))&&(!(n||!C(this,e)||!C(an,e)||C(this,He)&&this[He][e])||n)},wn=function(t,e){var n=T(t),r=k(e,!0);if(n!==$e||!C(an,r)||C(un,r)){var i=nn(n,r);return!i||!C(an,r)||C(n,He)&&n[He][r]||(i.enumerable=!0),i}},In=function(t){var e=on(T(t)),n=[];return Ze(e,(function(t){C(an,t)||C(et,t)||n.push(t)})),n},Sn=function(t){var e=t===$e,n=on(e?un:T(t)),r=[];return Ze(n,(function(t){!C(an,t)||e&&!C($e,t)||r.push(an[t])})),r};if(Xt||(ht((tn=function(){if(this instanceof tn)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=Q(t),n=function(t){this===$e&&n.call(un,t),C(this,He)&&C(this[He],e)&&(this[He][e]=!1),pn(this,e,m(1,t))};return p&&dn&&pn($e,e,{configurable:!0,set:n}),yn(e,t)}).prototype,"toString",(function(){return Qe(this).tag})),ht(tn,"withoutSetter",(function(t){return yn(Q(t),t)})),g.f=bn,U.f=gn,F.f=wn,At.f=Me.f=In,Ct.f=Sn,je.f=function(t){return yn(Qt(t),t)},p&&(rn(tn.prototype,"description",{configurable:!0,get:function(){return Qe(this).description}}),ht($e,"propertyIsEnumerable",bn,{unsafe:!0}))),jt({global:!0,wrap:!0,forced:!Xt,sham:!Xt},{Symbol:tn}),Ze(Ae(hn),(function(t){Ke(t)})),jt({target:"Symbol",stat:!0,forced:!Xt},{for:function(t){var e=String(t);if(C(cn,e))return cn[e];var n=tn(e);return cn[e]=n,ln[n]=e,n},keyFor:function(t){if(!vn(t))throw TypeError(t+" is not a symbol");if(C(ln,t))return ln[t]},useSetter:function(){dn=!0},useSimple:function(){dn=!1}}),jt({target:"Object",stat:!0,forced:!Xt,sham:!p},{create:function(t,e){return void 0===e?Fe(t):mn(Fe(t),e)},defineProperty:gn,defineProperties:mn,getOwnPropertyDescriptor:wn}),jt({target:"Object",stat:!0,forced:!Xt},{getOwnPropertyNames:In,getOwnPropertySymbols:Sn}),jt({target:"Object",stat:!0,forced:d((function(){Ct.f(1)}))},{getOwnPropertySymbols:function(t){return Ct.f(N(t))}}),en){var En=!Xt||d((function(){var t=tn();return"[null]"!=en([t])||"{}"!=en({a:t})||"{}"!=en(Object(t))}));jt({target:"JSON",stat:!0,forced:En},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(_(e)||void 0!==t)&&!vn(t))return fe(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!vn(e))return e}),i[1]=e,en.apply(null,i)}})}tn.prototype[Ye]||M(tn.prototype,Ye,tn.prototype.valueOf),Ge(tn,"Symbol"),et[He]=!0,Ke("asyncIterator");var Tn=U.f,_n=f.Symbol;if(p&&"function"==typeof _n&&(!("description"in _n.prototype)||void 0!==_n().description)){var kn={},Nn=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Nn?new _n(t):void 0===t?_n():_n(t);return""===t&&(kn[e]=!0),e};Rt(Nn,_n);var An=Nn.prototype=_n.prototype;An.constructor=Nn;var Cn=An.toString,Dn="Symbol(test)"==String(_n("test")),Rn=/^Symbol\((.*)\)[^)]+$/;Tn(An,"description",{configurable:!0,get:function(){var t=_(this)?this.valueOf():this,e=Cn.call(t);if(C(kn,t))return"";var n=Dn?e.slice(7,-1):e.replace(Rn,"$1");return""===n?void 0:n}}),jt({global:!0,forced:!0},{Symbol:Nn})}Ke("hasInstance"),Ke("isConcatSpreadable"),Ke("iterator"),Ke("match"),Ke("matchAll"),Ke("replace"),Ke("search"),Ke("species"),Ke("split"),Ke("toPrimitive"),Ke("toStringTag"),Ke("unscopables"),Ge(f.JSON,"JSON",!0),Ge(Math,"Math",!0),jt({global:!0},{Reflect:{}}),Ge(f.Reflect,"Reflect",!0),ft.Symbol;var On,xn,Ln,Fn=function(t){return function(e,n){var r,i,o=String(E(e)),s=gt(n),a=o.length;return s<0||s>=a?t?"":void 0:(r=o.charCodeAt(s))<55296||r>56319||s+1===a||(i=o.charCodeAt(s+1))<56320||i>57343?t?o.charAt(s):r:t?o.slice(s,s+2):i-56320+(r-55296<<10)+65536}},Pn={codeAt:Fn(!1),charAt:Fn(!0)},Vn=!d((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Un=tt("IE_PROTO"),Mn=Object.prototype,jn=Vn?Object.getPrototypeOf:function(t){return t=N(t),C(t,Un)?t[Un]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Mn:null},Bn=Qt("iterator"),Kn=!1;[].keys&&("next"in(Ln=[].keys())?(xn=jn(jn(Ln)))!==Object.prototype&&(On=xn):Kn=!0),(null==On||d((function(){var t={};return On[Bn].call(t)!==t})))&&(On={}),C(On,Bn)||M(On,Bn,(function(){return this}));var qn={IteratorPrototype:On,BUGGY_SAFARI_ITERATORS:Kn},Wn={},Gn=qn.IteratorPrototype,zn=function(){return this},Xn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return P(n),function(t){if(!_(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Zn=qn.IteratorPrototype,Hn=qn.BUGGY_SAFARI_ITERATORS,Yn=Qt("iterator"),Jn=function(){return this},Qn=function(t,e,n,r,i,o,s){!function(t,e,n){var r=e+" Iterator";t.prototype=Fe(Gn,{next:m(1,n)}),Ge(t,r,!1),Wn[r]=zn}(n,e,r);var a,u,c,l=function(t){if(t===i&&y)return y;if(!Hn&&t in d)return d[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",f=!1,d=t.prototype,p=d[Yn]||d["@@iterator"]||i&&d[i],y=!Hn&&p||l(i),v="Array"==e&&d.entries||p;if(v&&(a=jn(v.call(new t)),Zn!==Object.prototype&&a.next&&(jn(a)!==Zn&&(Xn?Xn(a,Zn):"function"!=typeof a[Yn]&&M(a,Yn,Jn)),Ge(a,h,!0))),"values"==i&&p&&"values"!==p.name&&(f=!0,y=function(){return p.call(this)}),d[Yn]!==y&&M(d,Yn,y),Wn[e]=y,i)if(u={values:l("values"),keys:o?y:l("keys"),entries:l("entries")},s)for(c in u)(Hn||f||!(c in d))&&ht(d,c,u[c]);else jt({target:e,proto:!0,forced:Hn||f},u);return u},$n=Pn.charAt,tr=lt.set,er=lt.getterFor("String Iterator");Qn(String,"String",(function(t){tr(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=er(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=$n(n,r),e.index+=t.length,{value:t,done:!1})}));var nr=function(t){var e=t.return;if(void 0!==e)return P(e.call(t)).value},rr=function(t,e,n,r){try{return r?e(P(n)[0],n[1]):e(n)}catch(e){throw nr(t),e}},ir=Qt("iterator"),or=Array.prototype,sr=function(t){return void 0!==t&&(Wn.Array===t||or[ir]===t)},ar=Qt("iterator"),ur=function(t){if(null!=t)return t[ar]||t["@@iterator"]||Wn[_e(t)]},cr=Qt("iterator"),lr=!1;try{var hr=0,fr={next:function(){return{done:!!hr++}},return:function(){lr=!0}};fr[cr]=function(){return this},Array.from(fr,(function(){throw 2}))}catch(t){}var dr=function(t,e){if(!e&&!lr)return!1;var n=!1;try{var r={};r[cr]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},pr=!dr((function(t){Array.from(t)}));jt({target:"Array",stat:!0,forced:pr},{from:function(t){var e,n,r,i,o,s,a=N(t),u="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,h=void 0!==l,f=ur(a),d=0;if(h&&(l=ce(l,c>2?arguments[2]:void 0,2)),null==f||u==Array&&sr(f))for(n=new u(e=bt(a.length));e>d;d++)s=h?l(a[d],d):a[d],de(n,d,s);else for(o=(i=f.call(a)).next,n=new u;!(r=o.call(i)).done;d++)s=h?rr(i,l,[r.value,d],!0):r.value,de(n,d,s);return n.length=d,n}}),ft.Array.from;var yr,vr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,gr=U.f,mr=f.Int8Array,br=mr&&mr.prototype,wr=f.Uint8ClampedArray,Ir=wr&&wr.prototype,Sr=mr&&jn(mr),Er=br&&jn(br),Tr=Object.prototype,_r=Tr.isPrototypeOf,kr=Qt("toStringTag"),Nr=Q("TYPED_ARRAY_TAG"),Ar=vr&&!!Xn&&"Opera"!==_e(f.opera),Cr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Dr={BigInt64Array:8,BigUint64Array:8};for(yr in Cr)f[yr]||(Ar=!1);if((!Ar||"function"!=typeof Sr||Sr===Function.prototype)&&(Sr=function(){throw TypeError("Incorrect invocation")},Ar))for(yr in Cr)f[yr]&&Xn(f[yr],Sr);if((!Ar||!Er||Er===Tr)&&(Er=Sr.prototype,Ar))for(yr in Cr)f[yr]&&Xn(f[yr].prototype,Er);if(Ar&&jn(Ir)!==Er&&Xn(Ir,Er),p&&!C(Er,kr))for(yr in gr(Er,kr,{get:function(){return _(this)?this[Nr]:void 0}}),Cr)f[yr]&&M(f[yr],Nr,yr);var Rr=Qt("species"),Or=function(t){if(function(t){if(!_(t))return!1;var e=_e(t);return C(Cr,e)||C(Dr,e)}(t))return t;throw TypeError("Target is not a typed array")},xr=function(t){if(Xn){if(_r.call(Sr,t))return t}else for(var e in Cr)if(C(Cr,yr)){var n=f[e];if(n&&(t===n||_r.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},Lr=[].slice;!function(t,e,n){if(p){if(n)for(var r in Cr){var i=f[r];if(i&&C(i.prototype,t))try{delete i.prototype[t]}catch(t){}}Er[t]&&!n||ht(Er,t,n?e:Ar&&br[t]||e)}}("slice",(function(t,e){for(var n=Lr.call(Or(this),t,e),r=function(t,e){var n,r=P(t).constructor;return void 0===r||null==(n=P(r)[Rr])?e:ue(n)}(this,this.constructor),i=0,o=n.length,s=new(xr(r))(o);o>i;)s[i]=n[i++];return s}),d((function(){new Int8Array(1).slice()})));var Fr=Qt("unscopables"),Pr=Array.prototype;null==Pr[Fr]&&U.f(Pr,Fr,{configurable:!0,value:Fe(null)});var Vr=function(t){Pr[Fr][t]=!0},Ur=Et.includes;jt({target:"Array",proto:!0},{includes:function(t){return Ur(this,t,arguments.length>1?arguments[1]:void 0)}}),Vr("includes"),he("Array","includes"),jt({target:"String",proto:!0,forced:!ne("includes")},{includes:function(t){return!!~String(E(this)).indexOf(te(t),arguments.length>1?arguments[1]:void 0)}}),he("String","includes");var Mr=!d((function(){return Object.isExtensible(Object.preventExtensions({}))})),jr=l((function(t){var e=U.f,n=Q("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+r++,weakData:{}}})},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!_(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!C(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!C(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return Mr&&s.REQUIRED&&i(t)&&!C(t,n)&&o(t),t}};et[n]=!0}));jr.REQUIRED,jr.fastKey,jr.getWeakData,jr.onFreeze;var Br=function(t,e){this.stopped=t,this.result=e},Kr=function(t,e,n){var r,i,o,s,a,u,c,l=n&&n.that,h=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),p=ce(e,l,1+h+d),y=function(t){return r&&nr(r),new Br(!0,t)},v=function(t){return h?(P(t),d?p(t[0],t[1],y):p(t[0],t[1])):d?p(t,y):p(t)};if(f)r=t;else{if("function"!=typeof(i=ur(t)))throw TypeError("Target is not iterable");if(sr(i)){for(o=0,s=bt(t.length);s>o;o++)if((a=v(t[o]))&&a instanceof Br)return a;return new Br(!1)}r=i.call(t)}for(u=r.next;!(c=u.call(r)).done;){try{a=v(c.value)}catch(t){throw nr(r),t}if("object"==typeof a&&a&&a instanceof Br)return a}return new Br(!1)},qr=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},Wr=function(t,e,n){for(var r in e)ht(t,r,e[r],n);return t},Gr=Qt("species"),zr=U.f,Xr=jr.fastKey,Zr=lt.set,Hr=lt.getterFor;!function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",s=f[t],a=s&&s.prototype,u=s,c={},l=function(t){var e=a[t];ht(a,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!_(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return i&&!_(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!_(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Ut(t,"function"!=typeof s||!(i||a.forEach&&!d((function(){(new s).entries().next()})))))u=n.getConstructor(e,t,r,o),jr.REQUIRED=!0;else if(Ut(t,!0)){var h=new u,p=h[o](i?{}:-0,1)!=h,y=d((function(){h.has(1)})),v=dr((function(t){new s(t)})),g=!i&&d((function(){for(var t=new s,e=5;e--;)t[o](e,e);return!t.has(-0)}));v||((u=e((function(e,n){qr(e,u,t);var i=function(t,e,n){var r,i;return Xn&&"function"==typeof(r=e.constructor)&&r!==n&&_(i=r.prototype)&&i!==n.prototype&&Xn(t,i),t}(new s,e,u);return null!=n&&Kr(n,i[o],{that:i,AS_ENTRIES:r}),i}))).prototype=a,a.constructor=u),(y||g)&&(l("delete"),l("has"),r&&l("get")),(g||p)&&l(o),i&&a.clear&&delete a.clear}c[t]=u,jt({global:!0,forced:u!=s},c),Ge(u,t),i||n.setStrong(u,t,r)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,r){var i=t((function(t,o){qr(t,i,e),Zr(t,{type:e,index:Fe(null),first:void 0,last:void 0,size:0}),p||(t.size=0),null!=o&&Kr(o,t[r],{that:t,AS_ENTRIES:n})})),o=Hr(e),s=function(t,e,n){var r,i,s=o(t),u=a(t,e);return u?u.value=n:(s.last=u={index:i=Xr(e,!0),key:e,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=u),r&&(r.next=u),p?s.size++:t.size++,"F"!==i&&(s.index[i]=u)),t},a=function(t,e){var n,r=o(t),i=Xr(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Wr(i.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,p?t.size=0:this.size=0},delete:function(t){var e=this,n=o(e),r=a(e,t);if(r){var i=r.next,s=r.previous;delete n.index[r.index],r.removed=!0,s&&(s.next=i),i&&(i.previous=s),n.first==r&&(n.first=i),n.last==r&&(n.last=s),p?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=o(this),r=ce(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!a(this,t)}}),Wr(i.prototype,n?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),p&&zr(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=Hr(e),o=Hr(r);Qn(t,e,(function(t,e){Zr(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),function(t){var e=pt(t),n=U.f;p&&e&&!e[Gr]&&n(e,Gr,{configurable:!0,get:function(){return this}})}(e)}});var Yr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Jr=lt.set,Qr=lt.getterFor("Array Iterator"),$r=Qn(Array,"Array",(function(t,e){Jr(this,{type:"Array Iterator",target:T(t),index:0,kind:e})}),(function(){var t=Qr(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Wn.Arguments=Wn.Array,Vr("keys"),Vr("values"),Vr("entries");var ti=Qt("iterator"),ei=Qt("toStringTag"),ni=$r.values;for(var ri in Yr){var ii=f[ri],oi=ii&&ii.prototype;if(oi){if(oi[ti]!==ni)try{M(oi,ti,ni)}catch(t){oi[ti]=ni}if(oi[ei]||M(oi,ei,ri),Yr[ri])for(var si in $r)if(oi[si]!==$r[si])try{M(oi,si,$r[si])}catch(t){oi[si]=$r[si]}}}function ai(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))}function ui(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var s=n.then;if("function"==typeof s)return void s.call(n,(function(e){o(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0==--i&&e(r)}))}r[t]={status:"fulfilled",value:n},0==--i&&e(r)}for(var s=0;s<r.length;s++)o(s,r[s])}))}ft.Set;var ci=setTimeout;function li(t){return Boolean(t&&void 0!==t.length)}function hi(){}function fi(t){if(!(this instanceof fi))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],mi(t,this)}function di(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,fi._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void yi(e.promise,t)}pi(e.promise,r)}else(1===t._state?pi:yi)(e.promise,t._value)}))):t._deferreds.push(e)}function pi(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof fi)return t._state=3,t._value=e,void vi(t);if("function"==typeof n)return void mi((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,vi(t)}catch(e){yi(t,e)}var r,i}function yi(t,e){t._state=2,t._value=e,vi(t)}function vi(t){2===t._state&&0===t._deferreds.length&&fi._immediateFn((function(){t._handled||fi._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)di(t,t._deferreds[e]);t._deferreds=null}function gi(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function mi(t,e){var n=!1;try{t((function(t){n||(n=!0,pi(e,t))}),(function(t){n||(n=!0,yi(e,t))}))}catch(t){if(n)return;n=!0,yi(e,t)}}fi.prototype.catch=function(t){return this.then(null,t)},fi.prototype.then=function(t,e){var n=new this.constructor(hi);return di(this,new gi(t,e,n)),n},fi.prototype.finally=ai,fi.all=function(t){return new fi((function(e,n){if(!li(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(e){o(t,e)}),n)}r[t]=s,0==--i&&e(r)}catch(t){n(t)}}for(var s=0;s<r.length;s++)o(s,r[s])}))},fi.allSettled=ui,fi.resolve=function(t){return t&&"object"==typeof t&&t.constructor===fi?t:new fi((function(e){e(t)}))},fi.reject=function(t){return new fi((function(e,n){n(t)}))},fi.race=function(t){return new fi((function(e,n){if(!li(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)fi.resolve(t[r]).then(e,n)}))},fi._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){ci(t,0)},fi._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var bi=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"function"!=typeof bi.Promise?bi.Promise=fi:bi.Promise.prototype.finally?bi.Promise.allSettled||(bi.Promise.allSettled=ui):bi.Promise.prototype.finally=ai,function(t){function e(){}function n(t,e){if(t=void 0===t?"utf-8":t,e=void 0===e?{fatal:!1}:e,-1===i.indexOf(t.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+t+"') is invalid.");if(e.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function r(t){for(var e=0,n=Math.min(65536,t.length+1),r=new Uint16Array(n),i=[],o=0;;){var s=e<t.length;if(!s||o>=n-1){if(i.push(String.fromCharCode.apply(null,r.subarray(0,o))),!s)return i.join("");t=t.subarray(e),o=e=0}if(0==(128&(s=t[e++])))r[o++]=s;else if(192==(224&s)){var a=63&t[e++];r[o++]=(31&s)<<6|a}else if(224==(240&s)){a=63&t[e++];var u=63&t[e++];r[o++]=(31&s)<<12|a<<6|u}else 240==(248&s)&&(65535<(s=(7&s)<<18|(a=63&t[e++])<<12|(u=63&t[e++])<<6|63&t[e++])&&(s-=65536,r[o++]=s>>>10&1023|55296,s=56320|1023&s),r[o++]=s)}}if(t.TextEncoder&&t.TextDecoder)return!1;var i=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t,e){if((e=void 0===e?{stream:!1}:e).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");e=0;for(var n=t.length,r=0,i=Math.max(32,n+(n>>>1)+7),o=new Uint8Array(i>>>3<<3);e<n;){var s=t.charCodeAt(e++);if(55296<=s&&56319>=s){if(e<n){var a=t.charCodeAt(e);56320==(64512&a)&&(++e,s=((1023&s)<<10)+(1023&a)+65536)}if(55296<=s&&56319>=s)continue}if(r+4>o.length&&(i+=8,i=(i*=1+e/t.length*2)>>>3<<3,(a=new Uint8Array(i)).set(o),o=a),0==(4294967168&s))o[r++]=s;else{if(0==(4294965248&s))o[r++]=s>>>6&31|192;else if(0==(4294901760&s))o[r++]=s>>>12&15|224,o[r++]=s>>>6&63|128;else{if(0!=(4292870144&s))continue;o[r++]=s>>>18&7|240,o[r++]=s>>>12&63|128,o[r++]=s>>>6&63|128}o[r++]=63&s|128}}return o.slice?o.slice(0,r):o.subarray(0,r)},Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1});var o=r;"function"==typeof Buffer&&Buffer.from?o=function(t){return Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(o=function(t){var e=URL.createObjectURL(new Blob([t],{type:"text/plain;charset=UTF-8"}));try{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(),n.responseText}catch(e){return r(t)}finally{URL.revokeObjectURL(e)}}),n.prototype.decode=function(t,e){if((e=void 0===e?{stream:!1}:e).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return t=t instanceof Uint8Array?t:t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer):new Uint8Array(t),o(t)},t.TextEncoder=e,t.TextDecoder=n}("undefined"!=typeof window?window:u),function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?s(t):e}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=i(t);if(e){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=l(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var f=function(){function e(){t(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(e,[{key:"addEventListener",value:function(t,e,n){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push({callback:e,options:n})}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],r=0,i=n.length;r<i;r++)if(n[r].callback===e)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(t){if(t.type in this.listeners){for(var e=this.listeners[t.type].slice(),n=0,r=e.length;n<r;n++){var i=e[n];try{i.callback.call(this,t)}catch(t){Promise.resolve().then((function(){throw t}))}i.options&&i.options.once&&this.removeEventListener(t.type,i.callback)}return!t.defaultPrevented}}}]),e}(),d=function(e){r(a,e);var o=c(a);function a(){var e;return t(this,a),(e=o.call(this)).listeners||f.call(s(e)),Object.defineProperty(s(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(s(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return n(a,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),h(i(a.prototype),"dispatchEvent",this).call(this,t)}}]),a}(f),p=function(){function e(){t(this,e),Object.defineProperty(this,"signal",{value:new d,writable:!0,configurable:!0})}return n(e,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(p.prototype[Symbol.toStringTag]="AbortController",d.prototype[Symbol.toStringTag]="AbortSignal"),function(t){(function(t){return t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof t.Request&&!t.Request.prototype.hasOwnProperty("signal")||!t.AbortController})(t)&&(t.AbortController=p,t.AbortSignal=d)}("undefined"!=typeof self?self:u)}();var wi=l((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){var t=this;this.locked=new Map,this.addToLocked=function(e,n){var r=t.locked.get(e);void 0===r?void 0===n?t.locked.set(e,[]):t.locked.set(e,[n]):void 0!==n&&(r.unshift(n),t.locked.set(e,r))},this.isLocked=function(e){return t.locked.has(e)},this.lock=function(e){return new Promise((function(n,r){t.isLocked(e)?t.addToLocked(e,n):(t.addToLocked(e),n())}))},this.unlock=function(e){var n=t.locked.get(e);if(void 0!==n&&0!==n.length){var r=n.pop();t.locked.set(e,n),void 0!==r&&setTimeout(r,0)}else t.locked.delete(e)}}return t.getInstance=function(){return void 0===t.instance&&(t.instance=new t),t.instance},t}();e.default=function(){return n.getInstance()}}));c(wi);var Ii=c(l((function(t,e){var n=u&&u.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(s,a)}u((r=r.apply(t,e||[])).next())}))},r=u&&u.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var i="browser-tabs-lock-key";function o(t){return new Promise((function(e){return setTimeout(e,t)}))}function s(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="",r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}var a=function(){function t(){this.acquiredIatSet=new Set,this.id=Date.now().toString()+s(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),void 0===t.waiters&&(t.waiters=[])}return t.prototype.acquireLock=function(e,a){return void 0===a&&(a=5e3),n(this,void 0,void 0,(function(){var n,u,c,l,h,f;return r(this,(function(r){switch(r.label){case 0:n=Date.now()+s(4),u=Date.now()+a,c=i+"-"+e,l=window.localStorage,r.label=1;case 1:return Date.now()<u?[4,o(30)]:[3,8];case 2:return r.sent(),null!==l.getItem(c)?[3,5]:(h=this.id+"-"+e+"-"+n,[4,o(Math.floor(25*Math.random()))]);case 3:return r.sent(),l.setItem(c,JSON.stringify({id:this.id,iat:n,timeoutKey:h,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,o(30)];case 4:return r.sent(),null!==(f=l.getItem(c))&&(f=JSON.parse(f)).id===this.id&&f.iat===n?(this.acquiredIatSet.add(n),this.refreshLockWhileAcquired(c,n),[2,!0]):[3,7];case 5:return t.lockCorrector(),[4,this.waitForSomethingToChange(u)];case 6:r.sent(),r.label=7;case 7:return n=Date.now()+s(4),[3,1];case 8:return[2,!1]}}))}))},t.prototype.refreshLockWhileAcquired=function(t,e){return n(this,void 0,void 0,(function(){var i=this;return r(this,(function(o){return setTimeout((function(){return n(i,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return[4,wi.default().lock(e)];case 1:return r.sent(),this.acquiredIatSet.has(e)?(n=window.localStorage,null===(i=n.getItem(t))?(wi.default().unlock(e),[2]):((i=JSON.parse(i)).timeRefreshed=Date.now(),n.setItem(t,JSON.stringify(i)),wi.default().unlock(e),this.refreshLockWhileAcquired(t,e),[2])):(wi.default().unlock(e),[2])}}))}))}),1e3),[2]}))}))},t.prototype.waitForSomethingToChange=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){var r=!1,i=Date.now(),o=!1;function s(){if(o||(window.removeEventListener("storage",s),t.removeFromWaiting(s),clearTimeout(a),o=!0),!r){r=!0;var e=50-(Date.now()-i);e>0?setTimeout(n,e):n()}}window.addEventListener("storage",s),t.addToWaiting(s);var a=setTimeout(s,Math.max(0,e-Date.now()))}))];case 1:return n.sent(),[2]}}))}))},t.addToWaiting=function(e){this.removeFromWaiting(e),void 0!==t.waiters&&t.waiters.push(e)},t.removeFromWaiting=function(e){void 0!==t.waiters&&(t.waiters=t.waiters.filter((function(t){return t!==e})))},t.notifyWaiters=function(){void 0!==t.waiters&&t.waiters.slice().forEach((function(t){return t()}))},t.prototype.releaseLock=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.releaseLock__private__(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.releaseLock__private__=function(e){return n(this,void 0,void 0,(function(){var n,o,s;return r(this,(function(r){switch(r.label){case 0:return n=window.localStorage,o=i+"-"+e,null===(s=n.getItem(o))?[2]:(s=JSON.parse(s)).id!==this.id?[3,2]:[4,wi.default().lock(s.iat)];case 1:r.sent(),this.acquiredIatSet.delete(s.iat),n.removeItem(o),wi.default().unlock(s.iat),t.notifyWaiters(),r.label=2;case 2:return[2]}}))}))},t.lockCorrector=function(){for(var e=Date.now()-5e3,n=window.localStorage,r=Object.keys(n),o=!1,s=0;s<r.length;s++){var a=r[s];if(a.includes(i)){var u=n.getItem(a);null!==u&&(void 0===(u=JSON.parse(u)).timeRefreshed&&u.timeAcquired<e||void 0!==u.timeRefreshed&&u.timeRefreshed<e)&&(n.removeItem(a),o=!0)}}o&&t.notifyWaiters()},t.waiters=void 0,t}();e.default=a}))),Si={timeoutInSeconds:60},Ei=["login_required","consent_required","interaction_required","account_selection_required","access_denied"],Ti={name:"auth0-spa-js",version:"1.17.0"},_i=function(t){function n(e,r){var i=t.call(this,r)||this;return i.error=e,i.error_description=r,Object.setPrototypeOf(i,n.prototype),i}return e(n,t),n.fromPayload=function(t){return new n(t.error,t.error_description)},n}(Error),ki=function(t){function n(e,r,i,o){void 0===o&&(o=null);var s=t.call(this,e,r)||this;return s.state=i,s.appState=o,Object.setPrototypeOf(s,n.prototype),s}return e(n,t),n}(_i),Ni=function(t){function n(){var e=t.call(this,"timeout","Timeout")||this;return Object.setPrototypeOf(e,n.prototype),e}return e(n,t),n}(_i),Ai=function(t){function n(e){var r=t.call(this)||this;return r.popup=e,Object.setPrototypeOf(r,n.prototype),r}return e(n,t),n}(Ni),Ci=function(t){function n(e){var r=t.call(this,"cancelled","Popup closed")||this;return r.popup=e,Object.setPrototypeOf(r,n.prototype),r}return e(n,t),n}(_i),Di=function(t){return new Promise((function(e,n){var r,i=setInterval((function(){t.popup&&t.popup.closed&&(clearInterval(i),clearTimeout(o),window.removeEventListener("message",r,!1),n(new Ci(t.popup)))}),1e3),o=setTimeout((function(){clearInterval(i),n(new Ai(t.popup)),window.removeEventListener("message",r,!1)}),1e3*(t.timeoutInSeconds||60));r=function(s){if(s.data&&"authorization_response"===s.data.type){if(clearTimeout(o),clearInterval(i),window.removeEventListener("message",r,!1),t.popup.close(),s.data.response.error)return n(_i.fromPayload(s.data.response));e(s.data.response)}},window.addEventListener("message",r)}))},Ri=function(){return window.crypto||window.msCrypto},Oi=function(){var t=Ri();return t.subtle||t.webkitSubtle},xi=function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",e="";return Array.from(Ri().getRandomValues(new Uint8Array(43))).forEach((function(n){return e+=t[n%t.length]})),e},Li=function(t){return btoa(t)},Fi=function(t){return Object.keys(t).filter((function(e){return void 0!==t[e]})).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},Pi=function(t){return i(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=Oi().digest({name:"SHA-256"},(new TextEncoder).encode(t)),window.msCrypto?[2,new Promise((function(t,n){e.oncomplete=function(e){t(e.target.result)},e.onerror=function(t){n(t.error)},e.onabort=function(){n("The digest operation was aborted")}}))]:[4,e];case 1:return[2,n.sent()]}}))}))},Vi=function(t){return function(t){return decodeURIComponent(atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(t.replace(/_/g,"/").replace(/-/g,"+"))},Ui=function(t){var e=new Uint8Array(t);return function(t){var e={"+":"-","/":"_","=":""};return t.replace(/[+/=]/g,(function(t){return e[t]}))}(window.btoa(String.fromCharCode.apply(String,a([],s(Array.from(e))))))},Mi=function(t,e){return i(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return[4,(o=t,s=e,s=s||{},new Promise((function(t,e){var n=new XMLHttpRequest,r=[],i=[],a={},u=function(){return{ok:2==(n.status/100|0),statusText:n.statusText,status:n.status,url:n.responseURL,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(n.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([n.response]))},clone:u,headers:{keys:function(){return r},entries:function(){return i},get:function(t){return a[t.toLowerCase()]},has:function(t){return t.toLowerCase()in a}}}};for(var c in n.open(s.method||"get",o,!0),n.onload=function(){n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){r.push(e=e.toLowerCase()),i.push([e,n]),a[e]=a[e]?a[e]+","+n:n})),t(u())},n.onerror=e,n.withCredentials="include"==s.credentials,s.headers)n.setRequestHeader(c,s.headers[c]);n.send(s.body||null)})))];case 1:return n=i.sent(),r={ok:n.ok},[4,n.json()];case 2:return[2,(r.json=i.sent(),r)]}var o,s}))}))},ji=function(t,e,n){return i(void 0,void 0,void 0,(function(){var r,i;return o(this,(function(o){return r=new AbortController,e.signal=r.signal,[2,Promise.race([Mi(t,e),new Promise((function(t,e){i=setTimeout((function(){r.abort(),e(new Error("Timeout when executing 'fetch'"))}),n)}))]).finally((function(){clearTimeout(i)}))]}))}))},Bi=function(t,e,n,r,s,a,u){return i(void 0,void 0,void 0,(function(){return o(this,(function(i){return[2,(o={auth:{audience:e,scope:n},timeout:s,fetchUrl:t,fetchOptions:r,useFormData:u},c=a,new Promise((function(t,e){var n=new MessageChannel;n.port1.onmessage=function(n){n.data.error?e(new Error(n.data.error)):t(n.data)},c.postMessage(o,[n.port2])})))];var o,c}))}))},Ki=function(t,e,n,r,s,a,u){return void 0===u&&(u=1e4),i(void 0,void 0,void 0,(function(){return o(this,(function(i){return s?[2,Bi(t,e,n,r,u,s,a)]:[2,ji(t,r,u)]}))}))};function qi(t,e,n,s,a,u,c){return i(this,void 0,void 0,(function(){var i,l,h,f,d,p,y,v;return o(this,(function(o){switch(o.label){case 0:i=null,h=0,o.label=1;case 1:if(!(h<3))return[3,6];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,Ki(t,n,s,a,u,c,e)];case 3:return l=o.sent(),i=null,[3,6];case 4:return f=o.sent(),i=f,[3,5];case 5:return h++,[3,1];case 6:if(i)throw i.message=i.message||"Failed to fetch",i;if(d=l.json,p=d.error,y=d.error_description,v=r(d,["error","error_description"]),!l.ok)throw new _i(p||"request_error",y||"HTTP error. Unable to fetch "+t);return[2,v]}}))}))}function Wi(t,e){var n=t.baseUrl,s=t.timeout,a=t.audience,u=t.scope,c=t.auth0Client,l=t.useFormData,h=r(t,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);return i(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=l?Fi(h):JSON.stringify(h),[4,qi(n+"/oauth/token",s,a||"default",u,{method:"POST",body:t,headers:{"Content-Type":l?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(c||Ti))}},e,l)];case 1:return[2,r.sent()]}}))}))}var Gi=function(t){return Array.from(new Set(t))},zi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gi(t.join(" ").trim().split(/\s+/)).join(" ")},Xi=function(){function t(t,e){void 0===e&&(e="@@auth0spajs@@"),this.prefix=e,this.client_id=t.client_id,this.scope=t.scope,this.audience=t.audience}return t.prototype.toKey=function(){return this.prefix+"::"+this.client_id+"::"+this.audience+"::"+this.scope},t.fromKey=function(e){var n=s(e.split("::"),4),r=n[0],i=n[1],o=n[2];return new t({client_id:i,scope:n[3],audience:o},r)},t.fromCacheEntry=function(e){return new t({scope:e.scope,audience:e.audience,client_id:e.client_id})},t}(),Zi=function(){function t(){}return t.prototype.set=function(t,e){localStorage.setItem(t,JSON.stringify(e))},t.prototype.get=function(t){var e=window.localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(t){return}},t.prototype.remove=function(t){localStorage.removeItem(t)},t.prototype.allKeys=function(){return Object.keys(window.localStorage).filter((function(t){return t.startsWith("@@auth0spajs@@")}))},t}(),Hi=function(){var t;this.enclosedCache=(t={},{set:function(e,n){t[e]=n},get:function(e){var n=t[e];if(n)return n},remove:function(e){delete t[e]},allKeys:function(){return Object.keys(t)}})},Yi=function(){function t(t,e){this.cache=t,this.clientId=e,this.manifestKey=this.createManifestKeyFrom(e)}return t.prototype.add=function(t){var e;return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return r=Set.bind,[4,this.cache.get(this.manifestKey)];case 1:return(n=new(r.apply(Set,[void 0,(null===(e=i.sent())||void 0===e?void 0:e.keys)||[]]))).add(t),[4,this.cache.set(this.manifestKey,{keys:a([],s(n))})];case 2:return i.sent(),[2]}}))}))},t.prototype.remove=function(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,this.cache.get(this.manifestKey)];case 1:return(e=r.sent())?((n=new Set(e.keys)).delete(t),n.size>0?[4,this.cache.set(this.manifestKey,{keys:a([],s(n))})]:[3,3]):[3,5];case 2:return[2,r.sent()];case 3:return[4,this.cache.remove(this.manifestKey)];case 4:return[2,r.sent()];case 5:return[2]}}))}))},t.prototype.get=function(){return this.cache.get(this.manifestKey)},t.prototype.clear=function(){return this.cache.remove(this.manifestKey)},t.prototype.createManifestKeyFrom=function(t){return"@@auth0spajs@@::"+t},t}(),Ji=function(){function t(t,e){this.cache=t,t.allKeys||(this.keyManifest=new Yi(this.cache,e))}return t.prototype.get=function(t,e){var n;return void 0===e&&(e=0),i(this,void 0,void 0,(function(){var r,i,s,a;return o(this,(function(o){switch(o.label){case 0:return[4,this.cache.get(t.toKey())];case 1:return(r=o.sent())?[3,4]:[4,this.getCacheKeys()];case 2:return(i=o.sent())?(s=this.matchExistingCacheKey(t,i),[4,this.cache.get(s)]):[2];case 3:r=o.sent(),o.label=4;case 4:return r?(a=Math.floor(Date.now()/1e3),r.expiresAt-e<a?r.body.refresh_token?(r.body={refresh_token:r.body.refresh_token},[4,this.cache.set(t.toKey(),r)]):[3,6]:[3,9]):[2];case 5:return o.sent(),[2,r.body];case 6:return[4,this.cache.remove(t.toKey())];case 7:return o.sent(),[4,null===(n=this.keyManifest)||void 0===n?void 0:n.remove(t.toKey())];case 8:return o.sent(),[2];case 9:return[2,r.body]}}))}))},t.prototype.set=function(t){var e;return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return n=new Xi({client_id:t.client_id,scope:t.scope,audience:t.audience}),r=this.wrapCacheEntry(t),[4,this.cache.set(n.toKey(),r)];case 1:return i.sent(),[4,null===(e=this.keyManifest)||void 0===e?void 0:e.add(n.toKey())];case 2:return i.sent(),[2]}}))}))},t.prototype.clear=function(){var t;return i(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){switch(r.label){case 0:return[4,this.getCacheKeys()];case 1:return(e=r.sent())?(e.forEach((function(t){return i(n,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.cache.remove(t)];case 1:return e.sent(),[2]}}))}))})),[4,null===(t=this.keyManifest)||void 0===t?void 0:t.clear()]):[2];case 2:return r.sent(),[2]}}))}))},t.prototype.clearSync=function(){var t=this,e=this.cache.allKeys();e&&e.forEach((function(e){t.cache.remove(e)}))},t.prototype.wrapCacheEntry=function(t){var e=Math.floor(Date.now()/1e3)+t.expires_in;return{body:t,expiresAt:Math.min(e,t.decodedToken.claims.exp)}},t.prototype.getCacheKeys=function(){var t;return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return this.keyManifest?[4,this.keyManifest.get()]:[3,2];case 1:return e=null===(t=n.sent())||void 0===t?void 0:t.keys,[3,4];case 2:return[4,this.cache.allKeys()];case 3:e=n.sent(),n.label=4;case 4:return[2,e]}}))}))},t.prototype.matchExistingCacheKey=function(t,e){return e.filter((function(e){var n=Xi.fromKey(e),r=new Set(n.scope&&n.scope.split(" ")),i=t.scope.split(" "),o=n.scope&&i.reduce((function(t,e){return t&&r.has(e)}),!0);return"@@auth0spajs@@"===n.prefix&&n.client_id===t.client_id&&n.audience===t.audience&&o}))[0]},t}(),Qi=function(){function t(t){this.storage=t,this.transaction=this.storage.get("a0.spajs.txs")}return t.prototype.create=function(t){this.transaction=t,this.storage.save("a0.spajs.txs",t,{daysUntilExpire:1})},t.prototype.get=function(){return this.transaction},t.prototype.remove=function(){delete this.transaction,this.storage.remove("a0.spajs.txs")},t}(),$i=function(t){return"number"==typeof t},to=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],eo=l((function(t,e){var n=u&&u.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function r(t,e){if(!e)return"";var n="; "+t;return!0===e?n:n+"="+e}function i(t,e,n){return encodeURIComponent(t).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(e).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(t){if("number"==typeof t.expires){var e=new Date;e.setMilliseconds(e.getMilliseconds()+864e5*t.expires),t.expires=e}return r("Expires",t.expires?t.expires.toUTCString():"")+r("Domain",t.domain)+r("Path",t.path)+r("Secure",t.secure)+r("SameSite",t.sameSite)}(n)}function o(t){for(var e={},n=t?t.split("; "):[],r=/(%[\dA-F]{2})+/gi,i=0;i<n.length;i++){var o=n[i].split("="),s=o.slice(1).join("=");'"'===s.charAt(0)&&(s=s.slice(1,-1));try{e[o[0].replace(r,decodeURIComponent)]=s.replace(r,decodeURIComponent)}catch(t){}}return e}function s(){return o(document.cookie)}function a(t,e,r){document.cookie=i(t,e,n({path:"/"},r))}e.__esModule=!0,e.encode=i,e.parse=o,e.getAll=s,e.get=function(t){return s()[t]},e.set=a,e.remove=function(t,e){a(t,"",n(n({},e),{expires:-1}))}}));c(eo),eo.encode,eo.parse,eo.getAll;var no=eo.get,ro=eo.set,io=eo.remove,oo={get:function(t){var e=no(t);if(void 0!==e)return JSON.parse(e)},save:function(t,e,n){var r={};"https:"===window.location.protocol&&(r={secure:!0,sameSite:"none"}),r.expires=n.daysUntilExpire,ro(t,JSON.stringify(e),r)},remove:function(t){io(t)}},so={get:function(t){return oo.get(t)||oo.get("_legacy_"+t)},save:function(t,e,n){var r={};"https:"===window.location.protocol&&(r={secure:!0}),r.expires=n.daysUntilExpire,ro("_legacy_"+t,JSON.stringify(e),r),oo.save(t,e,n)},remove:function(t){oo.remove(t),oo.remove("_legacy_"+t)}},ao={get:function(t){if("undefined"!=typeof sessionStorage){var e=sessionStorage.getItem(t);if(void 0!==e)return JSON.parse(e)}},save:function(t,e){sessionStorage.setItem(t,JSON.stringify(e))},remove:function(t){sessionStorage.removeItem(t)}};var uo,co=("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Ci8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uCgogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuCgogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgKICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULAogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NCiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUgogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovdmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHIsdD0xLG49YXJndW1lbnRzLmxlbmd0aDt0PG47dCsrKWZvcih2YXIgbyBpbiByPWFyZ3VtZW50c1t0XSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixvKSYmKGVbb109cltvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIHIoZSxyLHQsbil7cmV0dXJuIG5ldyh0fHwodD1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8sYSl7ZnVuY3Rpb24gcyhlKXt0cnl7dShuLm5leHQoZSkpfWNhdGNoKGUpe2EoZSl9fWZ1bmN0aW9uIGkoZSl7dHJ5e3Uobi50aHJvdyhlKSl9Y2F0Y2goZSl7YShlKX19ZnVuY3Rpb24gdShlKXt2YXIgcjtlLmRvbmU/byhlLnZhbHVlKToocj1lLnZhbHVlLHIgaW5zdGFuY2VvZiB0P3I6bmV3IHQoKGZ1bmN0aW9uKGUpe2Uocil9KSkpLnRoZW4ocyxpKX11KChuPW4uYXBwbHkoZSxyfHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gdChlLHIpe3ZhciB0LG4sbyxhLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmb1swXSl0aHJvdyBvWzFdO3JldHVybiBvWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIGE9e25leHQ6aSgwKSx0aHJvdzppKDEpLHJldHVybjppKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoYVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxhO2Z1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbihhKXtpZih0KXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO3M7KXRyeXtpZih0PTEsbiYmKG89MiZhWzBdP24ucmV0dXJuOmFbMF0/bi50aHJvd3x8KChvPW4ucmV0dXJuKSYmby5jYWxsKG4pLDApOm4ubmV4dCkmJiEobz1vLmNhbGwobixhWzFdKSkuZG9uZSlyZXR1cm4gbztzd2l0Y2gobj0wLG8mJihhPVsyJmFbMF0sby52YWx1ZV0pLGFbMF0pe2Nhc2UgMDpjYXNlIDE6bz1hO2JyZWFrO2Nhc2UgNDpyZXR1cm4gcy5sYWJlbCsrLHt2YWx1ZTphWzFdLGRvbmU6ITF9O2Nhc2UgNTpzLmxhYmVsKyssbj1hWzFdLGE9WzBdO2NvbnRpbnVlO2Nhc2UgNzphPXMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobz1zLnRyeXMsKG89by5sZW5ndGg+MCYmb1tvLmxlbmd0aC0xXSl8fDYhPT1hWzBdJiYyIT09YVswXSkpe3M9MDtjb250aW51ZX1pZigzPT09YVswXSYmKCFvfHxhWzFdPm9bMF0mJmFbMV08b1szXSkpe3MubGFiZWw9YVsxXTticmVha31pZig2PT09YVswXSYmcy5sYWJlbDxvWzFdKXtzLmxhYmVsPW9bMV0sbz1hO2JyZWFrfWlmKG8mJnMubGFiZWw8b1syXSl7cy5sYWJlbD1vWzJdLHMub3BzLnB1c2goYSk7YnJlYWt9b1syXSYmcy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlfWE9ci5jYWxsKGUscyl9Y2F0Y2goZSl7YT1bNixlXSxuPTB9ZmluYWxseXt0PW89MH1pZig1JmFbMF0pdGhyb3cgYVsxXTtyZXR1cm57dmFsdWU6YVswXT9hWzFdOnZvaWQgMCxkb25lOiEwfX0oW2EsaV0pfX19dmFyIG49e30sbz1mdW5jdGlvbihlLHIpe3JldHVybiBlKyJ8IityfTthZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24oYSl7dmFyIHM9YS5kYXRhLGk9cy50aW1lb3V0LHU9cy5hdXRoLGM9cy5mZXRjaFVybCxmPXMuZmV0Y2hPcHRpb25zLGw9cy51c2VGb3JtRGF0YSxoPWZ1bmN0aW9uKGUscil7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCF0KXJldHVybiBlO3ZhciBuLG8sYT10LmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09cnx8ci0tID4wKSYmIShuPWEubmV4dCgpKS5kb25lOylzLnB1c2gobi52YWx1ZSl9Y2F0Y2goZSl7bz17ZXJyb3I6ZX19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHQ9YS5yZXR1cm4pJiZ0LmNhbGwoYSl9ZmluYWxseXtpZihvKXRocm93IG8uZXJyb3J9fXJldHVybiBzfShhLnBvcnRzLDEpWzBdO3JldHVybiByKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLGEscyxwLHksYixkLHYsdyxnO3JldHVybiB0KHRoaXMsKGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cz0oYT11fHx7fSkuYXVkaWVuY2UscD1hLnNjb3BlLHQubGFiZWw9MTtjYXNlIDE6aWYodC50cnlzLnB1c2goWzEsNywsOF0pLCEoeT1sPyhrPWYuYm9keSxTPW5ldyBVUkxTZWFyY2hQYXJhbXMoayksXz17fSxTLmZvckVhY2goKGZ1bmN0aW9uKGUscil7X1tyXT1lfSkpLF8pOkpTT04ucGFyc2UoZi5ib2R5KSkucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09eS5ncmFudF90eXBlKXtpZighKGI9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gbltvKGUscildfShzLHApKSl0aHJvdyBuZXcgRXJyb3IoIlRoZSB3ZWIgd29ya2VyIGlzIG1pc3NpbmcgdGhlIHJlZnJlc2ggdG9rZW4iKTtmLmJvZHk9bD9uZXcgVVJMU2VhcmNoUGFyYW1zKGUoZSh7fSx5KSx7cmVmcmVzaF90b2tlbjpifSkpLnRvU3RyaW5nKCk6SlNPTi5zdHJpbmdpZnkoZShlKHt9LHkpLHtyZWZyZXNoX3Rva2VuOmJ9KSl9ZD12b2lkIDAsImZ1bmN0aW9uIj09dHlwZW9mIEFib3J0Q29udHJvbGxlciYmKGQ9bmV3IEFib3J0Q29udHJvbGxlcixmLnNpZ25hbD1kLnNpZ25hbCksdj12b2lkIDAsdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gdC50cnlzLnB1c2goWzIsNCwsNV0pLFs0LFByb21pc2UucmFjZShbKG09aSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHNldFRpbWVvdXQoZSxtKX0pKSksZmV0Y2goYyxlKHt9LGYpKV0pXTtjYXNlIDM6cmV0dXJuIHY9dC5zZW50KCksWzMsNV07Y2FzZSA0OnJldHVybiB3PXQuc2VudCgpLGgucG9zdE1lc3NhZ2Uoe2Vycm9yOncubWVzc2FnZX0pLFsyXTtjYXNlIDU6cmV0dXJuIHY/WzQsdi5qc29uKCldOihkJiZkLmFib3J0KCksaC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KSxbMl0pO2Nhc2UgNjpyZXR1cm4ocj10LnNlbnQoKSkucmVmcmVzaF90b2tlbj8oZnVuY3Rpb24oZSxyLHQpe25bbyhyLHQpXT1lfShyLnJlZnJlc2hfdG9rZW4scyxwKSxkZWxldGUgci5yZWZyZXNoX3Rva2VuKTpmdW5jdGlvbihlLHIpe2RlbGV0ZSBuW28oZSxyKV19KHMscCksaC5wb3N0TWVzc2FnZSh7b2s6di5vayxqc29uOnJ9KSxbMyw4XTtjYXNlIDc6cmV0dXJuIGc9dC5zZW50KCksaC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3JfZGVzY3JpcHRpb246Zy5tZXNzYWdlfX0pLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19dmFyIG0sayxTLF99KSl9KSl9KSl9KCk7Cgo=",null,!1,function(t){return uo=uo||function(t,e,n){var r=void 0===e?null:e,i=function(t,e){var n=atob(t);if(e){for(var r=new Uint8Array(n.length),i=0,o=n.length;i<o;++i)r[i]=n.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}(t,void 0!==n&&n),o=i.indexOf("\n",10)+1,s=i.substring(o)+(r?"//# sourceMappingURL="+r:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Ci8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uCgogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuCgogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgKICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULAogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NCiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUgogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovdmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHIsdD0xLG49YXJndW1lbnRzLmxlbmd0aDt0PG47dCsrKWZvcih2YXIgbyBpbiByPWFyZ3VtZW50c1t0XSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixvKSYmKGVbb109cltvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIHIoZSxyLHQsbil7cmV0dXJuIG5ldyh0fHwodD1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8sYSl7ZnVuY3Rpb24gcyhlKXt0cnl7dShuLm5leHQoZSkpfWNhdGNoKGUpe2EoZSl9fWZ1bmN0aW9uIGkoZSl7dHJ5e3Uobi50aHJvdyhlKSl9Y2F0Y2goZSl7YShlKX19ZnVuY3Rpb24gdShlKXt2YXIgcjtlLmRvbmU/byhlLnZhbHVlKToocj1lLnZhbHVlLHIgaW5zdGFuY2VvZiB0P3I6bmV3IHQoKGZ1bmN0aW9uKGUpe2Uocil9KSkpLnRoZW4ocyxpKX11KChuPW4uYXBwbHkoZSxyfHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gdChlLHIpe3ZhciB0LG4sbyxhLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmb1swXSl0aHJvdyBvWzFdO3JldHVybiBvWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIGE9e25leHQ6aSgwKSx0aHJvdzppKDEpLHJldHVybjppKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoYVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxhO2Z1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbihhKXtpZih0KXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO3M7KXRyeXtpZih0PTEsbiYmKG89MiZhWzBdP24ucmV0dXJuOmFbMF0/bi50aHJvd3x8KChvPW4ucmV0dXJuKSYmby5jYWxsKG4pLDApOm4ubmV4dCkmJiEobz1vLmNhbGwobixhWzFdKSkuZG9uZSlyZXR1cm4gbztzd2l0Y2gobj0wLG8mJihhPVsyJmFbMF0sby52YWx1ZV0pLGFbMF0pe2Nhc2UgMDpjYXNlIDE6bz1hO2JyZWFrO2Nhc2UgNDpyZXR1cm4gcy5sYWJlbCsrLHt2YWx1ZTphWzFdLGRvbmU6ITF9O2Nhc2UgNTpzLmxhYmVsKyssbj1hWzFdLGE9WzBdO2NvbnRpbnVlO2Nhc2UgNzphPXMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobz1zLnRyeXMsKG89by5sZW5ndGg+MCYmb1tvLmxlbmd0aC0xXSl8fDYhPT1hWzBdJiYyIT09YVswXSkpe3M9MDtjb250aW51ZX1pZigzPT09YVswXSYmKCFvfHxhWzFdPm9bMF0mJmFbMV08b1szXSkpe3MubGFiZWw9YVsxXTticmVha31pZig2PT09YVswXSYmcy5sYWJlbDxvWzFdKXtzLmxhYmVsPW9bMV0sbz1hO2JyZWFrfWlmKG8mJnMubGFiZWw8b1syXSl7cy5sYWJlbD1vWzJdLHMub3BzLnB1c2goYSk7YnJlYWt9b1syXSYmcy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlfWE9ci5jYWxsKGUscyl9Y2F0Y2goZSl7YT1bNixlXSxuPTB9ZmluYWxseXt0PW89MH1pZig1JmFbMF0pdGhyb3cgYVsxXTtyZXR1cm57dmFsdWU6YVswXT9hWzFdOnZvaWQgMCxkb25lOiEwfX0oW2EsaV0pfX19dmFyIG49e30sbz1mdW5jdGlvbihlLHIpe3JldHVybiBlKyJ8IityfTthZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24oYSl7dmFyIHM9YS5kYXRhLGk9cy50aW1lb3V0LHU9cy5hdXRoLGM9cy5mZXRjaFVybCxmPXMuZmV0Y2hPcHRpb25zLGw9cy51c2VGb3JtRGF0YSxoPWZ1bmN0aW9uKGUscil7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCF0KXJldHVybiBlO3ZhciBuLG8sYT10LmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09cnx8ci0tID4wKSYmIShuPWEubmV4dCgpKS5kb25lOylzLnB1c2gobi52YWx1ZSl9Y2F0Y2goZSl7bz17ZXJyb3I6ZX19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHQ9YS5yZXR1cm4pJiZ0LmNhbGwoYSl9ZmluYWxseXtpZihvKXRocm93IG8uZXJyb3J9fXJldHVybiBzfShhLnBvcnRzLDEpWzBdO3JldHVybiByKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLGEscyxwLHksYixkLHYsdyxnO3JldHVybiB0KHRoaXMsKGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cz0oYT11fHx7fSkuYXVkaWVuY2UscD1hLnNjb3BlLHQubGFiZWw9MTtjYXNlIDE6aWYodC50cnlzLnB1c2goWzEsNywsOF0pLCEoeT1sPyhrPWYuYm9keSxTPW5ldyBVUkxTZWFyY2hQYXJhbXMoayksXz17fSxTLmZvckVhY2goKGZ1bmN0aW9uKGUscil7X1tyXT1lfSkpLF8pOkpTT04ucGFyc2UoZi5ib2R5KSkucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09eS5ncmFudF90eXBlKXtpZighKGI9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gbltvKGUscildfShzLHApKSl0aHJvdyBuZXcgRXJyb3IoIlRoZSB3ZWIgd29ya2VyIGlzIG1pc3NpbmcgdGhlIHJlZnJlc2ggdG9rZW4iKTtmLmJvZHk9bD9uZXcgVVJMU2VhcmNoUGFyYW1zKGUoZSh7fSx5KSx7cmVmcmVzaF90b2tlbjpifSkpLnRvU3RyaW5nKCk6SlNPTi5zdHJpbmdpZnkoZShlKHt9LHkpLHtyZWZyZXNoX3Rva2VuOmJ9KSl9ZD12b2lkIDAsImZ1bmN0aW9uIj09dHlwZW9mIEFib3J0Q29udHJvbGxlciYmKGQ9bmV3IEFib3J0Q29udHJvbGxlcixmLnNpZ25hbD1kLnNpZ25hbCksdj12b2lkIDAsdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gdC50cnlzLnB1c2goWzIsNCwsNV0pLFs0LFByb21pc2UucmFjZShbKG09aSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHNldFRpbWVvdXQoZSxtKX0pKSksZmV0Y2goYyxlKHt9LGYpKV0pXTtjYXNlIDM6cmV0dXJuIHY9dC5zZW50KCksWzMsNV07Y2FzZSA0OnJldHVybiB3PXQuc2VudCgpLGgucG9zdE1lc3NhZ2Uoe2Vycm9yOncubWVzc2FnZX0pLFsyXTtjYXNlIDU6cmV0dXJuIHY/WzQsdi5qc29uKCldOihkJiZkLmFib3J0KCksaC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KSxbMl0pO2Nhc2UgNjpyZXR1cm4ocj10LnNlbnQoKSkucmVmcmVzaF90b2tlbj8oZnVuY3Rpb24oZSxyLHQpe25bbyhyLHQpXT1lfShyLnJlZnJlc2hfdG9rZW4scyxwKSxkZWxldGUgci5yZWZyZXNoX3Rva2VuKTpmdW5jdGlvbihlLHIpe2RlbGV0ZSBuW28oZSxyKV19KHMscCksaC5wb3N0TWVzc2FnZSh7b2s6di5vayxqc29uOnJ9KSxbMyw4XTtjYXNlIDc6cmV0dXJuIGc9dC5zZW50KCksaC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3JfZGVzY3JpcHRpb246Zy5tZXNzYWdlfX0pLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19dmFyIG0sayxTLF99KSl9KSl9KSl9KCk7Cgo=",null,false),new Worker(uo,t)}),lo={},ho=new Ii,fo={memory:function(){return(new Hi).enclosedCache},localstorage:function(){return new Zi}},po=function(t){return fo[t]},yo=function(){function t(t){var e,n,i;if(this.options=t,"undefined"!=typeof window&&function(){if(!Ri())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(void 0===Oi())throw new Error("\n      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/master/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.\n    ")}(),t.cache&&t.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),t.cache)i=t.cache;else{if(this.cacheLocation=t.cacheLocation||"memory",!po(this.cacheLocation))throw new Error('Invalid cache location "'+this.cacheLocation+'"');i=po(this.cacheLocation)()}this.cookieStorage=!1===t.legacySameSiteCookie?oo:so,this.sessionCheckExpiryDays=t.sessionCheckExpiryDays||1;var o,s=t.useCookiesForTransactions?this.cookieStorage:ao;this.scope=this.options.scope,this.transactionManager=new Qi(s),this.cacheManager=new Ji(i,this.options.client_id),this.domainUrl=(o=this.options.domain,/^https?:\/\//.test(o)?o:"https://"+o),this.tokenIssuer=function(t,e){return t?t.startsWith("https://")?t:"https://"+t+"/":e+"/"}(this.options.issuer,this.domainUrl),this.defaultScope=zi("openid",void 0!==(null===(n=null===(e=this.options)||void 0===e?void 0:e.advancedOptions)||void 0===n?void 0:n.defaultScope)?this.options.advancedOptions.defaultScope:"openid profile email"),this.options.useRefreshTokens&&(this.scope=zi(this.scope,"offline_access")),"undefined"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&"memory"===this.cacheLocation&&!/Trident.*rv:11\.0/.test(navigator.userAgent)&&(this.worker=new co),this.customOptions=function(t){return t.advancedOptions,t.audience,t.auth0Client,t.authorizeTimeoutInSeconds,t.cacheLocation,t.client_id,t.domain,t.issuer,t.leeway,t.max_age,t.redirect_uri,t.scope,t.useRefreshTokens,t.useCookiesForTransactions,t.useFormData,r(t,["advancedOptions","audience","auth0Client","authorizeTimeoutInSeconds","cacheLocation","client_id","domain","issuer","leeway","max_age","redirect_uri","scope","useRefreshTokens","useCookiesForTransactions","useFormData"])}(t)}return t.prototype._url=function(t){var e=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||Ti)));return""+this.domainUrl+t+"&auth0Client="+e},t.prototype._getParams=function(t,e,i,o,s){var a=this.options;a.domain,a.leeway,a.useRefreshTokens,a.useCookiesForTransactions,a.useFormData,a.auth0Client,a.cacheLocation,a.advancedOptions;var u=r(a,["domain","leeway","useRefreshTokens","useCookiesForTransactions","useFormData","auth0Client","cacheLocation","advancedOptions"]);return n(n(n({},u),t),{scope:zi(this.defaultScope,this.scope,t.scope),response_type:"code",response_mode:"query",state:e,nonce:i,redirect_uri:s||this.options.redirect_uri,code_challenge:o,code_challenge_method:"S256"})},t.prototype._authorizeUrl=function(t){return this._url("/authorize?"+Fi(t))},t.prototype._verifyIdToken=function(t,e,n){return function(t){if(!t.id_token)throw new Error("ID token is required but missing");var e=function(t){var e=t.split("."),n=s(e,3),r=n[0],i=n[1],o=n[2];if(3!==e.length||!r||!i||!o)throw new Error("ID token could not be decoded");var a=JSON.parse(Vi(i)),u={__raw:t},c={};return Object.keys(a).forEach((function(t){u[t]=a[t],to.includes(t)||(c[t]=a[t])})),{encoded:{header:r,payload:i,signature:o},header:JSON.parse(Vi(r)),claims:u,user:c}}(t.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==t.iss)throw new Error('Issuer (iss) claim mismatch in the ID token; expected "'+t.iss+'", found "'+e.claims.iss+'"');if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if("RS256"!==e.header.alg)throw new Error('Signature algorithm of "'+e.header.alg+'" is not supported. Expected the ID token to be signed with "RS256".');if(!e.claims.aud||"string"!=typeof e.claims.aud&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(t.aud))throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+t.aud+'" but was not one of "'+e.claims.aud.join(", ")+'"');if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==t.aud)throw new Error('Authorized Party (azp) claim mismatch in the ID token; expected "'+t.aud+'", found "'+e.claims.azp+'"')}}else if(e.claims.aud!==t.aud)throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+t.aud+'" but found "'+e.claims.aud+'"');if(t.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==t.nonce)throw new Error('Nonce (nonce) claim mismatch in the ID token; expected "'+t.nonce+'", found "'+e.claims.nonce+'"')}if(t.max_age&&!$i(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(!$i(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!$i(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");var n=t.leeway||60,r=new Date(Date.now()),i=new Date(0),o=new Date(0),a=new Date(0);if(a.setUTCSeconds(parseInt(e.claims.auth_time)+t.max_age+n),i.setUTCSeconds(e.claims.exp+n),o.setUTCSeconds(e.claims.nbf-n),r>i)throw new Error("Expiration Time (exp) claim error in the ID token; current time ("+r+") is after expiration time ("+i+")");if($i(e.claims.nbf)&&r<o)throw new Error("Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Currrent time ("+r+") is before "+o);if($i(e.claims.auth_time)&&r>a)throw new Error("Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Currrent time ("+r+") is after last auth at "+a);if(t.organizationId){if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(t.organizationId!==e.claims.org_id)throw new Error('Organization ID (org_id) claim mismatch in the ID token; expected "'+t.organizationId+'", found "'+e.claims.org_id+'"')}return e}({iss:this.tokenIssuer,aud:this.options.client_id,id_token:t,nonce:e,organizationId:n,leeway:this.options.leeway,max_age:this._parseNumber(this.options.max_age)})},t.prototype._parseNumber=function(t){return"string"!=typeof t?t:parseInt(t,10)||void 0},t.prototype.buildAuthorizeUrl=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,i,s,a,u,c,l,h,f,d,p,y;return o(this,(function(o){switch(o.label){case 0:return e=t.redirect_uri,i=t.appState,s=r(t,["redirect_uri","appState"]),a=Li(xi()),u=Li(xi()),c=xi(),[4,Pi(c)];case 1:return l=o.sent(),h=Ui(l),f=t.fragment?"#"+t.fragment:"",d=this._getParams(s,a,u,h,e),p=this._authorizeUrl(d),y=t.organization||this.options.organization,this.transactionManager.create(n({nonce:u,code_verifier:c,appState:i,scope:d.scope,audience:d.audience||"default",redirect_uri:d.redirect_uri},y&&{organizationId:y})),[2,p+f]}}))}))},t.prototype.loginWithPopup=function(t,e){return i(this,void 0,void 0,(function(){var i,s,a,u,c,l,h,f,d,p,y,v,g;return o(this,(function(o){switch(o.label){case 0:return t=t||{},(e=e||{}).popup||(e.popup=function(t){var e=window.screenX+(window.innerWidth-400)/2,n=window.screenY+(window.innerHeight-600)/2;return window.open("","auth0:authorize:popup","left="+e+",top="+n+",width=400,height=600,resizable,scrollbars=yes,status=1")}()),i=r(t,[]),s=Li(xi()),a=Li(xi()),u=xi(),[4,Pi(u)];case 1:return c=o.sent(),l=Ui(c),h=this._getParams(i,s,a,l,this.options.redirect_uri||window.location.origin),f=this._authorizeUrl(n(n({},h),{response_mode:"web_message"})),e.popup.location.href=f,[4,Di(n(n({},e),{timeoutInSeconds:e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}))];case 2:if(d=o.sent(),s!==d.state)throw new Error("Invalid state");return[4,Wi({audience:h.audience,scope:h.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:u,code:d.code,grant_type:"authorization_code",redirect_uri:h.redirect_uri,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData},this.worker)];case 3:return p=o.sent(),y=t.organization||this.options.organization,v=this._verifyIdToken(p.id_token,a,y),g=n(n({},p),{decodedToken:v,scope:h.scope,audience:h.audience||"default",client_id:this.options.client_id}),[4,this.cacheManager.set(g)];case 4:return o.sent(),this.cookieStorage.save("auth0.is.authenticated",!0,{daysUntilExpire:this.sessionCheckExpiryDays}),[2]}}))}))},t.prototype.getUser=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(i){switch(i.label){case 0:return e=t.audience||this.options.audience||"default",n=zi(this.defaultScope,this.scope,t.scope),[4,this.cacheManager.get(new Xi({client_id:this.options.client_id,audience:e,scope:n}))];case 1:return[2,(r=i.sent())&&r.decodedToken&&r.decodedToken.user]}}))}))},t.prototype.getIdTokenClaims=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(i){switch(i.label){case 0:return e=t.audience||this.options.audience||"default",n=zi(this.defaultScope,this.scope,t.scope),[4,this.cacheManager.get(new Xi({client_id:this.options.client_id,audience:e,scope:n}))];case 1:return[2,(r=i.sent())&&r.decodedToken&&r.decodedToken.claims]}}))}))},t.prototype.loginWithRedirect=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,n,i;return o(this,(function(o){switch(o.label){case 0:return e=t.redirectMethod,n=r(t,["redirectMethod"]),[4,this.buildAuthorizeUrl(n)];case 1:return i=o.sent(),window.location[e||"assign"](i),[2]}}))}))},t.prototype.handleRedirectCallback=function(t){return void 0===t&&(t=window.location.href),i(this,void 0,void 0,(function(){var e,r,i,a,u,c,l,h,f,d,p;return o(this,(function(o){switch(o.label){case 0:if(0===(e=t.split("?").slice(1)).length)throw new Error("There are no query params available for parsing.");if(r=function(t){t.indexOf("#")>-1&&(t=t.substr(0,t.indexOf("#")));var e=t.split("&"),n={};return e.forEach((function(t){var e=s(t.split("="),2),r=e[0],i=e[1];n[r]=decodeURIComponent(i)})),n.expires_in&&(n.expires_in=parseInt(n.expires_in)),n}(e.join("")),i=r.state,a=r.code,u=r.error,c=r.error_description,!(l=this.transactionManager.get())||!l.code_verifier)throw new Error("Invalid state");if(this.transactionManager.remove(),u)throw new ki(u,c,i,l.appState);return h={audience:l.audience,scope:l.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:l.code_verifier,grant_type:"authorization_code",code:a,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData},void 0!==l.redirect_uri&&(h.redirect_uri=l.redirect_uri),[4,Wi(h,this.worker)];case 1:return f=o.sent(),d=this._verifyIdToken(f.id_token,l.nonce,l.organizationId),p=n(n({},f),{decodedToken:d,audience:l.audience,scope:l.scope,client_id:this.options.client_id}),[4,this.cacheManager.set(p)];case 2:return o.sent(),this.cookieStorage.save("auth0.is.authenticated",!0,{daysUntilExpire:this.sessionCheckExpiryDays}),[2,{appState:l.appState}]}}))}))},t.prototype.checkSession=function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:if(!this.cookieStorage.get("auth0.is.authenticated"))return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getTokenSilently(t)];case 2:return n.sent(),[3,4];case 3:if(e=n.sent(),!Ei.includes(e.error))throw e;return[3,4];case 4:return[2]}}))}))},t.prototype.getTokenSilently=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,i,s,a=this;return o(this,(function(o){return e=n(n({audience:this.options.audience,ignoreCache:!1},t),{scope:zi(this.defaultScope,this.scope,t.scope)}),i=e.ignoreCache,s=r(e,["ignoreCache"]),[2,(u=function(){return a._getTokenSilently(n({ignoreCache:i},s))},c=this.options.client_id+"::"+s.audience+"::"+s.scope,l=lo[c],l||(l=u().finally((function(){delete lo[c],l=null})),lo[c]=l),l)];var u,c,l}))}))},t.prototype._getTokenSilently=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,s,a,u,c,l,h=this;return o(this,(function(f){switch(f.label){case 0:return e=t.ignoreCache,s=r(t,["ignoreCache"]),a=function(){return i(h,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return[4,this.cacheManager.get(new Xi({scope:s.scope,audience:s.audience||"default",client_id:this.options.client_id}),60)];case 1:return[2,(t=e.sent())&&t.access_token]}}))}))},e?[3,2]:[4,a()];case 1:if(u=f.sent())return[2,u];f.label=2;case 2:return[4,(d=function(){return ho.acquireLock("auth0.lock.getTokenSilently",5e3)},p=10,void 0===p&&(p=3),i(void 0,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<p?[4,d()]:[3,4];case 2:if(e.sent())return[2,!0];e.label=3;case 3:return t++,[3,1];case 4:return[2,!1]}}))})))];case 3:if(!f.sent())return[3,15];f.label=4;case 4:return f.trys.push([4,,12,14]),e?[3,6]:[4,a()];case 5:if(u=f.sent())return[2,u];f.label=6;case 6:return this.options.useRefreshTokens?[4,this._getTokenUsingRefreshToken(s)]:[3,8];case 7:return l=f.sent(),[3,10];case 8:return[4,this._getTokenFromIFrame(s)];case 9:l=f.sent(),f.label=10;case 10:return c=l,[4,this.cacheManager.set(n({client_id:this.options.client_id},c))];case 11:return f.sent(),this.cookieStorage.save("auth0.is.authenticated",!0,{daysUntilExpire:this.sessionCheckExpiryDays}),[2,c.access_token];case 12:return[4,ho.releaseLock("auth0.lock.getTokenSilently")];case 13:return f.sent(),[7];case 14:return[3,16];case 15:throw new Ni;case 16:return[2]}var d,p}))}))},t.prototype.getTokenWithPopup=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),i(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return t.audience=t.audience||this.options.audience,t.scope=zi(this.defaultScope,this.scope,t.scope),e=n(n({},Si),e),[4,this.loginWithPopup(t,e)];case 1:return r.sent(),[4,this.cacheManager.get(new Xi({scope:t.scope,audience:t.audience||"default",client_id:this.options.client_id}))];case 2:return[2,r.sent().access_token]}}))}))},t.prototype.isAuthenticated=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.getUser()];case 1:return[2,!!t.sent()]}}))}))},t.prototype.buildLogoutUrl=function(t){void 0===t&&(t={}),null!==t.client_id?t.client_id=t.client_id||this.options.client_id:delete t.client_id;var e=t.federated,n=r(t,["federated"]),i=e?"&federated":"";return this._url("/v2/logout?"+Fi(n))+i},t.prototype.logout=function(t){var e=this;void 0===t&&(t={});var n=t.localOnly,i=r(t,["localOnly"]);if(n&&i.federated)throw new Error("It is invalid to set both the `federated` and `localOnly` options to `true`");var o=function(){if(e.cookieStorage.remove("auth0.is.authenticated"),!n){var t=e.buildLogoutUrl(i);window.location.assign(t)}};if(this.options.cache)return this.cacheManager.clear().then((function(){return o()}));this.cacheManager.clearSync(),o()},t.prototype._getTokenFromIFrame=function(t){return i(this,void 0,void 0,(function(){var e,i,s,a,u,c,l,h,f,d,p,y,v,g,m;return o(this,(function(o){switch(o.label){case 0:return e=Li(xi()),i=Li(xi()),s=xi(),[4,Pi(s)];case 1:a=o.sent(),u=Ui(a),c=this._getParams(t,e,i,u,t.redirect_uri||this.options.redirect_uri||window.location.origin),l=this._authorizeUrl(n(n({},c),{prompt:"none",response_mode:"web_message"})),h=t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,o.label=2;case 2:return o.trys.push([2,5,,6]),[4,(b=l,w=this.domainUrl,I=h,void 0===I&&(I=60),new Promise((function(t,e){var n=window.document.createElement("iframe");n.setAttribute("width","0"),n.setAttribute("height","0"),n.style.display="none";var r,i=function(){window.document.body.contains(n)&&(window.document.body.removeChild(n),window.removeEventListener("message",r,!1))},o=setTimeout((function(){e(new Ni),i()}),1e3*I);r=function(n){if(n.origin==w&&n.data&&"authorization_response"===n.data.type){var s=n.source;s&&s.close(),n.data.response.error?e(_i.fromPayload(n.data.response)):t(n.data.response),clearTimeout(o),window.removeEventListener("message",r,!1),setTimeout(i,2e3)}},window.addEventListener("message",r,!1),window.document.body.appendChild(n),n.setAttribute("src",b)})))];case 3:if(f=o.sent(),e!==f.state)throw new Error("Invalid state");return d=t.scope,p=t.audience,y=r(t,["scope","audience","redirect_uri","ignoreCache","timeoutInSeconds"]),[4,Wi(n(n(n({},this.customOptions),y),{scope:d,audience:p,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:s,code:f.code,grant_type:"authorization_code",redirect_uri:c.redirect_uri,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData}),this.worker)];case 4:return v=o.sent(),g=this._verifyIdToken(v.id_token,i),[2,n(n({},v),{decodedToken:g,scope:c.scope,audience:c.audience||"default"})];case 5:throw"login_required"===(m=o.sent()).error&&this.logout({localOnly:!0}),m;case 6:return[2]}var b,w,I}))}))},t.prototype._getTokenUsingRefreshToken=function(t){return i(this,void 0,void 0,(function(){var e,i,s,a,u,c,l,h,f;return o(this,(function(o){switch(o.label){case 0:return t.scope=zi(this.defaultScope,this.options.scope,t.scope),[4,this.cacheManager.get(new Xi({scope:t.scope,audience:t.audience||"default",client_id:this.options.client_id}))];case 1:return(e=o.sent())&&e.refresh_token||this.worker?[3,3]:[4,this._getTokenFromIFrame(t)];case 2:return[2,o.sent()];case 3:i=t.redirect_uri||this.options.redirect_uri||window.location.origin,a=t.scope,u=t.audience,c=r(t,["scope","audience","ignoreCache","timeoutInSeconds"]),l="number"==typeof t.timeoutInSeconds?1e3*t.timeoutInSeconds:null,o.label=4;case 4:return o.trys.push([4,6,,9]),[4,Wi(n(n(n(n(n({},this.customOptions),c),{audience:u,scope:a,baseUrl:this.domainUrl,client_id:this.options.client_id,grant_type:"refresh_token",refresh_token:e&&e.refresh_token,redirect_uri:i}),l&&{timeout:l}),{auth0Client:this.options.auth0Client,useFormData:this.options.useFormData}),this.worker)];case 5:return s=o.sent(),[3,9];case 6:return"The web worker is missing the refresh token"===(h=o.sent()).message||h.message&&h.message.indexOf("invalid refresh token")>-1?[4,this._getTokenFromIFrame(t)]:[3,8];case 7:return[2,o.sent()];case 8:throw h;case 9:return f=this._verifyIdToken(s.id_token),[2,n(n({},s),{decodedToken:f,scope:t.scope,audience:t.audience||"default"})]}}))}))},t}();let vo,go=window.location.origin+(window.location.href.includes("github.io")?"/tag-generator/":"");async function mo(){vo||await wo(),vo?.loginWithRedirect({redirect_uri:go})}async function bo(){vo||await wo(),vo?.logout({returnTo:go})}async function wo(){try{vo=await function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,(e=new yo(t)).checkSession()];case 1:return n.sent(),[2,e]}}))}))}({domain:"syncretic.eu.auth0.com",client_id:"T7k8XmfXePV5zkd8mPOmgB3nv5nyr66I",redirectUri:go});const t=window.location.search;t.includes("code=")&&t.includes("state=")&&(await vo.handleRedirectCallback(),window.history.replaceState({},document.title,window.location.pathname));let e=await vo.isAuthenticated(),n=await(vo?.getUser()),r=e&&n.given_name&&n.family_name?n.given_name+" "+n.family_name:null;return e?{name:r||n.name||n.nickname||n.given_name||n.user_id,id:n.user_id||n.sub}:null}catch(t){return console.error(t),null}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Io=function(t,e){return(Io=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function So(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Io(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Eo=function(){return(Eo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function To(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function _o(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function ko(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function No(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Ao(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Co=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},Do={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,d=63&c;u||(d=64,s||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Co(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ro=function(t){return function(t){var e=Co(t);return Do.encodeByteArray(e,!0)}(t).replace(/\./g,"")};function Oo(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Oo(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var xo=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Lo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fo(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Po=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Vo.prototype.create),o}return So(e,t),e}(Error),Vo=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Uo(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new Po(i,a,r);return u},t}();function Uo(t,e){return t.replace(Mo,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Mo=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Bo(t,e){var n=new Ko(t,e);return n.subscribe.bind(n)}var Ko=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=qo),void 0===r.error&&(r.error=qo),void 0===r.complete&&(r.complete=qo);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function qo(){}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wo(t){return t&&t._delegate?t._delegate:t}var Go=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),zo="[DEFAULT]",Xo=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new xo;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService({instanceIdentifier:zo})}catch(t){}try{for(var r=ko(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=No(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=zo),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return To(this,void 0,void 0,(function(){var t;return _o(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Ao(Ao([],No(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),No(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=zo),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=zo),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=ko(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=No(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(s)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=ko(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===zo?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=zo),this.component?this.component.multipleInstances?t:zo:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Zo,Ho=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Xo(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Yo(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Jo,Qo=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Jo||(Jo={}));var $o,ts={debug:Jo.DEBUG,verbose:Jo.VERBOSE,info:Jo.INFO,warn:Jo.WARN,error:Jo.ERROR,silent:Jo.SILENT},es=Jo.INFO,ns=((Zo={})[Jo.DEBUG]="log",Zo[Jo.VERBOSE]="log",Zo[Jo.INFO]="info",Zo[Jo.WARN]="warn",Zo[Jo.ERROR]="error",Zo),rs=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=ns[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Yo(["["+i+"]  "+t.name+":"],n))}},is=function(){function t(t){this.name=t,this._logLevel=es,this._logHandler=rs,this._userLogHandler=null,Qo.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Jo))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ts[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Yo([this,Jo.DEBUG],t)),this._logHandler.apply(this,Yo([this,Jo.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Yo([this,Jo.VERBOSE],t)),this._logHandler.apply(this,Yo([this,Jo.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Yo([this,Jo.INFO],t)),this._logHandler.apply(this,Yo([this,Jo.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Yo([this,Jo.WARN],t)),this._logHandler.apply(this,Yo([this,Jo.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Yo([this,Jo.ERROR],t)),this._logHandler.apply(this,Yo([this,Jo.ERROR],t))},t}();function os(t){Qo.forEach((function(e){e.setLogLevel(t)}))}var ss,as=(($o={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",$o["bad-app-name"]="Illegal App name: '{$appName}",$o["duplicate-app"]="Firebase App named '{$appName}' already exists",$o["app-deleted"]="Firebase App named '{$appName}' already deleted",$o["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",$o["invalid-log-argument"]="First argument to `onLog` must be null or a function.",$o),us=new Vo("app","Firebase",as),cs="@firebase/app",ls="[DEFAULT]",hs=((ss={})[cs]="fire-core",ss["@firebase/analytics"]="fire-analytics",ss["@firebase/app-check"]="fire-app-check",ss["@firebase/auth"]="fire-auth",ss["@firebase/database"]="fire-rtdb",ss["@firebase/functions"]="fire-fn",ss["@firebase/installations"]="fire-iid",ss["@firebase/messaging"]="fire-fcm",ss["@firebase/performance"]="fire-perf",ss["@firebase/remote-config"]="fire-rc",ss["@firebase/storage"]="fire-gcs",ss["@firebase/firestore"]="fire-fst",ss["fire-js"]="fire-js",ss["firebase-wrapper"]="fire-js-all",ss),fs=new is("@firebase/app"),ds=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Oo(void 0,t),this.container=new Ho(e.name),this._addComponent(new Go("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=ls),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=ls),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){fs.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw us.create("app-deleted",{appName:this.name_})},t}();ds.prototype.name&&ds.prototype.options||ds.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ps(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=ls);var s=o.name;if("string"!=typeof s||!s)throw us.create("bad-app-name",{appName:String(s)});if(jo(e,s))throw us.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=hs[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void fs.warn(u.join(" "))}o(new Go(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:os,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw us.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=ts[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Jo[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=Qo;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!jo(e,t=t||ls))throw us.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return fs.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw us.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&Oo(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ys=function t(){var e=ps(ds);return e.INTERNAL=Eo(Eo({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Oo(e,t)},createSubscribe:Bo,ErrorFactory:Vo,deepExtend:Oo}),e}(),vs=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){fs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var gs=self.firebase.SDK_VERSION;gs&&gs.indexOf("LITE")>=0&&fs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ms=ys.initializeApp;ys.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Fo()&&fs.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ms.apply(void 0,t)};var bs=ys;!function(t,e){t.INTERNAL.registerComponent(new Go("platform-logger",(function(t){return new vs(t)}),"PRIVATE")),t.registerVersion(cs,"0.6.30",e),t.registerVersion("fire-js","")}(bs);var ws="8.10.0";
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
bs.registerVersion("firebase",ws,"app"),bs.SDK_VERSION=ws;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var Is=function(t,e){return(Is=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ss(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Es,Ts="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_s=_s||{},ks=Ts||self;function Ns(){}function As(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Cs(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ds="closure_uid_"+(1e9*Math.random()>>>0),Rs=0;function Os(t,e,n){return t.call.apply(t.bind,arguments)}function xs(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ls(t,e,n){return(Ls=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Os:xs).apply(null,arguments)}function Fs(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ps(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Vs(){this.s=this.s,this.o=this.o}var Us={};Vs.prototype.s=!1,Vs.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Ds)&&t[Ds]||(t[Ds]=++Rs)}(this);delete Us[t]}},Vs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ms=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},js=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Bs(t){return Array.prototype.concat.apply([],arguments)}function Ks(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function qs(t){return/^[\s\xa0]*$/.test(t)}var Ws,Gs=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function zs(t,e){return-1!=t.indexOf(e)}function Xs(t,e){return t<e?-1:t>e?1:0}t:{var Zs=ks.navigator;if(Zs){var Hs=Zs.userAgent;if(Hs){Ws=Hs;break t}}Ws=""}function Ys(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Js(t){var e={};for(var n in t)e[n]=t[n];return e}var Qs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $s(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Qs.length;o++)n=Qs[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ta(t){return ta[" "](t),t}ta[" "]=Ns;var ea,na=zs(Ws,"Opera"),ra=zs(Ws,"Trident")||zs(Ws,"MSIE"),ia=zs(Ws,"Edge"),oa=ia||ra,sa=zs(Ws,"Gecko")&&!(zs(Ws.toLowerCase(),"webkit")&&!zs(Ws,"Edge"))&&!(zs(Ws,"Trident")||zs(Ws,"MSIE"))&&!zs(Ws,"Edge"),aa=zs(Ws.toLowerCase(),"webkit")&&!zs(Ws,"Edge");function ua(){var t=ks.document;return t?t.documentMode:void 0}t:{var ca="",la=function(){var t=Ws;return sa?/rv:([^\);]+)(\)|;)/.exec(t):ia?/Edge\/([\d\.]+)/.exec(t):ra?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):aa?/WebKit\/(\S+)/.exec(t):na?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(la&&(ca=la?la[1]:""),ra){var ha=ua();if(null!=ha&&ha>parseFloat(ca)){ea=String(ha);break t}}ea=ca}var fa,da={};function pa(){return function(t){var e=da;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=Gs(String(ea)).split("."),n=Gs("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Xs(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Xs(0==o[2].length,0==s[2].length)||Xs(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(ks.document&&ra){var ya=ua();fa=ya||(parseInt(ea,10)||void 0)}else fa=void 0;var va=fa,ga=function(){if(!ks.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ks.addEventListener("test",Ns,e),ks.removeEventListener("test",Ns,e)}catch(t){}return t}();function ma(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function ba(t,e){if(ma.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(sa){t:{try{ta(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:wa[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ba.Z.h.call(this)}}ma.prototype.h=function(){this.defaultPrevented=!0},Ps(ba,ma);var wa={2:"touch",3:"pen",4:"mouse"};ba.prototype.h=function(){ba.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ia="closure_listenable_"+(1e6*Math.random()|0),Sa=0;function Ea(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Sa,this.ca=this.fa=!1}function Ta(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function _a(t){this.src=t,this.g={},this.h=0}function ka(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Ms(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ta(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Na(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}_a.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Na(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Ea(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Aa="closure_lm_"+(1e6*Math.random()|0),Ca={};function Da(t,e,n,r,i){if(r&&r.once)return Oa(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Da(t,e[o],n,r,i);return null}return n=Ma(n),t&&t[Ia]?t.N(e,n,Cs(r)?!!r.capture:!!r,i):Ra(t,e,n,!1,r,i)}function Ra(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Cs(i)?!!i.capture:!!i,a=Va(t);if(a||(t[Aa]=a=new _a(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Pa;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ga||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Fa(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Oa(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Oa(t,e[o],n,r,i);return null}return n=Ma(n),t&&t[Ia]?t.O(e,n,Cs(r)?!!r.capture:!!r,i):Ra(t,e,n,!0,r,i)}function xa(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)xa(t,e[o],n,r,i);else r=Cs(r)?!!r.capture:!!r,n=Ma(n),t&&t[Ia]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=Na(o=t.g[e],n,r,i))&&(Ta(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Va(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Na(e,n,r,i)),(n=-1<t?e[t]:null)&&La(n))}function La(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Ia])ka(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Fa(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Va(e))?(ka(n,t),0==n.h&&(n.src=null,e[Aa]=null)):Ta(t)}}}function Fa(t){return t in Ca?Ca[t]:Ca[t]="on"+t}function Pa(t,e){if(t.ca)t=!0;else{e=new ba(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&La(t),t=n.call(r,e)}return t}function Va(t){return(t=t[Aa])instanceof _a?t:null}var Ua="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ma(t){return"function"==typeof t?t:(t[Ua]||(t[Ua]=function(e){return t.handleEvent(e)}),t[Ua])}function ja(){Vs.call(this),this.i=new _a(this),this.P=this,this.I=null}function Ba(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new ma(e,t);else if(e instanceof ma)e.target=e.target||t;else{var i=e;$s(e=new ma(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Ka(s,r,!0,e)&&i}if(i=Ka(s=e.g=t,r,!0,e)&&i,i=Ka(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ka(s=e.g=n[o],r,!1,e)&&i}function Ka(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&ka(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Ps(ja,Vs),ja.prototype[Ia]=!0,ja.prototype.removeEventListener=function(t,e,n,r){xa(this,t,e,n,r)},ja.prototype.M=function(){if(ja.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Ta(n[r]);delete e.g[t],e.h--}}this.I=null},ja.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ja.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var qa=ks.JSON.stringify;function Wa(){var t=Qa,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ga,za=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Xa.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Xa=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Za}),(function(t){return t.reset()})),Za=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Ha(t){ks.setTimeout((function(){throw t}),0)}function Ya(t,e){Ga||function(){var t=ks.Promise.resolve(void 0);Ga=function(){t.then($a)}}(),Ja||(Ga(),Ja=!0),Qa.add(t,e)}var Ja=!1,Qa=new za;function $a(){for(var t;t=Wa();){try{t.h.call(t.g)}catch(t){Ha(t)}var e=Xa;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ja=!1}function tu(t,e){ja.call(this),this.h=t||1,this.g=e||ks,this.j=Ls(this.kb,this),this.l=Date.now()}function eu(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function nu(t,e,n){if("function"==typeof t)n&&(t=Ls(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ls(t.handleEvent,t)}return 2147483647<Number(e)?-1:ks.setTimeout(t,e||0)}function ru(t){t.g=nu((function(){t.g=null,t.i&&(t.i=!1,ru(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Ps(tu,ja),(Es=tu.prototype).da=!1,Es.S=null,Es.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ba(this,"tick"),this.da&&(eu(this),this.start()))}},Es.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Es.M=function(){tu.Z.M.call(this),eu(this),delete this.g};var iu=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Is(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:ru(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(ks.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Vs);function ou(t){Vs.call(this),this.h=t,this.g={}}Ps(ou,Vs);var su=[];function au(t,e,n,r){Array.isArray(n)||(n&&(su[0]=n.toString()),n=su);for(var i=0;i<n.length;i++){var o=Da(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function uu(t){Ys(t.g,(function(t,e){this.g.hasOwnProperty(e)&&La(t)}),t),t.g={}}function cu(){this.g=!0}function lu(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return qa(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}ou.prototype.M=function(){ou.Z.M.call(this),uu(this)},ou.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cu.prototype.Aa=function(){this.g=!1},cu.prototype.info=function(){};var hu={},fu=null;function du(){return fu=fu||new ja}function pu(t){ma.call(this,hu.Ma,t)}function yu(t){var e=du();Ba(e,new pu(e,t))}function vu(t,e){ma.call(this,hu.STAT_EVENT,t),this.stat=e}function gu(t){var e=du();Ba(e,new vu(e,t))}function mu(t,e){ma.call(this,hu.Na,t),this.size=e}function bu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ks.setTimeout((function(){t()}),e)}hu.Ma="serverreachability",Ps(pu,ma),hu.STAT_EVENT="statevent",Ps(vu,ma),hu.Na="timingevent",Ps(mu,ma);var wu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Iu={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Su(){}function Eu(t){return t.h||(t.h=t.i())}function Tu(){}Su.prototype.h=null;var _u,ku={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Nu(){ma.call(this,"d")}function Au(){ma.call(this,"c")}function Cu(){}function Du(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new ou(this),this.P=Ou,t=oa?125:void 0,this.W=new tu(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ru}function Ru(){this.i=null,this.g="",this.h=!1}Ps(Nu,ma),Ps(Au,ma),Ps(Cu,Su),Cu.prototype.g=function(){return new XMLHttpRequest},Cu.prototype.i=function(){return{}},_u=new Cu;var Ou=45e3,xu={},Lu={};function Fu(t,e,n){t.K=1,t.v=ic(Qu(e)),t.s=n,t.U=!0,Pu(t,null)}function Pu(t,e){t.F=Date.now(),ju(t),t.A=Qu(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),gc(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Ru,t.g=ml(t.l,n?e:null,!t.s),0<t.O&&(t.L=new iu(Ls(t.Ia,t,t.g),t.O)),au(t.V,t.g,"readystatechange",t.gb),e=t.H?Js(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),yu(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Vu(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Uu(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Mu(t,n))==Lu){4==e&&(t.o=4,gu(14),i=!1),lu(t.j,t.m,null,"[Incomplete Response]");break}if(r==xu){t.o=4,gu(15),lu(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}lu(t.j,t.m,r,null),Gu(t,r)}Vu(t)&&r!=Lu&&r!=xu&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,gu(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ll(e),e.L=!0,gu(11))):(lu(t.j,t.m,n,"[Invalid Chunked Response]"),Wu(t),qu(t))}function Mu(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Lu:(n=Number(e.substring(n,r)),isNaN(n)?xu:(r+=1)+n>e.length?Lu:(e=e.substr(r,n),t.C=r+n,e))}function ju(t){t.Y=Date.now()+t.P,Bu(t,t.P)}function Bu(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=bu(Ls(t.eb,t),e)}function Ku(t){t.B&&(ks.clearTimeout(t.B),t.B=null)}function qu(t){0==t.l.G||t.I||dl(t.l,t)}function Wu(t){Ku(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,eu(t.W),uu(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Gu(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Tc(n.i,t)))if(n.I=t.N,!t.J&&Tc(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;fl(n),el(n)}cl(n),gu(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=bu(Ls(n.ab,n),6e3));if(1>=Ec(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else yl(n,11)}else if((t.J||n.g==t)&&fl(n),!qs(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(zs(l,"spdy")||zs(l,"quic")||zs(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(_c(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,rc(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=gl(r,r.H?r.la:null,r.W),d.J){kc(r.i,d);var p=d,y=r.K;y&&p.setTimeout(y),p.B&&(Ku(p),ju(p)),r.g=d}else ul(r);0<n.l.length&&il(n)}else"stop"!=o[0]&&"close"!=o[0]||yl(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?yl(n,7):tl(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}yu(4)}catch(o){}}function zu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(As(t)||"string"==typeof t)js(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(As(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(As(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Xu(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Xu)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Zu(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Hu(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Hu(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Hu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Es=Du.prototype).setTimeout=function(t){this.P=t},Es.gb=function(t){t=t.target;var e=this.L;e&&3==Hc(t)?e.l():this.Ia(t)},Es.Ia=function(t){try{if(t==this.g)t:{var e=Hc(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||oa||this.g&&(this.h.h||this.g.ga()||Yc(this.g)))){this.I||4!=e||7==n||yu(8==n||0>=r?3:2),Ku(this);var i=this.g.ba();this.N=i;e:if(Vu(this)){var o=Yc(this.g);t="";var s=o.length,a=4==Hc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Wu(this),qu(this);var u="";break e}this.h.i=new ks.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qs(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,gu(12),Wu(this),qu(this);break t}lu(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Gu(this,i)}this.U?(Uu(this,e,u),oa&&this.i&&3==e&&(au(this.V,this.W,"tick",this.fb),this.W.start())):(lu(this.j,this.m,u,null),Gu(this,u)),4==e&&Wu(this),this.i&&!this.I&&(4==e?dl(this.l,this):(this.i=!1,ju(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,gu(12)):(this.o=0,gu(13)),Wu(this),qu(this)}}}catch(e){}},Es.fb=function(){if(this.g){var t=Hc(this.g),e=this.g.ga();this.C<e.length&&(Ku(this),Uu(this,t,e),this.i&&4!=t&&ju(this))}},Es.cancel=function(){this.I=!0,Wu(this)},Es.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(yu(3),gu(17)),Wu(this),this.o=2,qu(this)):Bu(this,this.Y-t)},(Es=Xu.prototype).R=function(){Zu(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Es.T=function(){return Zu(this),this.g.concat()},Es.get=function(t,e){return Hu(this.h,t)?this.h[t]:e},Es.set=function(t,e){Hu(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Es.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Yu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ju(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ju){this.g=void 0!==e?e:t.g,$u(this,t.j),this.s=t.s,tc(this,t.i),ec(this,t.m),this.l=t.l,e=t.h;var n=new dc;n.i=e.i,e.g&&(n.g=new Xu(e.g),n.h=e.h),nc(this,n),this.o=t.o}else t&&(n=String(t).match(Yu))?(this.g=!!e,$u(this,n[1]||"",!0),this.s=oc(n[2]||""),tc(this,n[3]||"",!0),ec(this,n[4]),this.l=oc(n[5]||"",!0),nc(this,n[6]||"",!0),this.o=oc(n[7]||"")):(this.g=!!e,this.h=new dc(null,this.g))}function Qu(t){return new Ju(t)}function $u(t,e,n){t.j=n?oc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function tc(t,e,n){t.i=n?oc(e,!0):e}function ec(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function nc(t,e,n){e instanceof dc?(t.h=e,function(t,e){e&&!t.j&&(pc(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(yc(this,e),gc(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=sc(e,hc)),t.h=new dc(e,t.g))}function rc(t,e,n){t.h.set(e,n)}function ic(t){return rc(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function oc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function sc(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ac),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ac(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ju.prototype.toString=function(){var t=[],e=this.j;e&&t.push(sc(e,uc,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(sc(e,uc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(sc(n,"/"==n.charAt(0)?lc:cc,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",sc(n,fc)),t.join("")};var uc=/[#\/\?@]/g,cc=/[#\?:]/g,lc=/[#\?]/g,hc=/[#\?@]/g,fc=/#/g;function dc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function pc(t){t.g||(t.g=new Xu,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function yc(t,e){pc(t),e=mc(t,e),Hu(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Hu((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Zu(t)))}function vc(t,e){return pc(t),e=mc(t,e),Hu(t.g.h,e)}function gc(t,e,n){yc(t,e),0<n.length&&(t.i=null,t.g.set(mc(t,e),Ks(n)),t.h+=n.length)}function mc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Es=dc.prototype).add=function(t,e){pc(this),this.i=null,t=mc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Es.forEach=function(t,e){pc(this),this.g.forEach((function(n,r){js(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Es.T=function(){pc(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Es.R=function(t){pc(this);var e=[];if("string"==typeof t)vc(this,t)&&(e=Bs(e,this.g.get(mc(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Bs(e,t[n])}return e},Es.set=function(t,e){return pc(this),this.i=null,vc(this,t=mc(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Es.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Es.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var bc=function(t,e){this.h=t,this.g=e};function wc(t){this.l=t||Ic,ks.PerformanceNavigationTiming?t=0<(t=ks.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(ks.g&&ks.g.Ea&&ks.g.Ea()&&ks.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ic=10;function Sc(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Ec(t){return t.h?1:t.g?t.g.size:0}function Tc(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function _c(t,e){t.g?t.g.add(e):t.h=e}function kc(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Nc(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Ss(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ks(t.i)}function Ac(){}function Cc(){this.g=new Ac}function Dc(t,e,n){var r=n||"";try{zu(t,(function(t,n){var i=t;Cs(t)&&(i=qa(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Rc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function Oc(t){this.l=t.$b||null,this.j=t.ib||!1}function xc(t,e){ja.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Lc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wc.prototype.cancel=function(){var t,e;if(this.i=Nc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Ss(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Ac.prototype.stringify=function(t){return ks.JSON.stringify(t,void 0)},Ac.prototype.parse=function(t){return ks.JSON.parse(t,void 0)},Ps(Oc,Su),Oc.prototype.g=function(){return new xc(this.l,this.j)},Oc.prototype.i=function(t){return function(){return t}}({}),Ps(xc,ja);var Lc=0;function Fc(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Pc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Vc(t)}function Vc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Es=xc.prototype).open=function(t,e){if(this.readyState!=Lc)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Vc(this)},Es.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ks).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Es.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pc(this)),this.readyState=Lc},Es.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Vc(this)),this.g&&(this.readyState=3,Vc(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ks.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fc(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Es.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Pc(this):Vc(this),3==this.readyState&&Fc(this)}},Es.Ua=function(t){this.g&&(this.response=this.responseText=t,Pc(this))},Es.Ta=function(t){this.g&&(this.response=t,Pc(this))},Es.ha=function(){this.g&&Pc(this)},Es.setRequestHeader=function(t,e){this.v.append(t,e)},Es.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Es.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(xc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Uc=ks.JSON.parse;function Mc(t){ja.call(this),this.headers=new Xu,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jc,this.K=this.L=!1}Ps(Mc,ja);var jc="",Bc=/^https?$/i,Kc=["POST","PUT"];function qc(t){return"content-type"==t.toLowerCase()}function Wc(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Gc(t),Xc(t)}function Gc(t){t.D||(t.D=!0,Ba(t,"complete"),Ba(t,"error"))}function zc(t){if(t.h&&void 0!==_s&&(!t.C[1]||4!=Hc(t)||2!=t.ba()))if(t.v&&4==Hc(t))nu(t.Fa,0,t);else if(Ba(t,"readystatechange"),4==Hc(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Yu)[1]||null;if(!o&&ks.self&&ks.self.location){var s=ks.self.location.protocol;o=s.substr(0,s.length-1)}i=!Bc.test(o?o.toLowerCase():"")}e=i}if(e)Ba(t,"complete"),Ba(t,"success");else{t.m=6;try{var a=2<Hc(t)?t.g.statusText:""}catch(t){a=""}t.j=a+" ["+t.ba()+"]",Gc(t)}}finally{Xc(t)}}}function Xc(t,e){if(t.g){Zc(t);var n=t.g,r=t.C[0]?Ns:null;t.g=null,t.C=null,e||Ba(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Zc(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ks.clearTimeout(t.A),t.A=null)}function Hc(t){return t.g?t.g.readyState:0}function Yc(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case jc:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Jc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ys(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):rc(t,e,n))}function Qc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function $c(t){this.za=0,this.l=[],this.h=new cu,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Qc("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Qc("baseRetryDelayMs",5e3,t),this.$a=Qc("retryDelaySeedMs",1e4,t),this.Ya=Qc("forwardChannelMaxRetries",2,t),this.ra=Qc("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new wc(t&&t.concurrentRequestLimit),this.Ca=new Cc,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function tl(t){if(nl(t),3==t.G){var e=t.V++,n=Qu(t.F);rc(n,"SID",t.J),rc(n,"RID",e),rc(n,"TYPE","terminate"),sl(t,n),(e=new Du(t,t.h,e,void 0)).K=2,e.v=ic(Qu(n)),n=!1,ks.navigator&&ks.navigator.sendBeacon&&(n=ks.navigator.sendBeacon(e.v.toString(),"")),!n&&ks.Image&&((new Image).src=e.v,n=!0),n||(e.g=ml(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ju(e)}vl(t)}function el(t){t.g&&(ll(t),t.g.cancel(),t.g=null)}function nl(t){el(t),t.u&&(ks.clearTimeout(t.u),t.u=null),fl(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ks.clearTimeout(t.m),t.m=null)}function rl(t,e){t.l.push(new bc(t.Za++,e)),3==t.G&&il(t)}function il(t){Sc(t.i)||t.m||(t.m=!0,Ya(t.Ha,t),t.C=0)}function ol(t,e){var n;n=e?e.m:t.V++;var r=Qu(t.F);rc(r,"SID",t.J),rc(r,"RID",n),rc(r,"AID",t.U),sl(t,r),t.o&&t.s&&Jc(r,t.o,t.s),n=new Du(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=al(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),_c(t.i,n),Fu(n,r,e)}function sl(t,e){t.j&&zu({},(function(t,n){rc(e,n,t)}))}function al(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Ls(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Dc(l,s,"req"+c+"_")}catch(t){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function ul(t){t.g||t.u||(t.Y=1,Ya(t.Ga,t),t.A=0)}function cl(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=bu(Ls(t.Ga,t),pl(t,t.A)),t.A++,!0)}function ll(t){null!=t.B&&(ks.clearTimeout(t.B),t.B=null)}function hl(t){t.g=new Du(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Qu(t.oa);rc(e,"RID","rpc"),rc(e,"SID",t.J),rc(e,"CI",t.N?"0":"1"),rc(e,"AID",t.U),sl(t,e),rc(e,"TYPE","xmlhttp"),t.o&&t.s&&Jc(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=ic(Qu(e)),n.s=null,n.U=!0,Pu(n,t)}function fl(t){null!=t.v&&(ks.clearTimeout(t.v),t.v=null)}function dl(t,e){var n=null;if(t.g==e){fl(t),ll(t),t.g=null;var r=2}else{if(!Tc(t.i,e))return;n=e.D,kc(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Ba(r=du(),new mu(r,n,e,i)),il(t)}else ul(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Ec(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=bu(Ls(t.Ha,t,e),pl(t,t.C)),t.C++,0)))}(t,e)||2==r&&cl(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:yl(t,5);break;case 4:yl(t,10);break;case 3:yl(t,6);break;default:yl(t,2)}}function pl(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function yl(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Ls(t.jb,t);n||(n=new Ju("//www.google.com/images/cleardot.gif"),ks.location&&"http"==ks.location.protocol||$u(n,"https"),ic(n)),function(t,e){var n=new cu;if(ks.Image){var r=new Image;r.onload=Fs(Rc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Fs(Rc,n,r,"TestLoadImage: error",!1,e),r.onabort=Fs(Rc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fs(Rc,n,r,"TestLoadImage: timeout",!1,e),ks.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else gu(2);t.G=0,t.j&&t.j.va(e),vl(t),nl(t)}function vl(t){t.G=0,t.I=-1,t.j&&(0==Nc(t.i).length&&0==t.l.length||(t.i.i.length=0,Ks(t.l),t.l.length=0),t.j.ua())}function gl(t,e,n){var r=function(t){return t instanceof Ju?Qu(t):new Ju(t,void 0)}(n);if(""!=r.i)e&&tc(r,e+"."+r.i),ec(r,r.m);else{var i=ks.location;r=function(t,e,n,r){var i=new Ju(null,void 0);return t&&$u(i,t),e&&tc(i,e),n&&ec(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Ys(t.aa,(function(t,e){rc(r,e,t)})),e=t.D,n=t.sa,e&&n&&rc(r,e,n),rc(r,"VER",t.ma),sl(t,r),r}function ml(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Mc(new Oc({ib:!0})):new Mc(t.qa)).L=t.H,e}function bl(){}function wl(){if(ra&&!(10<=Number(va)))throw Error("Environmental error: no available transport.")}function Il(t,e){ja.call(this),this.g=new $c(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!qs(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qs(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Tl(this)}function Sl(t){Nu.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function El(){Au.call(this),this.status=1}function Tl(t){this.g=t}(Es=Mc.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_u.g(),this.C=this.u?Eu(this.u):Eu(_u),this.g.onreadystatechange=Ls(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Wc(this,t)}t=n||"";var i=new Xu(this.headers);r&&zu(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=qc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=ks.FormData&&t instanceof ks.FormData,!(0<=Ms(Kc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Zc(this),0<this.B&&((this.K=function(t){return ra&&pa()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ls(this.pa,this)):this.A=nu(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Wc(this,t)}},Es.pa=function(){void 0!==_s&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ba(this,"timeout"),this.abort(8))},Es.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ba(this,"complete"),Ba(this,"abort"),Xc(this))},Es.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xc(this,!0)),Mc.Z.M.call(this)},Es.Fa=function(){this.s||(this.F||this.v||this.l?zc(this):this.cb())},Es.cb=function(){zc(this)},Es.ba=function(){try{return 2<Hc(this)?this.g.status:-1}catch(t){return-1}},Es.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Es.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Uc(e)}},Es.Da=function(){return this.m},Es.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Es=$c.prototype).ma=8,Es.G=1,Es.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},Es.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Du(this,this.h,t,void 0),n=this.s;if(this.P&&(n?$s(n=Js(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=al(this,e,r),rc(i=Qu(this.F),"RID",t),rc(i,"CVER",22),this.D&&rc(i,"X-HTTP-Session-Id",this.D),sl(this,i),this.o&&n&&Jc(i,this.o,n),_c(this.i,e),this.Ra&&rc(i,"TYPE","init"),this.ja?(rc(i,"$req",r),rc(i,"SID","null"),e.$=!0,Fu(e,i,null)):Fu(e,i,r),this.G=2}}else 3==this.G&&(t?ol(this,t):0==this.l.length||Sc(this.i)||ol(this))},Es.Ga=function(){if(this.u=null,hl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=bu(Ls(this.bb,this),t)}},Es.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,gu(10),el(this),hl(this))},Es.ab=function(){null!=this.v&&(this.v=null,el(this),cl(this),gu(19))},Es.jb=function(t){t?(this.h.info("Successfully pinged google.com"),gu(2)):(this.h.info("Failed to ping google.com"),gu(1))},(Es=bl.prototype).xa=function(){},Es.wa=function(){},Es.va=function(){},Es.ua=function(){},Es.Oa=function(){},wl.prototype.g=function(t,e){return new Il(t,e)},Ps(Il,ja),Il.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ya(Ls(t.hb,t,e))),gu(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=gl(t,null,t.W),il(t)},Il.prototype.close=function(){tl(this.g)},Il.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,rl(this.g,e)}else this.v?((e={}).__data__=qa(t),rl(this.g,e)):rl(this.g,t)},Il.prototype.M=function(){this.g.j=null,delete this.j,tl(this.g),delete this.g,Il.Z.M.call(this)},Ps(Sl,Nu),Ps(El,Au),Ps(Tl,bl),Tl.prototype.xa=function(){Ba(this.g,"a")},Tl.prototype.wa=function(t){Ba(this.g,new Sl(t))},Tl.prototype.va=function(t){Ba(this.g,new El(t))},Tl.prototype.ua=function(){Ba(this.g,"b")},wl.prototype.createWebChannel=wl.prototype.g,Il.prototype.send=Il.prototype.u,Il.prototype.open=Il.prototype.m,Il.prototype.close=Il.prototype.close,wu.NO_ERROR=0,wu.TIMEOUT=8,wu.HTTP_ERROR=6,Iu.COMPLETE="complete",Tu.EventType=ku,ku.OPEN="a",ku.CLOSE="b",ku.ERROR="c",ku.MESSAGE="d",ja.prototype.listen=ja.prototype.N,Mc.prototype.listenOnce=Mc.prototype.O,Mc.prototype.getLastError=Mc.prototype.La,Mc.prototype.getLastErrorCode=Mc.prototype.Da,Mc.prototype.getStatus=Mc.prototype.ba,Mc.prototype.getResponseJson=Mc.prototype.Qa,Mc.prototype.getResponseText=Mc.prototype.ga,Mc.prototype.send=Mc.prototype.ea;var _l=wu,kl=Iu,Nl=hu,Al=10,Cl=11,Dl=Oc,Rl=Tu,Ol=Mc,xl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();xl.o=-1;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ll={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Fl=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return So(e,t),e}(Error),Pl=new is("@firebase/firestore");function Vl(){return Pl.logLevel}function Ul(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Pl.logLevel<=Jo.DEBUG){var r=e.map(Bl);Pl.debug.apply(Pl,Ao(["Firestore (8.10.0): "+t],r))}}function Ml(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Pl.logLevel<=Jo.ERROR){var r=e.map(Bl);Pl.error.apply(Pl,Ao(["Firestore (8.10.0): "+t],r))}}function jl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Pl.logLevel<=Jo.WARN){var r=e.map(Bl);Pl.warn.apply(Pl,Ao(["Firestore (8.10.0): "+t],r))}}function Bl(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kl(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+t;throw Ml(e),new Error(e)}function ql(t,e){t||Kl()}function Wl(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Gl(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var zl=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Gl(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Xl(t,e){return t<e?-1:t>e?1:0}function Zl(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Hl(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Yl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Fl(Ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Fl(Ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Fl(Ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Fl(Ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Xl(this.nanoseconds,t.nanoseconds):Xl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Jl=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Yl(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ql(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $l(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function th(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var eh=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Kl(),void 0===n?n=t.length-e:n>t.length-e&&Kl(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),nh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return So(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(eh),rh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ih=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return So(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return rh.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Fl(Ll.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Fl(Ll.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Fl(Ll.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(eh),oh=function(){function t(t){this.fields=t,t.sort(ih.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Zl(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),sh=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Xl(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();sh.EMPTY_BYTE_STRING=new sh("");var ah=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uh(t){if(ql(!!t),"string"==typeof t){var e=0,n=ah.exec(t);if(ql(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ch(t.seconds),nanos:ch(t.nanos)}}function ch(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function lh(t){return"string"==typeof t?sh.fromBase64String(t):sh.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hh(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fh(t){var e=t.mapValue.fields.__previous_value__;return hh(e)?fh(e):e}function dh(t){var e=uh(t.mapValue.fields.__local_write_time__.timestampValue);return new Yl(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ph(t){return null==t}function yh(t){return 0===t&&1/t==-1/0}function vh(t){return"number"==typeof t&&Number.isInteger(t)&&!yh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var gh=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(nh.fromString(e))},t.fromName=function(e){return new t(nh.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===nh.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return nh.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new nh(e.slice()))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function mh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hh(t)?4:10:Kl()}function bh(t,e){var n=mh(t);if(n!==mh(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dh(t).isEqual(dh(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=uh(t.timestampValue),r=uh(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return lh(t.bytesValue).isEqual(lh(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ch(t.geoPointValue.latitude)===ch(e.geoPointValue.latitude)&&ch(t.geoPointValue.longitude)===ch(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ch(t.integerValue)===ch(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ch(t.doubleValue),r=ch(e.doubleValue);return n===r?yh(n)===yh(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Zl(t.arrayValue.values||[],e.arrayValue.values||[],bh);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ql(n)!==Ql(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!bh(n[i],r[i])))return!1;return!0}(t,e);default:return Kl()}}function wh(t,e){return void 0!==(t.values||[]).find((function(t){return bh(t,e)}))}function Ih(t,e){var n=mh(t),r=mh(e);if(n!==r)return Xl(n,r);switch(n){case 0:return 0;case 1:return Xl(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ch(t.integerValue||t.doubleValue),r=ch(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Sh(t.timestampValue,e.timestampValue);case 4:return Sh(dh(t),dh(e));case 5:return Xl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=lh(t),r=lh(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Xl(n[i],r[i]);if(0!==o)return o}return Xl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Xl(ch(t.latitude),ch(e.latitude));return 0!==n?n:Xl(ch(t.longitude),ch(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ih(n[i],r[i]);if(o)return o}return Xl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Xl(r[s],o[s]);if(0!==a)return a;var u=Ih(n[r[s]],i[o[s]]);if(0!==u)return u}return Xl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Kl()}}function Sh(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Xl(t,e);var n=uh(t),r=uh(e),i=Xl(n.seconds,r.seconds);return 0!==i?i:Xl(n.nanos,r.nanos)}function Eh(t){return Th(t)}function Th(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=uh(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?lh(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,gh.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Th(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Th(t.fields[o])}return e+"}"}(t.mapValue):Kl();var e,n}function _h(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function kh(t){return!!t&&"integerValue"in t}function Nh(t){return!!t&&"arrayValue"in t}function Ah(t){return!!t&&"nullValue"in t}function Ch(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dh(t){return!!t&&"mapValue"in t}function Rh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return $l(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Rh(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Rh(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Oh=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Dh(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Rh(e)},t.prototype.setAll=function(t){var e=this,n=ih.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Rh(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Dh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return bh(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Dh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){$l(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Rh(this.value))},t}();function xh(t){var e=[];return $l(t.fields,(function(t,n){var r=new ih([t]);if(Dh(n)){var i=xh(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new oh(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Lh=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Jl.min(),Oh.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Oh.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Oh.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Oh.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Oh.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Fh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ph(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Fh(t,e,n,r,i,o,s)}function Vh(t){var e=Wl(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Eh(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),ph(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Yh(e.startAt)),e.endAt&&(n+="|ub:",n+=Yh(e.endAt)),e.h=n}return e.h}function Uh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Qh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!bh(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tf(t.startAt,e.startAt)&&tf(t.endAt,e.endAt)}function Mh(t){return gh.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var jh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return So(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Bh(t,n,r):"array-contains"===n?new Gh(t,r):"in"===n?new zh(t,r):"not-in"===n?new Xh(t,r):"array-contains-any"===n?new Zh(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Kh(t,n):new qh(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ih(e,this.value)):null!==e&&mh(this.value)===mh(e)&&this.m(Ih(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Kl()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Bh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=gh.fromName(r.referenceValue),i}return So(e,t),e.prototype.matches=function(t){var e=gh.comparator(t.key,this.key);return this.m(e)},e}(jh),Kh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Wh("in",n),r}return So(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(jh),qh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Wh("not-in",n),r}return So(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(jh);function Wh(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return gh.fromName(t.referenceValue)}))}var Gh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return So(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Nh(e)&&wh(e.arrayValue,this.value)},e}(jh),zh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return So(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&wh(this.value.arrayValue,e)},e}(jh),Xh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return So(e,t),e.prototype.matches=function(t){if(wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!wh(this.value.arrayValue,e)},e}(jh),Zh=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return So(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Nh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return wh(e.value.arrayValue,t)}))},e}(jh),Hh=function(t,e){this.position=t,this.before=e};function Yh(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Eh(t)})).join(",")}var Jh=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Qh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function $h(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?gh.comparator(gh.fromName(s.referenceValue),n.key):Ih(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function tf(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!bh(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ef=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function nf(t,e,n,r,i,o,s,a){return new ef(t,e,n,r,i,o,s,a)}function rf(t){return new ef(t)}function of(t){return!ph(t.limit)&&"F"===t.limitType}function sf(t){return!ph(t.limit)&&"L"===t.limitType}function af(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function uf(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function cf(t){return null!==t.collectionGroup}function lf(t){var e=Wl(t);if(null===e.p){e.p=[];var n=uf(e),r=af(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Jh(n)),e.p.push(new Jh(ih.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Jh(ih.keyField(),u))}}}return e.p}function hf(t){var e=Wl(t);if(!e.T)if("F"===e.limitType)e.T=Ph(e.path,e.collectionGroup,lf(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=lf(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Jh(o.field,s))}var a=e.endAt?new Hh(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Hh(e.startAt.position,!e.startAt.before):null;e.T=Ph(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function ff(t,e,n){return new ef(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function df(t,e){return Uh(hf(t),hf(e))&&t.limitType===e.limitType}function pf(t){return Vh(hf(t))+"|lt:"+t.limitType}function yf(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Eh(e.value);var e})).join(", ")+"]"),ph(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Yh(t.startAt)),t.endAt&&(e+=", endAt: "+Yh(t.endAt)),"Target("+e+")"}(hf(t))+"; limitType="+t.limitType+")"}function vf(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):gh.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!$h(t.startAt,lf(t),e)||t.endAt&&$h(t.endAt,lf(t),e))}(t,e)}function gf(t){return function(e,n){for(var r=!1,i=0,o=lf(t);i<o.length;i++){var s=o[i],a=mf(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function mf(t,e,n){var r=t.field.isKeyField()?gh.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ih(r,i):Kl()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Kl()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bf(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function wf(t){return{integerValue:""+t}}function If(t,e){return vh(e)?wf(e):bf(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Sf=function(){this._=void 0};function Ef(t,e,n){return t instanceof kf?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Nf?Af(t,e):t instanceof Cf?Df(t,e):function(t,e){var n=_f(t,e),r=Of(n)+Of(t.A);return kh(n)&&kh(t.A)?wf(r):bf(t.R,r)}(t,e)}function Tf(t,e,n){return t instanceof Nf?Af(t,e):t instanceof Cf?Df(t,e):n}function _f(t,e){return t instanceof Rf?kh(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var kf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return So(e,t),e}(Sf),Nf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return So(e,t),e}(Sf);function Af(t,e){for(var n=xf(e),r=function(t){n.some((function(e){return bh(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Cf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return So(e,t),e}(Sf);function Df(t,e){for(var n=xf(e),r=function(t){n=n.filter((function(e){return!bh(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Rf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return So(e,t),e}(Sf);function Of(t){return ch(t.integerValue||t.doubleValue)}function xf(t){return Nh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Lf=function(t,e){this.field=t,this.transform=e},Ff=function(t,e){this.version=t,this.transformResults=e},Pf=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Vf(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Uf=function(){};function Mf(t,e,n){t instanceof Wf?function(t,e,n){var r=t.value.clone(),i=Xf(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Gf?function(t,e,n){if(Vf(t.precondition,e)){var r=Xf(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(zf(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function jf(t,e,n){t instanceof Wf?function(t,e,n){if(Vf(t.precondition,e)){var r=t.value.clone(),i=Zf(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(qf(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Gf?function(t,e,n){if(Vf(t.precondition,e)){var r=Zf(t.fieldTransforms,n,e),i=e.data;i.setAll(zf(t)),i.setAll(r),e.convertToFoundDocument(qf(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Vf(t.precondition,e)&&e.convertToNoDocument(Jl.min())}(t,e)}function Bf(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=_f(o.transform,s||null);null!=a&&(null==n&&(n=Oh.empty()),n.set(o.field,a))}return n||null}function Kf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Zl(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Nf&&e instanceof Nf||t instanceof Cf&&e instanceof Cf?Zl(t.elements,e.elements,bh):t instanceof Rf&&e instanceof Rf?bh(t.A,e.A):t instanceof kf&&e instanceof kf}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function qf(t){return t.isFoundDocument()?t.version:Jl.min()}var Wf=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return So(e,t),e}(Uf),Gf=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return So(e,t),e}(Uf);function zf(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Xf(t,e,n){var r=new Map;ql(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Tf(s,a,n[i]))}return r}function Zf(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Ef(a,u,e))}return r}var Hf,Yf,Jf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return So(e,t),e}(Uf),Qf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return So(e,t),e}(Uf),$f=function(t){this.count=t};function td(t){switch(t){case Ll.OK:return Kl();case Ll.CANCELLED:case Ll.UNKNOWN:case Ll.DEADLINE_EXCEEDED:case Ll.RESOURCE_EXHAUSTED:case Ll.INTERNAL:case Ll.UNAVAILABLE:case Ll.UNAUTHENTICATED:return!1;case Ll.INVALID_ARGUMENT:case Ll.NOT_FOUND:case Ll.ALREADY_EXISTS:case Ll.PERMISSION_DENIED:case Ll.FAILED_PRECONDITION:case Ll.ABORTED:case Ll.OUT_OF_RANGE:case Ll.UNIMPLEMENTED:case Ll.DATA_LOSS:return!0;default:return Kl()}}function ed(t){if(void 0===t)return Ml("GRPC error has no .code"),Ll.UNKNOWN;switch(t){case Hf.OK:return Ll.OK;case Hf.CANCELLED:return Ll.CANCELLED;case Hf.UNKNOWN:return Ll.UNKNOWN;case Hf.DEADLINE_EXCEEDED:return Ll.DEADLINE_EXCEEDED;case Hf.RESOURCE_EXHAUSTED:return Ll.RESOURCE_EXHAUSTED;case Hf.INTERNAL:return Ll.INTERNAL;case Hf.UNAVAILABLE:return Ll.UNAVAILABLE;case Hf.UNAUTHENTICATED:return Ll.UNAUTHENTICATED;case Hf.INVALID_ARGUMENT:return Ll.INVALID_ARGUMENT;case Hf.NOT_FOUND:return Ll.NOT_FOUND;case Hf.ALREADY_EXISTS:return Ll.ALREADY_EXISTS;case Hf.PERMISSION_DENIED:return Ll.PERMISSION_DENIED;case Hf.FAILED_PRECONDITION:return Ll.FAILED_PRECONDITION;case Hf.ABORTED:return Ll.ABORTED;case Hf.OUT_OF_RANGE:return Ll.OUT_OF_RANGE;case Hf.UNIMPLEMENTED:return Ll.UNIMPLEMENTED;case Hf.DATA_LOSS:return Ll.DATA_LOSS;default:return Kl()}}(Yf=Hf||(Hf={}))[Yf.OK=0]="OK",Yf[Yf.CANCELLED=1]="CANCELLED",Yf[Yf.UNKNOWN=2]="UNKNOWN",Yf[Yf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yf[Yf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yf[Yf.NOT_FOUND=5]="NOT_FOUND",Yf[Yf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yf[Yf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yf[Yf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yf[Yf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yf[Yf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yf[Yf.ABORTED=10]="ABORTED",Yf[Yf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yf[Yf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yf[Yf.INTERNAL=13]="INTERNAL",Yf[Yf.UNAVAILABLE=14]="UNAVAILABLE",Yf[Yf.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var nd=function(){function t(t,e){this.comparator=t,this.root=e||id.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,id.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,id.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new rd(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new rd(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new rd(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new rd(this.root,t,this.comparator,!0)},t}(),rd=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),id=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Kl();if(this.right.isRed())throw Kl();var t=this.left.check();if(t!==this.right.check())throw Kl();return t+(this.isRed()?0:1)},t}();id.EMPTY=null,id.RED=!0,id.BLACK=!1,id.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Kl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Kl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Kl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Kl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Kl()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new id(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var od=function(){function t(t){this.comparator=t,this.data=new nd(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new sd(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new sd(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),sd=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ad=new nd(gh.comparator);function ud(){return ad}var cd=new nd(gh.comparator);function ld(){return cd}var hd=new nd(gh.comparator);var fd=new od(gh.comparator);function dd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=fd,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var pd=new od(Xl);function yd(){return pd}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var vd=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,gd.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Jl.min(),r,yd(),ud(),dd())},t}(),gd=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(sh.EMPTY_BYTE_STRING,n,dd(),dd(),dd())},t}(),md=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},bd=function(t,e){this.targetId=t,this.V=e},wd=function(t,e,n,r){void 0===n&&(n=sh.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Id=function(){function t(){this.S=0,this.D=Td(),this.C=sh.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=dd(),e=dd(),n=dd();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Kl()}})),new gd(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=Td()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),Sd=function(){function t(t){this.W=t,this.G=new Map,this.H=ud(),this.J=Ed(),this.Y=new od(Xl)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Kl()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Mh(i))if(0===n){var o=new gh(i.path);this.tt(e,o,Lh.newNoDocument(o,Jl.min()))}else ql(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Mh(o.target)){var s=new gh(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Lh.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=dd();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new vd(t,n,this.Y,this.H,r);return this.H=ud(),this.J=Ed(),this.Y=new od(Xl),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Id,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new od(Xl),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ul("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Id),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ed(){return new nd(gh.comparator)}function Td(){return new nd(gh.comparator)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var _d={asc:"ASCENDING",desc:"DESCENDING"},kd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nd=function(t,e){this.databaseId=t,this.I=e};function Ad(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cd(t,e){return t.I?e.toBase64():e.toUint8Array()}function Dd(t,e){return Ad(t,e.toTimestamp())}function Rd(t){return ql(!!t),Jl.fromTimestamp(function(t){var e=uh(t);return new Yl(e.seconds,e.nanos)}(t))}function Od(t,e){return function(t){return new nh(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function xd(t){var e=nh.fromString(t);return ql(np(e)),e}function Ld(t,e){return Od(t.databaseId,e.path)}function Fd(t,e){var n=xd(e);if(n.get(1)!==t.databaseId.projectId)throw new Fl(Ll.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Fl(Ll.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new gh(Md(n))}function Pd(t,e){return Od(t.databaseId,e)}function Vd(t){var e=xd(t);return 4===e.length?nh.emptyPath():Md(e)}function Ud(t){return new nh(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Md(t){return ql(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function jd(t,e,n){return{name:Ld(t,e),fields:n.value.mapValue.fields}}function Bd(t,e){var n;if(e instanceof Wf)n={update:jd(t,e.key,e.value)};else if(e instanceof Jf)n={delete:Ld(t,e.key)};else if(e instanceof Gf)n={update:jd(t,e.key,e.data),updateMask:ep(e.fieldMask)};else{if(!(e instanceof Qf))return Kl();n={verify:Ld(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof kf)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Nf)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Cf)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rf)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Kl()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Dd(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Kl()}(t,e.precondition)),n}function Kd(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Pf.updateTime(Rd(t.updateTime)):void 0!==t.exists?Pf.exists(t.exists):Pf.none()}(e.currentDocument):Pf.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)ql("REQUEST_TIME"===e.setToServerValue),n=new kf;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Nf(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Cf(i)}else"increment"in e?n=new Rf(t,e.increment):Kl();var o=ih.fromServerFormat(e.fieldPath);return new Lf(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Fd(t,e.update.name),o=new Oh({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new oh(e.map((function(t){return ih.fromServerFormat(t)})))}(e.updateMask);return new Gf(i,o,s,n,r)}return new Wf(i,o,n,r)}if(e.delete){var a=Fd(t,e.delete);return new Jf(a,n)}if(e.verify){var u=Fd(t,e.verify);return new Qf(u,n)}return Kl()}function qd(t,e){return{documents:[Pd(t,e.path)]}}function Wd(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Pd(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Pd(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ch(t.value))return{unaryFilter:{field:Jd(t.field),op:"IS_NAN"}};if(Ah(t.value))return{unaryFilter:{field:Jd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ch(t.value))return{unaryFilter:{field:Jd(t.field),op:"IS_NOT_NAN"}};if(Ah(t.value))return{unaryFilter:{field:Jd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jd(t.field),op:Yd(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Jd(t.field),direction:Hd(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||ph(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Xd(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Xd(e.endAt)),n}function Gd(t){var e=Vd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ql(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=zd(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Jh(Qd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ph(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Zd(n.startAt));var l=null;return n.endAt&&(l=Zd(n.endAt)),nf(e,i,a,s,u,"F",c,l)}function zd(t){return t?void 0!==t.unaryFilter?[tp(t)]:void 0!==t.fieldFilter?[$d(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return zd(t)})).reduce((function(t,e){return t.concat(e)})):Kl():[]}function Xd(t){return{before:t.before,values:t.position}}function Zd(t){var e=!!t.before,n=t.values||[];return new Hh(n,e)}function Hd(t){return _d[t]}function Yd(t){return kd[t]}function Jd(t){return{fieldPath:t.canonicalString()}}function Qd(t){return ih.fromServerFormat(t.fieldPath)}function $d(t){return jh.create(Qd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Kl()}}(t.fieldFilter.op),t.fieldFilter.value)}function tp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Qd(t.unaryFilter.field);return jh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Qd(t.unaryFilter.field);return jh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Qd(t.unaryFilter.field);return jh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Qd(t.unaryFilter.field);return jh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Kl()}}function ep(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function np(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=op(e)),e=ip(t.get(n),e);return op(e)}function ip(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function op(t){return t+""}function sp(t){var e=t.length;if(ql(e>=2),2===e)return ql(""===t.charAt(0)&&""===t.charAt(1)),nh.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Kl(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Kl()}o=s+2}return new nh(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ap=function(t,e){this.seconds=t,this.nanoseconds=e},up=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};up.store="owner",up.key="owner";var cp=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};cp.store="mutationQueues",cp.keyPath="userId";var lp=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};lp.store="mutations",lp.keyPath="batchId",lp.userMutationsIndex="userMutationsIndex",lp.userMutationsKeyPath=["userId","batchId"];var hp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,rp(e)]},t.key=function(t,e,n){return[t,rp(e),n]},t}();hp.store="documentMutations",hp.PLACEHOLDER=new hp;var fp=function(t,e){this.path=t,this.readTime=e},dp=function(t,e){this.path=t,this.version=e},pp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};pp.store="remoteDocuments",pp.readTimeIndex="readTimeIndex",pp.readTimeIndexPath="readTime",pp.collectionReadTimeIndex="collectionReadTimeIndex",pp.collectionReadTimeIndexPath=["parentPath","readTime"];var yp=function(t){this.byteSize=t};yp.store="remoteDocumentGlobal",yp.key="remoteDocumentGlobalKey";var vp=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};vp.store="targets",vp.keyPath="targetId",vp.queryTargetsIndexName="queryTargetsIndex",vp.queryTargetsKeyPath=["canonicalId","targetId"];var gp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};gp.store="targetDocuments",gp.keyPath=["targetId","path"],gp.documentTargetsIndex="documentTargetsIndex",gp.documentTargetsKeyPath=["path","targetId"];var mp=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};mp.key="targetGlobalKey",mp.store="targetGlobal";var bp=function(t,e){this.collectionId=t,this.parent=e};bp.store="collectionParents",bp.keyPath=["collectionId","parent"];var wp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};wp.store="clientMetadata",wp.keyPath="clientId";var Ip=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Ip.store="bundles",Ip.keyPath="bundleId";var Sp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Sp.store="namedQueries",Sp.keyPath="name";var Ep=Ao(Ao([],Ao(Ao([],Ao(Ao([],Ao(Ao([],[cp.store,lp.store,hp.store,pp.store,vp.store,up.store,mp.store,gp.store]),[wp.store])),[yp.store])),[bp.store])),[Ip.store,Sp.store]),Tp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_p=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),kp=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Np=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Kl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Ap=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new kp,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Rp(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Pp(e.target.error);n.ft.reject(new Rp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Rp(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ul("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new xp(e)},t}(),Cp=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Lo())&&Ml("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ul("SimpleDb","Removing database:",t),Lp(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Lo(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return To(this,void 0,void 0,(function(){var e,n=this;return _o(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ul("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Rp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Fl(Ll.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Rp(t,n))},i.onupgradeneeded=function(t){Ul("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Ul("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return To(this,void 0,void 0,(function(){var i,o,s,a,u;return _o(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return _o(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Ap.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Np.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,Ul("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Dp=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Lp(this.Pt.delete())},t}(),Rp=function(t){function e(e,n){var r=this;return(r=t.call(this,Ll.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return So(e,t),e}(Fl);function Op(t){return"IndexedDbTransactionError"===t.name}var xp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ul("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ul("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Lp(n)},t.prototype.add=function(t){return Ul("SimpleDb","ADD",this.store.name,t,t),Lp(this.store.add(t))},t.prototype.get=function(t){var e=this;return Lp(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ul("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ul("SimpleDb","DELETE",this.store.name,t),Lp(this.store.delete(t))},t.prototype.count=function(){return Ul("SimpleDb","COUNT",this.store.name),Lp(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Ul("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Np((function(n,r){e.onerror=function(t){var e=Pp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Np((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Dp(i),s=e(i.primaryKey,i.value,o);if(s instanceof Np){var a=s.catch((function(t){return o.done(),Np.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Np.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Lp(t){return new Np((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Pp(t.target.error);n(e)}}))}var Fp=!1;function Pp(t){var e=Cp._t(Lo());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Fl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Fp||(Fp=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return So(e,t),e}(_p);function Up(t,e){var n=Wl(t);return Cp.It(n.Mt,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Mp=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Mf(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&jf(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&jf(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Jl.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),dd())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Zl(this.mutations,t.mutations,(function(t,e){return Kf(t,e)}))&&Zl(this.baseMutations,t.baseMutations,(function(t,e){return Kf(t,e)}))},t}(),jp=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){ql(e.mutations.length===r.length);for(var i=hd,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Bp=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Jl.min()),void 0===o&&(o=Jl.min()),void 0===s&&(s=sh.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Kp=function(t){this.Lt=t};function qp(t,e){if(e.document)return function(t,e,n){var r=Fd(t,e.name),i=Rd(e.updateTime),o=new Oh({mapValue:{fields:e.fields}}),s=Lh.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=gh.fromSegments(e.noDocument.path),r=Zp(e.noDocument.readTime),i=Lh.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=gh.fromSegments(e.unknownDocument.path);return r=Zp(e.unknownDocument.version),Lh.newUnknownDocument(o,r)}return Kl()}function Wp(t,e,n){var r=Gp(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Ld(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Ad(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new pp(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Xp(e.version);return s=e.hasCommittedMutations,new pp(null,new fp(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Xp(e.version);return new pp(new dp(c,l),null,null,!0,r,i)}return Kl()}function Gp(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zp(t){var e=new Yl(t[0],t[1]);return Jl.fromTimestamp(e)}function Xp(t){var e=t.toTimestamp();return new ap(e.seconds,e.nanoseconds)}function Zp(t){var e=new Yl(t.seconds,t.nanoseconds);return Jl.fromTimestamp(e)}function Hp(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Kd(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Kd(t.Lt,e)})),a=Yl.fromMillis(e.localWriteTimeMs);return new Mp(e.batchId,a,n,s)}function Yp(t){var e,n,r=Zp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Zp(t.lastLimboFreeSnapshotVersion):Jl.min();return void 0!==t.query.documents?(ql(1===(n=t.query).documents.length),e=hf(rf(Vd(n.documents[0])))):e=function(t){return hf(Gd(t))}(t.query),new Bp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,sh.fromBase64String(t.resumeToken))}function Jp(t,e){var n,r=Xp(e.snapshotVersion),i=Xp(e.lastLimboFreeSnapshotVersion);n=Mh(e.target)?qd(t.Lt,e.target):Wd(t.Lt,e.target);var o=e.resumeToken.toBase64();return new vp(e.targetId,Vh(e.target),r,o,e.sequenceNumber,i,n)}function Qp(t){var e=Gd({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ff(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var $p=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return ty(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Zp(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return ty(t).put({bundleId:(n=e).id,createTime:Xp(Rd(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return ey(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Qp(e.bundledQuery),readTime:Zp(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return ey(t).put(function(t){return{name:t.name,readTime:Xp(Rd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function ty(t){return Up(t,Ip.store)}function ey(t){return Up(t,Sp.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ny=function(){function t(){this.Bt=new ry}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Np.resolve()},t.prototype.getCollectionParents=function(t,e){return Np.resolve(this.Bt.getEntries(e))},t}(),ry=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new od(nh.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new od(nh.comparator)).toArray()},t}(),iy=function(){function t(){this.qt=new ry}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:rp(i)};return oy(t).put(o)}return Np.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Hl(e),""],!1,!0);return oy(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(sp(o.parent))}return n}))},t}();function oy(t){return Up(t,bp.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var sy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ay=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function uy(t,e,n){var r=t.store(lp.store),i=t.store(hp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){ql(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=hp.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Np.waitFor(o).next((function(){return c}))}function cy(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Kl();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ay.DEFAULT_COLLECTION_PERCENTILE=10,ay.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ay.DEFAULT=new ay(41943040,ay.DEFAULT_COLLECTION_PERCENTILE,ay.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ay.DISABLED=new ay(-1,0,0);var ly=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return ql(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fy(t).$t({index:lp.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=dy(t),s=fy(t);return s.add({}).next((function(a){ql("number"==typeof a);for(var u=new Mp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Bd(t.Lt,e)})),i=n.mutations.map((function(e){return Bd(t.Lt,e)}));return new lp(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new od((function(t,e){return Xl(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],y=hp.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(y,hp.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),Np.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return fy(t).get(e).next((function(t){return t?(ql(t.userId===n.userId),Hp(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Np.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return fy(t).$t({index:lp.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ql(e.batchId>=r),o=Hp(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return fy(t).$t({index:lp.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fy(t).Nt(lp.userMutationsIndex,n).next((function(t){return t.map((function(t){return Hp(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=hp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return dy(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=sp(u);if(a===n.userId&&e.path.isEqual(l))return fy(t).get(c).next((function(t){if(!t)throw Kl();ql(t.userId===n.userId),o.push(Hp(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new od(Xl),i=[];return e.forEach((function(e){var o=hp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=dy(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=sp(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Np.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=hp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new od(Xl);return dy(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=sp(u);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(fy(t).get(e).next((function(t){if(null===t)throw Kl();ql(t.userId===n.userId),r.push(Hp(n.R,t))})))})),Np.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return uy(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Np.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Np.resolve();var r=IDBKeyRange.lowerBound(hp.prefixForUser(e.userId)),i=[];return dy(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=sp(t[1]);i.push(o)}else r.done()})).next((function(){ql(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return hy(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return py(t).get(this.userId).next((function(t){return t||new cp(e.userId,-1,"")}))},t}();function hy(t,e,n){var r=hp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return dy(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function fy(t){return Up(t,lp.store)}function dy(t){return Up(t,hp.store)}function py(t){return Up(t,cp.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var yy=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),vy=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new yy(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Jl.fromTimestamp(new Yl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return gy(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return ql(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return gy(t).$t((function(s,a){var u=Yp(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Np.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return gy(t).$t((function(t,n){var r=Yp(n);e(r)}))},t.prototype.Xt=function(t){return my(t).get(mp.key).next((function(t){return ql(null!==t),t}))},t.prototype.Zt=function(t,e){return my(t).put(mp.key,e)},t.prototype.te=function(t,e){return gy(t).put(Jp(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Vh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return gy(t).$t({range:r,index:vp.queryTargetsIndexName},(function(t,n,r){var o=Yp(n);Uh(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=by(t);return e.forEach((function(e){var s=rp(e.path);i.push(o.put(new gp(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),Np.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=by(t);return Np.forEach(e,(function(e){var o=rp(e.path);return Np.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=by(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=by(t),i=dd();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=sp(t[1]),o=new gh(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=rp(e.path),r=IDBKeyRange.bound([n],[Hl(n)],!1,!0),i=0;return by(t).$t({index:gp.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return gy(t).get(e).next((function(t){return t?Yp(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gy(t){return Up(t,vp.store)}function my(t){return Up(t,mp.store)}function by(t){return Up(t,gp.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function wy(t){return To(this,void 0,void 0,(function(){return _o(this,(function(e){if(t.code!==Ll.FAILED_PRECONDITION||t.message!==Tp)throw t;return Ul("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Iy(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Xl(n,i);return 0===s?Xl(r,o):s}var Sy=function(){function t(t){this.ne=t,this.buffer=new od(Iy),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Iy(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ey=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ul("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return To(e,void 0,void 0,(function(){var e;return _o(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Op(e=n.sent())?(Ul("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,wy(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Ty=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Np.resolve(xl.o);var r=new Sy(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ul("LruGarbageCollector","Garbage collection skipped; disabled"),Np.resolve(sy)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ul("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),sy):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ul("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Vl()<=Jo.DEBUG&&Ul("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Np.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),_y=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Ty(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return ky(t,n)},t.prototype.removeReference=function(t,e,n){return ky(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return ky(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return py(t).Ot((function(r){return hy(t,r,e).next((function(t){return t&&(n=!0),Np.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),by(t).delete([0,rp(s.path)])}))}));i.push(u)}})).next((function(){return Np.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return ky(t,e)},t.prototype.we=function(t,e){var n,r=by(t),i=xl.o;return r.$t({index:gp.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==xl.o&&e(new gh(sp(n)),i),i=a,n=s):i=xl.o})).next((function(){i!==xl.o&&e(new gh(sp(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function ky(t,e){return by(t).put(function(t,e){return new gp(0,rp(t.path),e)}(e,t.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ny=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){$l(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return th(this.inner)},t}(),Ay=function(){function t(){this.changes=new Ny((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Jl.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Lh.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Np.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Cy=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Oy(t).put(xy(e),n)},t.prototype.removeEntry=function(t,e){var n=Oy(t),r=xy(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Oy(t).get(xy(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Oy(t).get(xy(e)).next((function(t){return{document:n.ye(e,t),size:cy(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=ud();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=ud(),i=new nd(gh.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,cy(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Np.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Oy(t).$t({range:r},(function(t,e,r){for(var s=gh.fromSegments(t);o&&gh.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ud(),o=e.path.length+1,s={};if(n.isEqual(Jl.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Gp(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=pp.collectionReadTimeIndex}return Oy(t).$t(s,(function(t,n,s){if(t.length===o){var a=qp(r.R,n);e.path.isPrefixOf(a.key.path)?vf(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Dy(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ry(t).get(yp.key).next((function(t){return ql(!!t),t}))},t.prototype.me=function(t,e){return Ry(t).put(yp.key,e)},t.prototype.ye=function(t,e){if(e){var n=qp(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Jl.min()))return n}return Lh.newInvalidDocument(t)},t}(),Dy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Ny((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return So(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new od((function(t,e){return Xl(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Wp(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=cy(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Wp(e.Ie.R,Lh.newNoDocument(o,Jl.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Np.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Ay);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ry(t){return Up(t,yp.store)}function Oy(t){return Up(t,pp.store)}function xy(t){return t.path.toArray()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ly=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;ql(n<r&&n>=0&&r<=11);var o=new Ap("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(up.store)}(t),function(t){t.createObjectStore(cp.store,{keyPath:cp.keyPath}),t.createObjectStore(lp.store,{keyPath:lp.keyPath,autoIncrement:!0}).createIndex(lp.userMutationsIndex,lp.userMutationsKeyPath,{unique:!0}),t.createObjectStore(hp.store)}(t),Fy(t),function(t){t.createObjectStore(pp.store)}(t));var s=Np.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(gp.store),t.deleteObjectStore(vp.store),t.deleteObjectStore(mp.store)}(t),Fy(t)),s=s.next((function(){return function(t){var e=t.store(mp.store),n=new mp(0,0,Jl.min().toTimestamp(),0);return e.put(mp.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(lp.store).Nt().next((function(n){t.deleteObjectStore(lp.store),t.createObjectStore(lp.store,{keyPath:lp.keyPath,autoIncrement:!0}).createIndex(lp.userMutationsIndex,lp.userMutationsKeyPath,{unique:!0});var r=e.store(lp.store),i=n.map((function(t){return r.put(t)}));return Np.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(wp.store,{keyPath:wp.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(yp.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(pp.store);e.createIndex(pp.readTimeIndex,pp.readTimeIndexPath,{unique:!1}),e.createIndex(pp.collectionReadTimeIndex,pp.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Ip.store,{keyPath:Ip.keyPath})}(t),function(t){t.createObjectStore(Sp.store,{keyPath:Sp.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(pp.store).$t((function(t,n){e+=cy(n)})).next((function(){var n=new yp(e);return t.store(yp.store).put(yp.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(cp.store),r=t.store(lp.store);return n.Nt().next((function(n){return Np.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(lp.userMutationsIndex,i).next((function(r){return Np.forEach(r,(function(r){ql(r.userId===n.userId);var i=Hp(e.R,r);return uy(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(gp.store),n=t.store(pp.store);return t.store(mp.store).get(mp.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new nh(n),s=function(t){return[0,rp(t)]}(o);r.push(e.get(s).next((function(n){return n?Np.resolve():function(n){return e.put(new gp(0,rp(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Np.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(bp.store,{keyPath:bp.keyPath});var n=e.store(bp.store),r=new ry,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:rp(i)})}};return e.store(pp.store).$t({Ft:!0},(function(t,e){var n=new nh(t);return i(n.popLast())})).next((function(){return e.store(hp.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=sp(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(vp.store);return n.$t((function(t,r){var i=Yp(r),o=Jp(e.R,i);return n.put(o)}))},t}();function Fy(t){t.createObjectStore(gp.store,{keyPath:gp.keyPath}).createIndex(gp.documentTargetsIndex,gp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(vp.store,{keyPath:vp.keyPath}).createIndex(vp.queryTargetsIndexName,vp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(mp.store)}var Py="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Vy=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Fl(Ll.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _y(this,i),this.Le=n+"main",this.R=new Kp(u),this.Be=new Cp(this.Le,11,new Ly(this.R)),this.qe=new vy(this.referenceDelegate,this.R),this.Ut=new iy,this.Ue=function(t,e){return new Cy(t,e)}(this.R,this.Ut),this.Ke=new $p,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Ml("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Fl(Ll.FAILED_PRECONDITION,Py);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new xl(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return To(e,void 0,void 0,(function(){return _o(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return To(e,void 0,void 0,(function(){return _o(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return To(e,void 0,void 0,(function(){return _o(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return My(e).put(new wp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Op(e))return Ul("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ul("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Uy(t).get(up.key).next((function(t){return Np.resolve(e.tn(t))}))},t.prototype.en=function(t){return My(t).delete(this.clientId)},t.prototype.nn=function(){return To(this,void 0,void 0,(function(){var t,e,n,r,i=this;return _o(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Up(t,wp.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Np.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Np.resolve(!0):Uy(t).get(up.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Fl(Ll.FAILED_PRECONDITION,Py);return!1}}return!(!e.networkEnabled||!e.inForeground)||My(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ul("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return To(this,void 0,void 0,(function(){var t=this;return _o(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[up.store,wp.store],(function(e){var n=new Vp(e,xl.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return My(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ly.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ul("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Ep,(function(o){return i=new Vp(o,r.Ne?r.Ne.next():xl.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Ml("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Fl(Ll.FAILED_PRECONDITION,Tp);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Uy(t).get(up.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Fl(Ll.FAILED_PRECONDITION,Py)}))},t.prototype.Ze=function(t){var e=new up(this.clientId,this.allowTabSynchronization,Date.now());return Uy(t).put(up.key,e)},t.yt=function(){return Cp.yt()},t.prototype.Xe=function(t){var e=this,n=Uy(t);return n.get(up.key).next((function(t){return e.tn(t)?(Ul("IndexedDbPersistence","Releasing primary lease."),n.delete(up.key)):Np.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ml("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),!Fo()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Ul("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Ml("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Ml("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Uy(t){return Up(t,up.store)}function My(t){return Up(t,wp.store)}function jy(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var By=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return gh.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):cf(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new gh(e)).next((function(t){var e=ld();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ld();return this.Ut.getCollectionParents(t,i).next((function(s){return Np.forEach(s,(function(s){var a=function(t,e){return new ef(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Lh.newInvalidDocument(c),r=r.insert(c,l)),jf(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){vf(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=dd(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Gf&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Ky=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=dd(),i=dd(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),qy=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Jl.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(of(e)||sf(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Vl()<=Jo.DEBUG&&Ul("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),yf(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new od(gf(t));return e.forEach((function(e,r){vf(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Vl()<=Jo.DEBUG&&Ul("QueryEngine","Using full collection scan to execute query:",yf(e)),this.Sn.getDocumentsMatchingQuery(t,e,Jl.min())},t}(),Wy=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new nd(Xl),this.Fn=new Ny((function(t){return Vh(t)}),Uh),this.$n=Jl.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new By(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Gy(t,e,n,r){return new Wy(t,e,n,r)}function zy(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o;return _o(this,(function(s){switch(s.label){case 0:return n=Wl(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new By(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=dd(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var y=p[d];r.push(y.batchId);for(var v=0,g=y.mutations;v<g.length;v++){var m=g[v];s=s.add(m.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Xy(t,e){var n=Wl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Np.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);ql(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Zy(t){var e=Wl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Hy(t,e){var n=Wl(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return ql(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=ud();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(function(t,e,n,r,i){var o=dd();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ud();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Jl.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Ul("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Jl.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return Np.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.kn=i,t}))}function Yy(t,e){var n=Wl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Jy(t,e){var n=Wl(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Np.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Bp(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function Qy(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s;return _o(this,(function(a){switch(a.label){case 0:r=Wl(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Op(s=a.sent()))throw s;return Ul("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function $y(t,e,n){var r=Wl(t),i=Jl.min(),o=dd();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Wl(t),i=r.Fn.get(n);return void 0!==i?Np.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,hf(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Jl.min(),n?o:dd())})).next((function(t){return{documents:t,Bn:o}}))}))}function tv(t,e){var n=Wl(t),r=Wl(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function ev(t){var e=Wl(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Wl(t),i=ud(),o=Gp(n),s=Oy(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:pp.readTimeIndex,range:a},(function(t,e){var n=qp(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:zp(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function nv(t){return To(this,void 0,void 0,(function(){var e;return _o(this,(function(n){return[2,(e=Wl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Oy(t),n=Jl.min();return e.$t({index:pp.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=zp(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var rv=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Np.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Rd(n.createTime)}),Np.resolve()},t.prototype.getNamedQuery=function(t,e){return Np.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Qp(t.bundledQuery),readTime:Rd(t.readTime)}}(e)),Np.resolve()},t}(),iv=function(){function t(){this.Wn=new od(ov.Gn),this.zn=new od(ov.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new ov(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new ov(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new gh(new nh([])),r=new ov(n,t),i=new ov(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new gh(new nh([])),n=new ov(e,t),r=new ov(e,t+1),i=dd();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new ov(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),ov=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return gh.comparator(t.key,e.key)||Xl(t.ns,e.ns)},t.Hn=function(t,e){return Xl(t.ns,e.ns)||gh.comparator(t.key,e.key)},t}(),sv=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new od(ov.Gn)}return t.prototype.checkEmpty=function(t){return Np.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Mp(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new ov(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Np.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Np.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Np.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Np.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Np.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new ov(e,0),i=new ov(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Np.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new od(Xl);return e.forEach((function(t){var e=new ov(t,0),i=new ov(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Np.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;gh.isDocumentKey(i)||(i=i.child(""));var o=new ov(new gh(i),0),s=new od(Xl);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),Np.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;ql(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Np.forEach(e.mutations,(function(i){var o=new ov(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new ov(e,0),r=this.rs.firstAfterOrEqual(n);return Np.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Np.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),av=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new nd(gh.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Np.resolve(n?n.document.clone():Lh.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ud();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Lh.newInvalidDocument(t))})),Np.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ud(),i=new gh(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(a.path))break;l.compareTo(n)<=0||vf(e,c)&&(r=r.insert(c.key,c.clone()))}return Np.resolve(r)},t.prototype.fs=function(t,e){return Np.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new uv(this)},t.prototype.getSize=function(t){return Np.resolve(this.size)},t}(),uv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return So(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Np.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Ay),cv=function(){function t(t){this.persistence=t,this.ds=new Ny((function(t){return Vh(t)}),Uh),this.lastRemoteSnapshotVersion=Jl.min(),this.highestTargetId=0,this.ws=0,this._s=new iv,this.targetCount=0,this.ys=yy.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Np.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Np.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Np.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Np.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Np.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new yy(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Np.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Np.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Np.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),Np.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Np.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Np.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Np.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Np.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Np.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Np.resolve(n)},t.prototype.containsKey=function(t,e){return Np.resolve(this._s.containsKey(e))},t}(),lv=function(){function t(t,e){var n=this;this.gs={},this.Ne=new xl(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new cv(this),this.Ut=new ny,this.Ue=function(t,e){return new av(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Kp(e),this.Ke=new rv(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new sv(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ul("MemoryPersistence","Starting transaction:",t);var i=new hv(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Np.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),hv=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return So(e,t),e}(_p),fv=function(){function t(t){this.persistence=t,this.As=new iv,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Kl()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Np.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Np.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Np.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Np.forEach(this.vs,(function(r){var i=gh.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Np.or([function(){return Np.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),dv=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pv(t,e){return"firestore_clients_"+t+"_"+e}function yv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function vv(t,e){return"firestore_targets_"+t+"_"+e}dv.UNAUTHENTICATED=new dv(null),dv.GOOGLE_CREDENTIALS=new dv("google-credentials-uid"),dv.FIRST_PARTY=new dv("first-party-uid"),dv.MOCK_USER=new dv("mock-user");var gv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Fl(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Ml("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),mv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Fl(i.error.code,i.error.message)),o?new t(e,i.state,r):(Ml("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),bv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=yd(),s=0;i&&s<r.activeTargetIds.length;++s)i=vh(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ml("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),wv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ml("SharedClientState","Failed to parse online state: "+e),null)},t}(),Iv=function(){function t(){this.activeTargetIds=yd()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Sv=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new nd(Xl),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=pv(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new Iv),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return To(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return _o(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(pv(this.persistenceKey,r)))&&(o=bv.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)l=c[u],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(vv(this.persistenceKey,t));if(n){var r=mv.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(vv(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ul("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ul("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ul("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ul("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Ml("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return To(e,void 0,void 0,(function(){var t,e,r,i,o,s;return _o(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=xl.o;if(null!=t)try{var n=JSON.parse(t);ql("number"==typeof n),e=n}catch(t){Ml("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==xl.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new gv(this.currentUser,t,e,n),i=yv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=yv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=vv(this.persistenceKey,t),i=new mv(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return bv.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return gv.Vs(new dv(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return mv.Vs(r,e)},t.prototype.js=function(t){return wv.Vs(t)},t.prototype.ii=function(t){return To(this,void 0,void 0,(function(){return _o(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ul("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=yd();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Ev=function(){function t(){this.li=new Iv,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Iv,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Tv=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),_v=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ul("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ul("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),kv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Nv=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Av=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return So(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var s=new Ol;s.listenOnce(kl.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case _l.NO_ERROR:var e=s.getResponseJson();Ul("Connection","XHR received:",JSON.stringify(e)),i(e);break;case _l.TIMEOUT:Ul("Connection",'RPC "'+t+'" timed out'),o(new Fl(Ll.DEADLINE_EXCEEDED,"Request time out"));break;case _l.HTTP_ERROR:var n=s.getStatus();if(Ul("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ll).indexOf(e)>=0?e:Ll.UNKNOWN}(r.status);o(new Fl(a,r.message))}else o(new Fl(Ll.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Fl(Ll.UNAVAILABLE,"Connection failed."));break;default:Kl()}}finally{Ul("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new wl,o=du(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Dl({})),this.ki(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lo())||"object"==typeof navigator&&"ReactNative"===navigator.product||Lo().indexOf("Electron/")>=0||function(){var t=Lo();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||Lo().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");Ul("Connection","Creating WebChannel: "+a,s);var u=i.createWebChannel(a,s),c=!1,l=!1,h=new Nv({Ei:function(t){l?Ul("Connection","Not sending because WebChannel is closed:",t):(c||(Ul("Connection","Opening WebChannel transport."),u.open(),c=!0),Ul("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,Rl.EventType.OPEN,(function(){l||Ul("Connection","WebChannel transport opened.")})),f(u,Rl.EventType.CLOSE,(function(){l||(l=!0,Ul("Connection","WebChannel transport closed"),h.Vi())})),f(u,Rl.EventType.ERROR,(function(t){l||(l=!0,jl("Connection","WebChannel transport errored:",t),h.Vi(new Fl(Ll.UNAVAILABLE,"The operation could not be completed")))})),f(u,Rl.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];ql(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ul("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Hf[t];if(void 0!==e)return ed(e)}(o),a=i.message;void 0===s&&(s=Ll.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),l=!0,h.Vi(new Fl(s,a)),u.close()}else Ul("Connection","WebChannel received:",n),h.Si(n)}})),f(o,Nl.STAT_EVENT,(function(t){t.stat===Al?Ul("Connection","Detected buffering proxy"):t.stat===Cl&&Ul("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ul("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Ul("RestConnection","Received: ",t),t}),(function(e){throw jl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=kv[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Cv(){return"undefined"!=typeof window?window:null}function Dv(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rv(t){return new Nd(t,!0)}var Ov=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Ul("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),xv=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Ov(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return To(this,void 0,void 0,(function(){return _o(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return To(this,void 0,void 0,(function(){return _o(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return To(this,void 0,void 0,(function(){return _o(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ll.RESOURCE_EXHAUSTED?(Ml(e.toString()),Ml("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Ll.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Fl(Ll.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return To(t,void 0,void 0,(function(){return _o(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Ul("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Ul("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Lv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return So(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Kl()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(ql(void 0===e||"string"==typeof e),sh.fromBase64String(e||"")):(ql(void 0===e||e instanceof Uint8Array),sh.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ll.UNKNOWN:ed(t.code);return new Fl(e,t.message||"")}(a);n=new wd(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Fd(t,r.document.name),o=Rd(r.document.updateTime);var a=new Oh({mapValue:{fields:r.document.fields}}),u=(s=Lh.newFoundDocument(i,o,a),r.targetIds||[]),c=r.removedTargetIds||[];n=new md(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Fd(t,r.document),o=r.readTime?Rd(r.readTime):Jl.min(),a=Lh.newNoDocument(i,o),s=r.removedTargetIds||[],n=new md([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Fd(t,r.document),o=r.removedTargetIds||[],n=new md([],o,i,null);else{if(!("filter"in e))return Kl();e.filter;var l=e.filter;l.targetId,r=l.count||0,i=new $f(r),o=l.targetId,n=new bd(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Jl.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Jl.min():e.readTime?Rd(e.readTime):Jl.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ud(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Mh(r)?{documents:qd(t,r)}:{query:Wd(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Cd(t,e.resumeToken):e.snapshotVersion.compareTo(Jl.min())>0&&(n.readTime=Ad(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Kl()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ud(this.R),e.removeTarget=t,this.cr(e)},e}(xv),Fv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return So(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(ql(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(ql(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Rd(t.updateTime):Rd(e);return n.isEqual(Jl.min())&&(n=Rd(e)),new Ff(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Rd(t.commitTime);return this.listener.Tr(n,e)}return ql(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ud(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Bd(e.R,t)}))};this.cr(n)},e}(xv),Pv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return So(e,t),e.prototype.br=function(){if(this.Rr)throw new Fl(Ll.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ll.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Fl(Ll.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ll.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Fl(Ll.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Vv=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Ml(e),this.Vr=!1):Ul("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Uv=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return To(o,void 0,void 0,(function(){return _o(this,(function(t){switch(t.label){case 0:return Xv(this)?(Ul("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return To(this,void 0,void 0,(function(){var e;return _o(this,(function(n){switch(n.label){case 0:return(e=Wl(t)).Or.add(4),[4,jv(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Mv(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Vv(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Mv(t){return To(this,void 0,void 0,(function(){var e,n;return _o(this,(function(r){switch(r.label){case 0:if(!Xv(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function jv(t){return To(this,void 0,void 0,(function(){var e,n;return _o(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Bv(t,e){var n=Wl(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),zv(n)?Gv(n):ug(n).er()&&qv(n,e))}function Kv(t,e){var n=Wl(t),r=ug(n);n.$r.delete(e),r.er()&&Wv(n,e),0===n.$r.size&&(r.er()?r.ir():Xv(n)&&n.Br.set("Unknown"))}function qv(t,e){t.qr.U(e.targetId),ug(t).mr(e)}function Wv(t,e){t.qr.U(e),ug(t).yr(e)}function Gv(t){t.qr=new Sd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),ug(t).start(),t.Br.Sr()}function zv(t){return Xv(t)&&!ug(t).tr()&&t.$r.size>0}function Xv(t){return 0===Wl(t).Or.size}function Zv(t){t.qr=void 0}function Hv(t){return To(this,void 0,void 0,(function(){return _o(this,(function(e){return t.$r.forEach((function(e,n){qv(t,e)})),[2]}))}))}function Yv(t,e){return To(this,void 0,void 0,(function(){return _o(this,(function(n){return Zv(t),zv(t)?(t.Br.Nr(e),Gv(t)):t.Br.set("Unknown"),[2]}))}))}function Jv(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o;return _o(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof wd&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o;return _o(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Ul("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Qv(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof md?t.qr.X(e):e instanceof bd?t.qr.rt(e):t.qr.et(e),n.isEqual(Jl.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Zy(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(sh.EMPTY_BYTE_STRING,n.snapshotVersion)),Wv(t,e);var r=new Bp(n.target,e,1,n.sequenceNumber);qv(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Ul("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Qv(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Qv(t,e,n){return To(this,void 0,void 0,(function(){var r=this;return _o(this,(function(i){switch(i.label){case 0:if(!Op(e))throw e;return t.Or.add(1),[4,jv(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Zy(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return To(r,void 0,void 0,(function(){return _o(this,(function(e){switch(e.label){case 0:return Ul("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Mv(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function $v(t,e){return e().catch((function(n){return Qv(t,n,e)}))}function tg(t){return To(this,void 0,void 0,(function(){var e,n,r,i,o;return _o(this,(function(s){switch(s.label){case 0:e=Wl(t),n=cg(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Xv(t)&&t.Fr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Yy(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=cg(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Qv(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return eg(e)&&ng(e),[2]}}))}))}function eg(t){return Xv(t)&&!cg(t).tr()&&t.Fr.length>0}function ng(t){cg(t).start()}function rg(t){return To(this,void 0,void 0,(function(){return _o(this,(function(e){return cg(t).Ar(),[2]}))}))}function ig(t){return To(this,void 0,void 0,(function(){var e,n,r,i;return _o(this,(function(o){for(e=cg(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function og(t,e,n){return To(this,void 0,void 0,(function(){var r,i;return _o(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=jp.from(r,e,n),[4,$v(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,tg(t)];case 2:return o.sent(),[2]}}))}))}function sg(t,e){return To(this,void 0,void 0,(function(){return _o(this,(function(n){switch(n.label){case 0:return e&&cg(t).pr?[4,function(t,e){return To(this,void 0,void 0,(function(){var n,r;return _o(this,(function(i){switch(i.label){case 0:return td(r=e.code)&&r!==Ll.ABORTED?(n=t.Fr.shift(),cg(t).sr(),[4,$v(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,tg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return eg(t)&&ng(t),[2]}}))}))}function ag(t,e){return To(this,void 0,void 0,(function(){var n;return _o(this,(function(r){switch(r.label){case 0:return n=Wl(t),e?(n.Or.delete(2),[4,Mv(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,jv(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function ug(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Wl(t);return r.br(),new Lv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Hv.bind(null,t),Ri:Yv.bind(null,t),_r:Jv.bind(null,t)}),t.Mr.push((function(n){return To(e,void 0,void 0,(function(){return _o(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),zv(t)?Gv(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Zv(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function cg(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Wl(t);return r.br(),new Fv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:rg.bind(null,t),Ri:sg.bind(null,t),Ir:ig.bind(null,t),Tr:og.bind(null,t)}),t.Mr.push((function(n){return To(e,void 0,void 0,(function(){return _o(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,tg(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Ul("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var lg=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new kp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fl(Ll.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function hg(t,e){if(Ml("AsyncQueue",e+": "+t),Op(t))return new Fl(Ll.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fg=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||gh.comparator(e.key,n.key)}:function(t,e){return gh.comparator(t.key,e.key)},this.keyedMap=ld(),this.sortedSet=new nd(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),dg=function(){function t(){this.Qr=new nd(gh.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Kl():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),pg=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,fg.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&df(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),yg=function(){this.Wr=void 0,this.listeners=[]},vg=function(){this.queries=new Ny((function(t){return pf(t)}),df),this.onlineState="Unknown",this.Gr=new Set};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gg(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return _o(this,(function(c){switch(c.label){case 0:if(n=Wl(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new yg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=hg(a,"Initialization of query '"+yf(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Ig(n),[2]}}))}))}function mg(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s;return _o(this,(function(a){return n=Wl(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function bg(t,e){for(var n=Wl(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);u.Wr=s}}r&&Ig(n)}function wg(t,e,n){var r=Wl(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Ig(t){t.Gr.forEach((function(t){t.next()}))}var Sg=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new pg(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=pg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Eg=function(t){this.key=t},Tg=function(t){this.key=t},_g=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=dd(),this.mutatedKeys=dd(),this.lo=gf(t),this.fo=new fg(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new dg,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=of(this.query)&&i.size===this.query.limit?i.last():null,c=sf(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=vf(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),of(this.query)||sf(this.query))for(;s.size>this.query.limit;){var l=of(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kl()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new pg(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new dg,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=dd(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Tg(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Eg(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=dd();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return pg.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),kg=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ng=function(t){this.key=t,this.bo=!1},Ag=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Ny((function(t){return pf(t)}),df),this.Vo=new Map,this.So=new Set,this.Do=new nd(gh.comparator),this.Co=new Map,this.No=new iv,this.xo={},this.ko=new Map,this.Fo=yy.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Cg(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a;return _o(this,(function(u){switch(u.label){case 0:return n=im(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Jy(n.localStore,hf(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Dg(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&Bv(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function Dg(t,e,n,r){return To(this,void 0,void 0,(function(){var i,o,s,a,u,c;return _o(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return To(this,void 0,void 0,(function(){var i,o,s;return _o(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,$y(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(qg(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,$y(t.localStore,e,!0)];case 1:return i=l.sent(),o=new _g(e,i.Bn),s=o._o(i.documents),a=gd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),qg(t,n,u.To),c=new kg(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Rg(t,e){return To(this,void 0,void 0,(function(){var n,r,i;return _o(this,(function(o){switch(o.label){case 0:return n=Wl(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!df(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Qy(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Kv(n.remoteStore,r.targetId),Bg(n,r.targetId)})).catch(wy)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Bg(n,r.targetId),[4,Qy(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Og(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s;return _o(this,(function(a){switch(a.label){case 0:r=om(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Wl(t),i=Yl.now(),o=e.reduce((function(t,e){return t.add(e.key)}),dd());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Bf(c,n.get(c.key));null!=l&&s.push(new Gf(c.key,l,xh(l.value.mapValue),Pf.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new nd(Xl)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,zg(r,i.changes)];case 3:return a.sent(),[4,tg(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=hg(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function xg(t,e){return To(this,void 0,void 0,(function(){var n,r;return _o(this,(function(i){switch(i.label){case 0:n=Wl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Hy(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(ql(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?ql(r.bo):t.removedDocuments.size>0&&(ql(r.bo),r.bo=!1))})),[4,zg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,wy(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Lg(t,e,n){var r=Wl(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Wl(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Ig(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Fg(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s,a,u;return _o(this,(function(c){switch(c.label){case 0:return(r=Wl(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new nd(gh.comparator)).insert(o,Lh.newNoDocument(o,Jl.min())),a=dd().add(o),u=new vd(Jl.min(),new Map,new od(Xl),s,a),[4,xg(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Gg(r),[3,4];case 2:return[4,Qy(r.localStore,e,!1).then((function(){return Bg(r,e,n)})).catch(wy)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Pg(t,e){return To(this,void 0,void 0,(function(){var n,r,i;return _o(this,(function(o){switch(o.label){case 0:n=Wl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Xy(n.localStore,e)];case 2:return i=o.sent(),jg(n,r,null),Mg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,zg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,wy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Vg(t,e,n){return To(this,void 0,void 0,(function(){var r,i;return _o(this,(function(o){switch(o.label){case 0:r=Wl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Wl(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return ql(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),jg(r,e,n),Mg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,zg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,wy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ug(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s;return _o(this,(function(a){switch(a.label){case 0:Xv((n=Wl(t)).remoteStore)||Ul("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Wl(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=a.sent(),s=hg(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Mg(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function jg(t,e,n){var r=Wl(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Bg(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Kg(t,e)}))}function Kg(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Kv(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Gg(t))}function qg(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Eg?(t.No.addReference(o.key,e),Wg(t,o)):o instanceof Tg?(Ul("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Kg(t,o.key)):Kl()}}function Wg(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ul("SyncEngine","New document in limbo: "+n),t.So.add(r),Gg(t))}function Gg(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new gh(nh.fromString(e)),r=t.Fo.next();t.Co.set(r,new Ng(n)),t.Do=t.Do.insert(n,r),Bv(t.remoteStore,new Bp(hf(rf(n.path)),r,2,xl.o))}}function zg(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s;return _o(this,(function(a){switch(a.label){case 0:return r=Wl(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ky.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return _o(this,(function(h){switch(h.label){case 0:n=Wl(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Np.forEach(e,(function(e){return Np.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Np.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Op(r=h.sent()))throw r;return Ul("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.kn.get(a),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.kn=n.kn.insert(a,l));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Xg(t,e){return To(this,void 0,void 0,(function(){var n,r;return _o(this,(function(i){switch(i.label){case 0:return(n=Wl(t)).currentUser.isEqual(e)?[3,3]:(Ul("SyncEngine","User change. New user:",e.toKey()),[4,zy(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new Fl(Ll.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,zg(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Zg(t,e){var n=Wl(t),r=n.Co.get(e);if(r&&r.bo)return dd().add(r.key);var i=dd(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Hg(t,e){return To(this,void 0,void 0,(function(){var n,r,i;return _o(this,(function(o){switch(o.label){case 0:return[4,$y((n=Wl(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&qg(n,e.targetId,i.To),i)]}}))}))}function Yg(t){return To(this,void 0,void 0,(function(){var e;return _o(this,(function(n){return[2,ev((e=Wl(t)).localStore).then((function(t){return zg(e,t)}))]}))}))}function Jg(t,e,n,r){return To(this,void 0,void 0,(function(){var i,o;return _o(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Wl(t),r=Wl(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Np.resolve(null)}))}))}((i=Wl(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,tg(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(jg(i,e,r||null),Mg(i,e),function(t,e){Wl(Wl(t)._n).Gt(e)}(i.localStore,e)):Kl(),s.label=4;case 4:return[4,zg(i,o)];case 5:return s.sent(),[3,7];case 6:Ul("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Qg(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return _o(this,(function(l){switch(l.label){case 0:return im(n=Wl(t)),om(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,$g(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,ag(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)a=s[o],Bv(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Bg(n,e),Qy(n.localStore,e,!0)})),Kv(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,$g(n,u)];case 5:return l.sent(),function(t){var e=Wl(t);e.Co.forEach((function(t,n){Kv(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new nd(gh.comparator)}(n),n.$o=!1,[4,ag(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))}function $g(t,e,n){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,d,p,y;return _o(this,(function(v){switch(v.label){case 0:n=Wl(t),r=[],i=[],o=0,s=e,v.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Jy(n.localStore,hf(c[0]))]:[3,7]):[3,13];case 2:u=v.sent(),l=0,h=c,v.label=3;case 3:return l<h.length?(f=h[l],d=n.Po.get(f),[4,Hg(n,d)]):[3,6];case 4:(p=v.sent()).snapshot&&i.push(p.snapshot),v.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,tv(n.localStore,a)];case 8:return y=v.sent(),[4,Jy(n.localStore,y)];case 9:return u=v.sent(),[4,Dg(n,tm(y),a,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function tm(t){return nf(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function em(t){var e=Wl(t);return Wl(Wl(e.localStore).persistence).fn()}function nm(t,e,n,r){return To(this,void 0,void 0,(function(){var i,o,s;return _o(this,(function(a){switch(a.label){case 0:return(i=Wl(t)).$o?(Ul("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ev(i.localStore)];case 3:return o=a.sent(),s=vd.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,zg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Qy(i.localStore,e,!0)];case 6:return a.sent(),Bg(i,e,r),[3,8];case 7:Kl(),a.label=8;case 8:return[2]}}))}))}function rm(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return _o(this,(function(d){switch(d.label){case 0:if(!(r=im(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Ul("SyncEngine","Adding an already active target "+s),[3,5]):[4,tv(r.localStore,s)]):[3,6];case 2:return a=d.sent(),[4,Jy(r.localStore,a)];case 3:return u=d.sent(),[4,Dg(r,tm(a),u.targetId,!1)];case 4:d.sent(),Bv(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return _o(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Qy(r.localStore,t,!1).then((function(){Kv(r.remoteStore,t),Bg(r,t)})).catch(wy)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,d.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function im(t){var e=Wl(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fg.bind(null,e),e.vo._r=bg.bind(null,e.eventManager),e.vo.Mo=wg.bind(null,e.eventManager),e}function om(t){var e=Wl(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vg.bind(null,e),e}var sm=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return To(this,void 0,void 0,(function(){return _o(this,(function(e){switch(e.label){case 0:return this.R=Rv(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Gy(this.persistence,new qy,t.initialUser,this.R)},t.prototype.qo=function(t){return new lv(fv.bs,this.R)},t.prototype.Bo=function(t){return new Ev},t.prototype.terminate=function(){return To(this,void 0,void 0,(function(){return _o(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),am=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return So(e,t),e.prototype.initialize=function(e){return To(this,void 0,void 0,(function(){var n=this;return _o(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,nv(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,om(this.Qo.syncEngine)];case 4:return r.sent(),[4,tg(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Gy(this.persistence,new qy,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Ey(e,t.asyncQueue)},e.prototype.qo=function(t){var e=jy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ay.withCacheSize(this.cacheSizeBytes):ay.DEFAULT;return new Vy(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Cv(),Dv(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Ev},e}(sm),um=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return So(e,t),e.prototype.initialize=function(e){return To(this,void 0,void 0,(function(){var n,r=this;return _o(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Sv?(this.sharedClientState.syncEngine={ui:Jg.bind(null,n),ai:nm.bind(null,n),hi:rm.bind(null,n),fn:em.bind(null,n),ci:Yg.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return To(r,void 0,void 0,(function(){return _o(this,(function(e){switch(e.label){case 0:return[4,Qg(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Cv();if(!Sv.yt(e))throw new Fl(Ll.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=jy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Sv(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(am),cm=function(){function t(){}return t.prototype.initialize=function(t,e){return To(this,void 0,void 0,(function(){var n=this;return _o(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Lg(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Xg.bind(null,this.syncEngine),[4,ag(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new vg},t.prototype.createDatastore=function(t){var e,n=Rv(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Av(e));return function(t,e,n){return new Pv(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Lg(s.syncEngine,t,0)},o=_v.yt()?new _v:new Tv,new Uv(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Ag(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return To(this,void 0,void 0,(function(){var e;return _o(this,(function(n){switch(n.label){case 0:return e=Wl(t),Ul("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,jv(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),lm=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),hm=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return To(this,void 0,void 0,(function(){var e,n=this;return _o(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Fl(Ll.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a;return _o(this,(function(u){switch(u.label){case 0:return n=Wl(t),r=Ud(n.R)+"/documents",i={documents:e.map((function(t){return Ld(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){ql(!!e.found),e.found.name,e.found.updateTime;var n=Fd(t,e.found.name),r=Rd(e.found.updateTime),i=new Oh({mapValue:{fields:e.found.fields}});return Lh.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){ql(!!e.missing),ql(!!e.readTime);var n=Fd(t,e.missing),r=Rd(e.readTime);return Lh.newNoDocument(n,r)}(t,e):Kl()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());ql(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Jf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return To(this,void 0,void 0,(function(){var t,e=this;return _o(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=gh.fromPath(n);e.mutations.push(new Qf(r,e.precondition(r)))})),[4,function(t,e){return To(this,void 0,void 0,(function(){var n,r,i;return _o(this,(function(o){switch(o.label){case 0:return n=Wl(t),r=Ud(n.R)+"/documents",i={writes:e.map((function(t){return Bd(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Kl();e=Jl.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Fl(Ll.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Pf.updateTime(e):Pf.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Jl.min()))throw new Fl(Ll.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pf.updateTime(e)}return Pf.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),fm=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Ov(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return To(t,void 0,void 0,(function(){var t,e,n=this;return _o(this,(function(r){return t=new hm(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ph(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!td(e)}return!1},t}(),dm=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=dv.UNAUTHENTICATED,this.clientId=zl.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return To(r,void 0,void 0,(function(){return _o(this,(function(e){switch(e.label){case 0:return Ul("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return To(this,void 0,void 0,(function(){return _o(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Fl(Ll.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new kp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return To(t,void 0,void 0,(function(){var t,n;return _o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=hg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function pm(t,e){return To(this,void 0,void 0,(function(){var n,r,i=this;return _o(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ul("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return To(i,void 0,void 0,(function(){return _o(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,zy(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function ym(t,e){return To(this,void 0,void 0,(function(){var n,r;return _o(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,vm(t)];case 1:return n=i.sent(),Ul("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return To(this,void 0,void 0,(function(){var n,r;return _o(this,(function(i){switch(i.label){case 0:return(n=Wl(t)).asyncQueue.verifyOperationInProgress(),Ul("RemoteStore","RemoteStore received new credentials"),r=Xv(n),n.Or.add(3),[4,jv(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Mv(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function vm(t){return To(this,void 0,void 0,(function(){return _o(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ul("FirestoreClient","Using default OfflineComponentProvider"),[4,pm(t,new sm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function gm(t){return To(this,void 0,void 0,(function(){return _o(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ul("FirestoreClient","Using default OnlineComponentProvider"),[4,ym(t,new cm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function mm(t){return vm(t).then((function(t){return t.persistence}))}function bm(t){return vm(t).then((function(t){return t.localStore}))}function wm(t){return gm(t).then((function(t){return t.remoteStore}))}function Im(t){return gm(t).then((function(t){return t.syncEngine}))}function Sm(t){return To(this,void 0,void 0,(function(){var e,n;return _o(this,(function(r){switch(r.label){case 0:return[4,gm(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Cg.bind(null,e.syncEngine),n.onUnlisten=Rg.bind(null,e.syncEngine),n)]}}))}))}function Em(t,e,n){var r=this;void 0===n&&(n={});var i=new kp;return t.asyncQueue.enqueueAndForget((function(){return To(r,void 0,void 0,(function(){var r;return _o(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new lm({next:function(o){e.enqueueAndForget((function(){return mg(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Fl(Ll.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Fl(Ll.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Sg(rf(n.path),o,{includeMetadataChanges:!0,so:!0});return gg(t,s)},[4,Sm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Tm(t,e,n){var r=this;void 0===n&&(n={});var i=new kp;return t.asyncQueue.enqueueAndForget((function(){return To(r,void 0,void 0,(function(){var r;return _o(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new lm({next:function(n){e.enqueueAndForget((function(){return mg(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Fl(Ll.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Sg(n,o,{includeMetadataChanges:!0,so:!0});return gg(t,s)},[4,Sm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var _m=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},km=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Nm=new Map,Am=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Cm=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(dv.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Dm=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Rm=function(){function t(t){var e=this;this.currentUser=dv.UNAUTHENTICATED,this.oc=new kp,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Ul("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Ul("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Ul("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ql("string"==typeof n.accessToken),new Am(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return To(n,void 0,void 0,(function(){return _o(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return ql(null===t||"string"==typeof t),new dv(t)},t}(),Om=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=dv.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),xm=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Om(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(dv.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Lm(t,e,n){if(!n)throw new Fl(Ll.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Fm(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Pm(t,e,n,r){if(!0===e&&!0===r)throw new Fl(Ll.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Vm(t){if(!gh.isDocumentKey(t))throw new Fl(Ll.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Um(t){if(gh.isDocumentKey(t))throw new Fl(Ll.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Mm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Kl()}function jm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Fl(Ll.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Mm(t);throw new Fl(Ll.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Bm(t,e){if(e<=0)throw new Fl(Ll.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Km=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Fl(Ll.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Fl(Ll.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Pm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),qm=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Km({}),this._settingsFrozen=!1,t instanceof km?(this._databaseId=t,this._credentials=new Cm):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Fl(Ll.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new km(t.options.projectId)}(t),this._credentials=new Rm(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Fl(Ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Fl(Ll.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Km(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Cm;switch(t.type){case"gapi":var e=t.client;return ql(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new xm(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Fl(Ll.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Nm.get(this))&&(Ul("ComponentProvider","Removing Datastore"),Nm.delete(this),t.terminate()),Promise.resolve();var t},t}(),Wm=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new zm(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Gm=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),zm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,rf(r))||this)._path=r,i.type="collection",i}return So(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Wm(this.firestore,null,new gh(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Gm);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Wo(t),Lm("collection","path",e),t instanceof qm)return Um(n=nh.fromString.apply(nh,Ao([e],r))),new zm(t,null,n);if(!(t instanceof Wm||t instanceof zm))throw new Fl(Ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Um(n=nh.fromString.apply(nh,Ao([t.path],r)).child(nh.fromString(e))),new zm(t.firestore,null,n)}function Zm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Wo(t),1===arguments.length&&(e=zl.u()),Lm("doc","path",e),t instanceof qm)return Vm(n=nh.fromString.apply(nh,Ao([e],r))),new Wm(t,null,new gh(n));if(!(t instanceof Wm||t instanceof zm))throw new Fl(Ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Vm(n=t._path.child(nh.fromString.apply(nh,Ao([e],r)))),new Wm(t.firestore,t instanceof zm?t.converter:null,new gh(n))}function Hm(t,e){return t=Wo(t),e=Wo(e),(t instanceof Wm||t instanceof zm)&&(e instanceof Wm||e instanceof zm)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ym(t,e){return t=Wo(t),e=Wo(e),t instanceof Gm&&e instanceof Gm&&t.firestore===e.firestore&&df(t._query,e._query)&&t.converter===e.converter
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Jm=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Ov(this,"async_queue_retry"),this.Ic=function(){var e=Dv();e&&Ul("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Dv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Dv();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new kp;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return To(this,void 0,void 0,(function(){var t,e=this;return _o(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Op(t=n.sent()))throw t;return Ul("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Ml("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=lg.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Kl()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return To(this,void 0,void 0,(function(){var t;return _o(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Qm(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var $m=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Jm,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return So(e,t),e.prototype._terminate=function(){return this._firestoreClient||eb(this),this._firestoreClient.terminate()},e}(qm);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function tb(t){return t._firestoreClient||eb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function eb(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new _m(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new dm(t._credentials,t._queue,r)}function nb(t,e,n){var r=this,i=new kp;return t.asyncQueue.enqueue((function(){return To(r,void 0,void 0,(function(){var r;return _o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,pm(t,n)];case 1:return o.sent(),[4,ym(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ll.FAILED_PRECONDITION||t.code===Ll.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function rb(t){if(t._initialized||t._terminated)throw new Fl(Ll.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ib=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ih(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),ob=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(sh.fromBase64String(e))}catch(e){throw new Fl(Ll.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(sh.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),sb=function(t){this._methodName=t},ab=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Fl(Ll.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Fl(Ll.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Xl(this._lat,t._lat)||Xl(this._long,t._long)},t}(),ub=/^__.*__$/,cb=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Gf(t,this.data,this.fieldMask,e,this.fieldTransforms):new Wf(t,this.data,e,this.fieldTransforms)},t}(),lb=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Gf(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kl()}}var fb=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Ob(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(hb(this.Nc)&&ub.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),db=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Rv(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new fb({Nc:t,methodName:e,qc:n,path:ih.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function pb(t){var e=t._freezeSettings(),n=Rv(t._databaseId);return new db(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yb(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Ab("Data must be an object, but it was:",s,r);var a,u,c=kb(r,s);if(o.merge)a=new oh(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Cb(e,f[h],n);if(!s.contains(d))throw new Fl(Ll.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");xb(l,d)||l.push(d)}a=new oh(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new cb(new Oh(c),a,u)}var vb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return So(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(sb);function gb(t,e,n){return new fb({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var mb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return So(e,t),e.prototype._toFieldTransform=function(t){return new Lf(t.path,new kf)},e.prototype.isEqual=function(t){return t instanceof e},e}(sb),bb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return So(e,t),e.prototype._toFieldTransform=function(t){var e=gb(this,t,!0),n=this.Kc.map((function(t){return _b(t,e)})),r=new Nf(n);return new Lf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(sb),wb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return So(e,t),e.prototype._toFieldTransform=function(t){var e=gb(this,t,!0),n=this.Kc.map((function(t){return _b(t,e)})),r=new Cf(n);return new Lf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(sb),Ib=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return So(e,t),e.prototype._toFieldTransform=function(t){var e=new Rf(t.R,If(t.R,this.Qc));return new Lf(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(sb);function Sb(t,e,n,r){var i=t.Uc(1,e,n);Ab("Data must be an object, but it was:",i,r);var o=[],s=Oh.empty();$l(r,(function(t,r){var a=Rb(e,t,n);r=Wo(r);var u=i.Oc(a);if(r instanceof vb)o.push(a);else{var c=_b(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new oh(o);return new lb(s,a,i.fieldTransforms)}function Eb(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Cb(e,r,n)],u=[i];if(o.length%2!=0)throw new Fl(Ll.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Cb(e,o[c])),u.push(o[c+1]);for(var l=[],h=Oh.empty(),f=a.length-1;f>=0;--f)if(!xb(l,a[f])){var d=a[f],p=u[f];p=Wo(p);var y=s.Oc(d);if(p instanceof vb)l.push(d);else{var v=_b(p,y);null!=v&&(l.push(d),h.set(d,v))}}var g=new oh(l);return new lb(h,g,s.fieldTransforms)}function Tb(t,e,n,r){return void 0===r&&(r=!1),_b(n,t.Uc(r?4:3,e))}function _b(t,e){if(Nb(t=Wo(t)))return Ab("Unsupported field value:",e,t),kb(t,e);if(t instanceof sb)return function(t,e){if(!hb(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=_b(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Wo(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return If(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Yl.fromDate(t);return{timestampValue:Ad(e.R,n)}}if(t instanceof Yl)return n=new Yl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ad(e.R,n)};if(t instanceof ab)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ob)return{bytesValue:Cd(e.R,t._byteString)};if(t instanceof Wm){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Od(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Mm(t))}(t,e)}function kb(t,e){var n={};return th(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$l(t,(function(t,r){var i=_b(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Nb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Yl||t instanceof ab||t instanceof ob||t instanceof Wm||t instanceof sb)}function Ab(t,e,n){if(!Nb(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Mm(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function Cb(t,e,n){if((e=Wo(e))instanceof ib)return e._internalPath;if("string"==typeof e)return Rb(t,e);throw Ob("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Db=new RegExp("[~\\*/\\[\\]]");function Rb(t,e,n){if(e.search(Db)>=0)throw Ob("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(ib.bind.apply(ib,Ao([void 0],e.split(".")))))._internalPath}catch(r){throw Ob("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Ob(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Fl(Ll.INVALID_ARGUMENT,(a+=". ")+t+u)}function xb(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Lb=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Wm(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Fb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Pb("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Fb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return So(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Lb);function Pb(t,e){return"string"==typeof e?Rb(t,e):e instanceof ib?e._internalPath:e._delegate._internalPath}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Ub=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return So(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Mb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Pb("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Lb),Mb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return So(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Ub),jb=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Vb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Mb(n._firestore,n._userDataWriter,r.key,r,new Vb(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Fl(Ll.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Mb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Vb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Mb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Vb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Bb(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Bb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kl()}}function Kb(t,e){return t instanceof Ub&&e instanceof Ub?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof jb&&e instanceof jb&&t._firestore===e._firestore&&Ym(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qb(t){if(sf(t)&&0===t.explicitOrderBy.length)throw new Fl(Ll.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Wb=function(){};function Gb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var zb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return So(e,t),e.prototype._apply=function(t){var e=pb(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){$b(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push(Qb(r,t,h))}a={arrayValue:{values:u}}}else a=Qb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||$b(s,o),a=Tb(n,"where",s,"in"===o||"not-in"===o);var f=jh.create(i,o,a);return function(t,e){if(e.g()){var n=uf(t);if(null!==n&&!n.isEqual(e.field))throw new Fl(Ll.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=af(t);null!==r&&tw(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Fl(Ll.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Fl(Ll.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Gm(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new ef(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Wb),Xb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return So(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Jh(e,n);return function(t,e){if(null===af(t)){var n=uf(t);null!==n&&tw(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Gm(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new ef(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Wb),Zb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return So(e,t),e.prototype._apply=function(t){return new Gm(t.firestore,t.converter,ff(t._query,this.Hc,this.Jc))},e}(Wb),Hb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return So(e,t),e.prototype._apply=function(t){var e=Jb(t,this.type,this.Yc,this.Xc);return new Gm(t.firestore,t.converter,function(t,e){return new ef(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Wb),Yb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return So(e,t),e.prototype._apply=function(t){var e=Jb(t,this.type,this.Yc,this.Xc);return new Gm(t.firestore,t.converter,function(t,e){return new ef(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Wb);function Jb(t,e,n,r){if(n[0]=Wo(n[0]),n[0]instanceof Lb)return function(t,e,n,r,i){if(!r)throw new Fl(Ll.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=lf(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(_h(e,r.key));else{var c=r.data.field(u.field);if(hh(c))throw new Fl(Ll.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Fl(Ll.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Hh(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=pb(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Fl(Ll.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!cf(t)&&-1!==c.indexOf("/"))throw new Fl(Ll.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(nh.fromString(c));if(!gh.isDocumentKey(l))throw new Fl(Ll.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new gh(l);a.push(_h(e,h))}else{var f=Tb(n,r,c);a.push(f)}}return new Hh(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Qb(t,e,n){if("string"==typeof(n=Wo(n))){if(""===n)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!cf(e)&&-1!==n.indexOf("/"))throw new Fl(Ll.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(nh.fromString(n));if(!gh.isDocumentKey(r))throw new Fl(Ll.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return _h(t,new gh(r))}if(n instanceof Wm)return _h(t,n._key);throw new Fl(Ll.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Mm(n)+".")}function $b(t,e){if(!Array.isArray(t)||0===t.length)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function tw(t,e,n){if(!n.isEqual(e))throw new Fl(Ll.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ew=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),mh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ch(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(lh(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Kl()}},t.prototype.convertObject=function(t,e){var n=this,r={};return $l(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new ab(ch(t.latitude),ch(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=fh(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(dh(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=uh(t);return new Yl(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=nh.fromString(t);ql(np(n));var r=new km(n.get(1),n.get(3)),i=new gh(n.popFirst(5));return r.isEqual(e)||Ml("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function nw(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var rw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return So(e,t),e.prototype.convertBytes=function(t){return new ob(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Wm(this.firestore,null,e)},e}(ew),iw=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=pb(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=ow(t,this._firestore),i=nw(r.converter,e,n),o=yb(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Pf.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=ow(t,this._firestore);return o="string"==typeof(e=Wo(e))||e instanceof ib?Eb(this._dataReader,"WriteBatch.update",s._key,e,n,r):Sb(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Pf.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=ow(t,this._firestore);return this._mutations=this._mutations.concat(new Jf(e._key,Pf.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Fl(Ll.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ow(t,e){if((t=Wo(t)).firestore!==e)throw new Fl(Ll.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var sw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return So(e,t),e.prototype.convertBytes=function(t){return new ob(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Wm(this.firestore,null,e)},e}(ew);function aw(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=jm(t,Wm);var o=jm(t.firestore,$m),s=pb(o);return cw(o,[("string"==typeof(e=Wo(e))||e instanceof ib?Eb(s,"updateDoc",t._key,e,n,r):Sb(s,"updateDoc",t._key,e)).toMutation(t._key,Pf.exists(!0))])}function uw(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Wo(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Qm(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Qm(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Wm)c=jm(t.firestore,$m),l=rf(t._key.path),u={next:function(e){i[a]&&i[a](lw(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=jm(t,Gm);c=jm(d.firestore,$m),l=d._query;var p=new sw(c);u={next:function(t){i[a]&&i[a](new jb(c,p,d,t))},error:i[a+1],complete:i[a+2]},qb(t._query)}return function(t,e,n,r){var i=this,o=new lm(r),s=new Sg(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return To(i,void 0,void 0,(function(){var e;return _o(this,(function(n){switch(n.label){case 0:return e=gg,[4,Sm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return To(i,void 0,void 0,(function(){var e;return _o(this,(function(n){switch(n.label){case 0:return e=mg,[4,Sm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(tb(c),l,h,u)}function cw(t,e){return function(t,e){var n=this,r=new kp;return t.asyncQueue.enqueueAndForget((function(){return To(n,void 0,void 0,(function(){var n;return _o(this,(function(i){switch(i.label){case 0:return n=Og,[4,Im(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(tb(t),e)}function lw(t,e,n){var r=n.docs.get(e._key),i=new sw(t);return new Ub(t,i,e._key,r,new Vb(n.hasPendingWrites,n.fromCache),e.converter)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var hw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return So(e,t),e.prototype.get=function(e){var n=this,r=ow(e,this._firestore),i=new sw(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Ub(n._firestore,i,r._key,t._document,new Vb(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=pb(t)}return t.prototype.get=function(t){var e=this,n=ow(t,this._firestore),r=new rw(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Kl();var i=t[0];if(i.isFoundDocument())return new Lb(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Lb(e._firestore,r,n._key,null,n.converter);throw Kl()}))},t.prototype.set=function(t,e,n){var r=ow(t,this._firestore),i=nw(r.converter,e,n),o=yb(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=ow(t,this._firestore);return o="string"==typeof(e=Wo(e))||e instanceof ib?Eb(this._dataReader,"Transaction.update",s._key,e,n,r):Sb(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=ow(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function fw(){if("undefined"==typeof Uint8Array)throw new Fl(Ll.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function dw(){if("undefined"==typeof atob)throw new Fl(Ll.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var pw=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return dw(),new t(ob.fromBase64String(e))},t.fromUint8Array=function(e){return fw(),new t(ob.fromUint8Array(e))},t.prototype.toBase64=function(){return dw(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return fw(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),yw=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){rb(t=jm(t,$m));var n=tb(t),r=t._freezeSettings(),i=new cm;return nb(n,i,new am(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){rb(t=jm(t,$m));var e=tb(t),n=t._freezeSettings(),r=new cm;return nb(e,r,new um(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Fl(Ll.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new kp;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return To(e,void 0,void 0,(function(){var e;return _o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return To(this,void 0,void 0,(function(){var e;return _o(this,(function(n){switch(n.label){case 0:return Cp.yt()?(e=t+"main",[4,Cp.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(jy(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),vw=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof km||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||jl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=jm(t,qm))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&jl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,a;if("string"==typeof r.mockUserToken)s=r.mockUserToken,a=dv.MOCK_USER;else{s=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Eo({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ro(JSON.stringify({alg:"none",type:"JWT"})),Ro(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Fl(Ll.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new dv(u)}t._credentials=new Dm(new Am(s,a))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return To(e,void 0,void 0,(function(){var e,n;return _o(this,(function(r){switch(r.label){case 0:return[4,mm(t)];case 1:return e=r.sent(),[4,wm(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Wl(t);return e.Or.delete(0),Mv(e)}(n))]}}))}))}))}(tb(jm(this._delegate,$m)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return To(e,void 0,void 0,(function(){var e,n;return _o(this,(function(r){switch(r.label){case 0:return[4,mm(t)];case 1:return e=r.sent(),[4,wm(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return To(this,void 0,void 0,(function(){var e;return _o(this,(function(n){switch(n.label){case 0:return(e=Wl(t)).Or.add(0),[4,jv(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(tb(jm(this._delegate,$m)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Pm("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new kp;return t.asyncQueue.enqueueAndForget((function(){return To(e,void 0,void 0,(function(){var e;return _o(this,(function(r){switch(r.label){case 0:return e=Ug,[4,Im(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(tb(jm(this._delegate,$m)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new lm(e);return t.asyncQueue.enqueueAndForget((function(){return To(n,void 0,void 0,(function(){var e;return _o(this,(function(n){switch(n.label){case 0:return e=function(t,e){Wl(t).Gr.add(e),e.next()},[4,Sm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return To(n,void 0,void 0,(function(){var e;return _o(this,(function(n){switch(n.label){case 0:return e=function(t,e){Wl(t).Gr.delete(e)},[4,Sm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(tb(t=jm(t,$m)),Qm(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Fl(Ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Dw(this,Xm(this._delegate,t))}catch(t){throw Sw(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Iw(this,Zm(this._delegate,t))}catch(t){throw Sw(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Nw(this,function(t,e){if(t=jm(t,qm),Lm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Gm(t,null,function(t){return new ef(nh.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Sw(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new kp;return t.asyncQueue.enqueueAndForget((function(){return To(n,void 0,void 0,(function(){var n;return _o(this,(function(i){switch(i.label){case 0:return[4,function(t){return gm(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new fm(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(tb(t),(function(n){return e(new hw(t,n))}))}(this._delegate,(function(n){return t(new mw(e,n))}))},t.prototype.batch=function(){var t=this;return tb(this._delegate),new bw(new iw(this._delegate,(function(e){return cw(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Fl(Ll.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Fl(Ll.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),gw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return So(e,t),e.prototype.convertBytes=function(t){return new pw(new ob(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Iw.eu(e,this.firestore,null)},e}(ew);var mw=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new gw(t)}return t.prototype.get=function(t){var e=this,n=Rw(t);return this._delegate.get(n).then((function(t){return new _w(e._firestore,new Ub(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Rw(t);return n?(Fm("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Rw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Ao([s,e,n],i)),this},t.prototype.delete=function(t){var e=Rw(t);return this._delegate.delete(e),this},t}(),bw=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Rw(t);return n?(Fm("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Rw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Ao([s,e,n],i)),this},t.prototype.delete=function(t){var e=Rw(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),ww=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Mb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new kw(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new gw(e),n),i.set(n,o)),o},t}();ww.su=new WeakMap;var Iw=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gw(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Fl(Ll.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Wm(n._delegate,r,new gh(e)))},t.eu=function(e,n,r){return new t(n,new Wm(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Dw(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Dw(this.firestore,Xm(this._delegate,t))}catch(t){throw Sw(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Wo(t))instanceof Wm&&Hm(this._delegate,t)},t.prototype.set=function(t,e){e=Fm("DocumentReference.set",e);try{return function(t,e,n){t=jm(t,Wm);var r=jm(t.firestore,$m),i=nw(t.converter,e,n);return cw(r,[yb(pb(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Pf.none())])}(this._delegate,t,e)}catch(t){throw Sw(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?aw(this._delegate,t):aw.apply(void 0,Ao([this._delegate,t,e],n))}catch(t){throw Sw(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return cw(jm((t=this._delegate).firestore,$m),[new Jf(t._key,Pf.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ew(e),i=Tw(e,(function(e){return new _w(t.firestore,new Ub(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return uw(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=jm(t,Wm);var e=jm(t.firestore,$m),n=tb(e),r=new sw(e);return function(t,e){var n=this,r=new kp;return t.asyncQueue.enqueueAndForget((function(){return To(n,void 0,void 0,(function(){var n;return _o(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return To(this,void 0,void 0,(function(){var r,i;return _o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Wl(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Fl(Ll.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=hg(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,bm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Ub(e,r,t._key,n,new Vb(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=jm(t,Wm);var e=jm(t.firestore,$m);return Em(tb(e),t._key,{source:"server"}).then((function(n){return lw(e,t,n)}))}(this._delegate):function(t){t=jm(t,Wm);var e=jm(t.firestore,$m);return Em(tb(e),t._key).then((function(n){return lw(e,t,n)}))}(this._delegate)).then((function(t){return new _w(e.firestore,new Ub(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(ww.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Sw(t,e,n){return t.message=t.message.replace(e,n),t}function Ew(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Qm(r))return r}return{}}function Tw(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Qm(t[0])?t[0]:Qm(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var _w=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Iw(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Kb(this._delegate,t._delegate)},t}(),kw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return So(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(_w),Nw=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gw(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Gb(this._delegate,function(t,e,n){var r=e,i=Pb("where",t);return new zb(i,r,n)}(e,n,r)))}catch(e){throw Sw(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Gb(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Pb("orderBy",t);return new Xb(r,n)}(e,n)))}catch(e){throw Sw(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Gb(this._delegate,function(t){return Bm("limit",t),new Zb("limit",t,"F")}(e)))}catch(e){throw Sw(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Gb(this._delegate,function(t){return Bm("limitToLast",t),new Zb("limitToLast",t,"L")}(e)))}catch(e){throw Sw(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Gb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hb("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Sw(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Gb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hb("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Sw(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Gb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yb("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Sw(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Gb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yb("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Sw(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Ym(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=jm(t,Gm);var e=jm(t.firestore,$m),n=tb(e),r=new sw(e);return function(t,e){var n=this,r=new kp;return t.asyncQueue.enqueueAndForget((function(){return To(n,void 0,void 0,(function(){var n;return _o(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s,a;return _o(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,$y(t,e,!0)];case 1:return a=u.sent(),r=new _g(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=hg(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,bm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new jb(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=jm(t,Gm);var e=jm(t.firestore,$m),n=tb(e),r=new sw(e);return Tm(n,t._query,{source:"server"}).then((function(n){return new jb(e,r,t,n)}))}(this._delegate):function(t){t=jm(t,Gm);var e=jm(t.firestore,$m),n=tb(e),r=new sw(e);return qb(t._query),Tm(n,t._query).then((function(n){return new jb(e,r,t,n)}))}(this._delegate)).then((function(t){return new Cw(e.firestore,new jb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ew(e),i=Tw(e,(function(e){return new Cw(t.firestore,new jb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return uw(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(ww.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Aw=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new kw(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Cw=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Nw(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new kw(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Aw(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new kw(n._firestore,r))}))},t.prototype.isEqual=function(t){return Kb(this._delegate,t._delegate)},t}(),Dw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return So(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Iw(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Iw(this.firestore,void 0===t?Zm(this._delegate):Zm(this._delegate,t))}catch(t){throw Sw(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=jm(t.firestore,$m),r=Zm(t),i=nw(t.converter,e);return cw(n,[yb(pb(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Pf.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Iw(e.firestore,t)}))},e.prototype.isEqual=function(t){return Hm(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(ww.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Nw);function Rw(t){return jm(t,Wm)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ow=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(ib.bind.apply(ib,Ao([void 0],t)))}return t.documentId=function(){return new t(ih.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Wo(t))instanceof ib&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),xw=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new mb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new vb("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bb("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wb("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Ib("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Lw={Firestore:vw,GeoPoint:ab,Timestamp:Yl,Blob:pw,Transaction:mw,WriteBatch:bw,DocumentReference:Iw,DocumentSnapshot:_w,Query:Nw,QueryDocumentSnapshot:kw,QuerySnapshot:Cw,CollectionReference:Dw,FieldPath:Ow,FieldValue:xw,setLogLevel:function(t){var e;e=t,Pl.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};!
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){!function(t,e){t.INTERNAL.registerComponent(new Go("firestore",(function(t){return function(t,e){return new vw(t,new $m(t,e),new yw)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Lw)))}(t),t.registerVersion("@firebase/firestore","2.4.0")}(bs);bs.initializeApp({apiKey:"AIzaSyDjSSoXs-xNIyq310lsCzVcYu8Zz9puiPQ",authDomain:"tag-generator-3.firebaseapp.com",projectId:"tag-generator-3",storageBucket:"tag-generator-3.appspot.com",messagingSenderId:"25589238377",appId:"1:25589238377:web:b089f263d21e9b18d330f8"});const Fw="start",Pw="count",Vw="template";async function Uw(){if(Kw){document.querySelector("#generate").disabled=!0;let t=document.querySelector("#template")?.value||"#female-male",e=parseInt(document.querySelector("#start")?.value||"0"),n=parseInt(document.querySelector("#count")?.value||"12"),r={start:e,end:e+n-1,template:t,userId:Kw.id,userName:Kw.name};try{!function(t){let e=localStorage.getItem("generated"),n=t;if(e){let r=JSON.parse(e);const i=864e5,o=240;if((new Date).getTime()-new Date(r.date).getTime()<i){if(r.count+t>=o)throw new Error("ÐÑ ÑÐ¾Ð·Ð´Ð°Ð»Ð¸ ÑÐµÐ³Ð¾Ð´Ð½Ñ ÑÐ»Ð¸ÑÐºÐ¾Ð¼ Ð¼Ð½Ð¾Ð³Ð¾ Ð±Ð¸ÑÐ¾Ðº. ÐÐ±ÑÐ°ÑÐ¸ÑÐµÑÑ Ðº Ð¾ÑÐ³Ð°Ð½Ð¸Ð·Ð°ÑÐ¾ÑÐ°Ð¼ ÑÐºÐ»Ð°Ð´Ð°.");n+=r.count}}localStorage.setItem("generated",JSON.stringify({date:new Date,count:n}))}(n),await async function(t){let e=bs.firestore().doc("generation/latest");if((await bs.firestore().doc("generation/latest").get()).get("end")>t.end)throw Error("ÐÑÐ´ÐµÐ»ÐµÐ½Ð½ÑÐµ Ð½Ð¾Ð¼ÐµÑÐ° ÑÐ¶Ðµ Ð·Ð°Ð½ÑÑÑ. ÐÐ¾Ð¶Ð°Ð»ÑÐ¹ÑÑÐ°, Ð¾Ð±Ð½Ð¾Ð²Ð¸ÑÐµ ÑÑÑÐ°Ð½Ð¸ÑÑ Ð¸ Ð¿Ð¾Ð¿ÑÐ¾Ð±ÑÐ¹ÑÐµ ÑÐ½Ð¾Ð²Ð°.");await e.set(t);let n=bs.firestore().collection("generation").doc();await n.set(t)}(r),window.open(location.pathname+`?start=${e}&count=${n}&template=${encodeURIComponent(t)}`)}catch(t){alert(t.message)}document.querySelector("#start").value=(r.end+1).toString(),document.querySelector("#generate").disabled=!1}}function Mw(){const t=new URLSearchParams(window.location.search),e=t.get(Fw),n=t.get(Pw),r=t.get(Vw);return!!(e&&n&&r)&&(function(t,e,n){document.querySelector("#settings").style.display="none",document.querySelector("#loading").style.display="none";let r=document.querySelector("#print"),i=document.querySelector(t);if(i){let t=i.content.querySelector(".code");for(let o=e;o<e+n;o++){JsBarcode(t,o,{height:35,fontSize:12});let e=document.importNode(i.content,!0);r.appendChild(e)}window.print()}else alert("Template not found!")}(r,parseInt(e),parseInt(n)),!0)}async function jw(){let t=await async function(){let t=await bs.firestore().doc("generation/latest").get();return{start:t.get("start"),end:t.get("end"),template:t.get("template"),userId:t.get("userId"),userName:t.get("userName")}}();document.querySelector("#start").value=(t.end+1).toString()}function Bw(t){t?(document.querySelector("#settings").style.display="none",document.querySelector("#loading").style.display=""):(document.querySelector("#settings").style.display="",document.querySelector("#loading").style.display="none")}var Kw=null;!async function(){if(!Mw()){Bw(!0);try{await jw(),Kw=await wo(),Bw(!1),document.querySelector("#generate")?.addEventListener("click",Uw),document.querySelector("#login")?.addEventListener("click",mo),function(t){if(t){document.querySelector("#generate").style.display="",document.querySelector("#login").style.display="none",document.querySelector("#login-info").innerHTML="ÐÑ Ð²Ð¾ÑÐ»Ð¸ ÐºÐ°Ðº "+t.name;let e=document.createElement("a");e.innerText="Ð²ÑÐ¹ÑÐ¸",e.addEventListener("click",bo),document.querySelector("#login-info").appendChild(e)}else document.querySelector("#generate").style.display="none",document.querySelector("#login").style.display=""}(Kw)}catch(t){return void alert(t.message)}}}()}();
//# sourceMappingURL=app.js.map
